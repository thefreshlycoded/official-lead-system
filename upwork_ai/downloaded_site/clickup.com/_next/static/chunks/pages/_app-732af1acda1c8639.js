(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2888],{81361:function(t,e,n){"use strict";n.d(e,{Gr:function(){return Ot},Ny:function(){return Lt},cC:function(){return Rt},aS:function(){return Mt},NQ:function(){return Nt}});var r=/^[a-zA-Z:_][a-zA-Z0-9:_.-]*$/,i={revert:function(){}},o=new Map,a=new Set;function s(t){var e=o.get(t);return e||(e={element:t,attributes:{}},o.set(t,e)),e}function u(t,e,n,r,i){var o=n(t),a={isDirty:!1,originalValue:o,virtualValue:o,mutations:[],el:t,_positionTimeout:null,observer:new MutationObserver((function(){if("position"!==e||!a._positionTimeout){"position"===e&&(a._positionTimeout=setTimeout((function(){a._positionTimeout=null}),1e3));var r=n(t);"position"===e&&r.parentNode===a.virtualValue.parentNode&&r.insertBeforeNode===a.virtualValue.insertBeforeNode||r!==a.virtualValue&&(a.originalValue=r,i(a))}})),mutationRunner:i,setValue:r,getCurrentValue:n};return"position"===e&&t.parentNode?a.observer.observe(t.parentNode,{childList:!0,subtree:!0,attributes:!1,characterData:!1}):a.observer.observe(t,function(t){return"html"===t?{childList:!0,subtree:!0,attributes:!0,characterData:!0}:{childList:!1,subtree:!1,attributes:!0,attributeFilter:[t]}}(e)),a}function c(t,e){var n=e.getCurrentValue(e.el);e.virtualValue=t,t&&"string"!==typeof t?n&&t.parentNode===n.parentNode&&t.insertBeforeNode===n.insertBeforeNode||(e.isDirty=!0,O()):t!==n&&(e.isDirty=!0,O())}function l(t){var e=t.originalValue;t.mutations.forEach((function(t){return e=t.mutate(e)})),c(function(t){k||(k=document.createElement("div"));return k.innerHTML=t,k.innerHTML}(e),t)}function d(t){var e=new Set(t.originalValue.split(/\s+/).filter(Boolean));t.mutations.forEach((function(t){return t.mutate(e)})),c(Array.from(e).filter(Boolean).join(" "),t)}function f(t){var e=t.originalValue;t.mutations.forEach((function(t){return e=t.mutate(e)})),c(e,t)}function p(t){var e=t.originalValue;t.mutations.forEach((function(t){var n=function(t){var e=t.parentSelector,n=t.insertBeforeSelector,r=document.querySelector(e);if(!r)return null;var i=n?document.querySelector(n):null;return n&&!i?null:{parentNode:r,insertBeforeNode:i}}(t.mutate());e=n||e})),c(e,t)}var h=function(t){return t.innerHTML},v=function(t,e){return t.innerHTML=e};function m(t){var e=s(t);return e.html||(e.html=u(t,"html",h,v,l)),e.html}var g=function(t){return{parentNode:t.parentElement,insertBeforeNode:t.nextElementSibling}},y=function(t,e){e.insertBeforeNode&&!e.parentNode.contains(e.insertBeforeNode)||e.parentNode.insertBefore(t,e.insertBeforeNode)};function b(t){var e=s(t);return e.position||(e.position=u(t,"position",g,y,p)),e.position}var w=function(t,e){return e?t.className=e:t.removeAttribute("class")},_=function(t){return t.className};function S(t){var e=s(t);return e.classes||(e.classes=u(t,"class",_,w,d)),e.classes}var k,x;function E(t,e){var n,r=s(t);return r.attributes[e]||(r.attributes[e]=u(t,e,(n=e,function(t){var e;return null!=(e=t.getAttribute(n))?e:null}),function(t){return function(e,n){return null!==n?e.setAttribute(t,n):e.removeAttribute(t)}}(e),f)),r.attributes[e]}function I(t,e,n){if(n.isDirty){n.isDirty=!1;var r=n.virtualValue;n.mutations.length||function(t,e){var n,r,i=o.get(t);if(i)if("html"===e)null==(n=i.html)||null==(r=n.observer)||r.disconnect(),delete i.html;else if("class"===e){var a,s;null==(a=i.classes)||null==(s=a.observer)||s.disconnect(),delete i.classes}else if("position"===e){var u,c;null==(u=i.position)||null==(c=u.observer)||c.disconnect(),delete i.position}else{var l,d,f;null==(l=i.attributes)||null==(d=l[e])||null==(f=d.observer)||f.disconnect(),delete i.attributes[e]}}(t,e),n.setValue(t,r)}}function C(t,e){t.html&&I(e,"html",t.html),t.classes&&I(e,"class",t.classes),t.position&&I(e,"position",t.position),Object.keys(t.attributes).forEach((function(n){I(e,n,t.attributes[n])}))}function O(){o.forEach(C)}function T(t){if("position"!==t.kind||1!==t.elements.size){var e=new Set(t.elements);document.querySelectorAll(t.selector).forEach((function(n){e.has(n)||(t.elements.add(n),function(t,e){var n=null;"html"===t.kind?n=m(e):"class"===t.kind?n=S(e):"attribute"===t.kind?n=E(e,t.attribute):"position"===t.kind&&(n=b(e)),n&&(n.mutations.push(t),n.mutationRunner(n))}(t,n))}))}}function A(t){t.elements.forEach((function(e){return function(t,e){var n=null;if("html"===t.kind?n=m(e):"class"===t.kind?n=S(e):"attribute"===t.kind?n=E(e,t.attribute):"position"===t.kind&&(n=b(e)),n){var r=n.mutations.indexOf(t);-1!==r&&n.mutations.splice(r,1),n.mutationRunner(n)}}(t,e)})),t.elements.clear(),a.delete(t)}function R(){a.forEach(T)}function M(t){return"undefined"===typeof document?i:(a.add(t),T(t),{revert:function(){A(t)}})}function N(t,e){return M({kind:"html",elements:new Set,mutate:e,selector:t})}function L(t,e){return M({kind:"position",elements:new Set,mutate:e,selector:t})}function D(t,e){return M({kind:"class",elements:new Set,mutate:e,selector:t})}function P(t,e,n){return r.test(e)?"class"===e||"className"===e?D(t,(function(t){var e=n(Array.from(t).join(" "));t.clear(),e&&e.split(/\s+/g).filter(Boolean).forEach((function(e){return t.add(e)}))})):M({kind:"attribute",attribute:e,elements:new Set,mutate:n,selector:t}):i}"undefined"!==typeof document&&(x||(x=new MutationObserver((function(){R()}))),R(),x.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!1,characterData:!1}));var j={html:N,classes:D,attribute:P,position:L,declarative:function(t){var e=t.selector,n=t.action,r=t.value,o=t.attribute,a=t.parentSelector,s=t.insertBeforeSelector;if("html"===o){if("append"===n)return N(e,(function(t){return t+(null!=r?r:"")}));if("set"===n)return N(e,(function(){return null!=r?r:""}))}else if("class"===o){if("append"===n)return D(e,(function(t){r&&t.add(r)}));if("remove"===n)return D(e,(function(t){r&&t.delete(r)}));if("set"===n)return D(e,(function(t){t.clear(),r&&t.add(r)}))}else if("position"===o){if("set"===n&&a)return L(e,(function(){return{insertBeforeSelector:s,parentSelector:a}}))}else{if("append"===n)return P(e,o,(function(t){return null!==t?t+(null!=r?r:""):null!=r?r:""}));if("set"===n)return P(e,o,(function(){return null!=r?r:""}));if("remove"===n)return P(e,o,(function(){return null}))}return i}};function F(t){let e=2166136261;const n=t.length;for(let r=0;r<n;r++)e^=t.charCodeAt(r),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24);return e>>>0}function U(t,e,n){return 2===n?F(F(t+e)+"")%1e4/1e4:1===n?F(e+t)%1e3/1e3:null}function B(t,e){return t>=e[0]&&t<e[1]}function z(t){try{const e=t.replace(/([^\\])\//g,"$1\\/");return new RegExp(e)}catch(e){return void console.error(e)}}function V(t,e){if(!e.length)return!1;let n=!1,r=!1;for(let i=0;i<e.length;i++){const o=G(t,e[i].type,e[i].pattern);if(!1===e[i].include){if(o)return!1}else n=!0,o&&(r=!0)}return r||!n}function q(t,e){try{const n=new URL(e.replace(/^([^:/?]*)\./i,"https://$1.").replace(/\*/g,"_____"),"https://_____"),r=[[t.host,n.host,!1],[t.pathname,n.pathname,!0]];return n.hash&&r.push([t.hash,n.hash,!1]),n.searchParams.forEach(((e,n)=>{r.push([t.searchParams.get(n)||"",e,!1])})),!r.some((t=>!function(t,e,n){try{let r=e.replace(/[*.+?^${}()|[\]\\]/g,"\\$&").replace(/_____/g,".*");return n&&(r="\\/?"+r.replace(/(^\/|\/$)/g,"")+"\\/?"),new RegExp("^"+r+"$","i").test(t)}catch(r){return!1}}(t[0],t[1],t[2])))}catch(n){return!1}}function G(t,e,n){try{const r=new URL(t,"https://_");if("regex"===e){const t=z(n);return!!t&&(t.test(r.href)||t.test(r.href.substring(r.origin.length)))}return"simple"===e&&q(r,n)}catch(r){return!1}}function H(t,e,n){(e=void 0===e?1:e)<0?e=0:e>1&&(e=1);const r=(i=t)<=0?[]:new Array(i).fill(1/i);var i;(n=n||r).length!==t&&(n=r);const o=n.reduce(((t,e)=>e+t),0);(o<.99||o>1.01)&&(n=r);let a=0;return n.map((t=>{const n=a;return a+=t,[n,n+e*t]}))}const J=t=>Uint8Array.from(atob(t),(t=>t.charCodeAt(0)));async function K(t,e,n){if(e=e||"",!(n=n||globalThis.crypto&&globalThis.crypto.subtle))throw new Error("No SubtleCrypto implementation found");try{const r=await n.importKey("raw",J(e),{name:"AES-CBC",length:128},!0,["encrypt","decrypt"]),[i,o]=t.split("."),a=await n.decrypt({name:"AES-CBC",iv:J(i)},r,J(o));return(new TextDecoder).decode(a)}catch(r){throw new Error("Failed to decrypt")}}function W(t){return"string"===typeof t?t:JSON.stringify(t)}function Z(t){"number"===typeof t&&(t+=""),t&&"string"===typeof t||(t="0");const e=t.replace(/(^v|\+.*$)/g,"").split(/[-.]/);return 3===e.length&&e.push("~"),e.map((t=>t.match(/^[0-9]+$/)?t.padStart(5," "):t)).join("-")}const $={};function X(t,e){if("$or"in e)return rt(t,e.$or);if("$nor"in e)return!rt(t,e.$nor);if("$and"in e)return function(t,e){for(let n=0;n<e.length;n++)if(!X(t,e[n]))return!1;return!0}(t,e.$and);if("$not"in e)return!X(t,e.$not);for(const[n,r]of Object.entries(e))if(!Q(r,Y(t,n)))return!1;return!0}function Y(t,e){const n=e.split(".");let r=t;for(let i=0;i<n.length;i++){if(!r||"object"!==typeof r||!(n[i]in r))return null;r=r[n[i]]}return r}function Q(t,e){if("string"===typeof t)return e+""===t;if("number"===typeof t)return 1*e===t;if("boolean"===typeof t)return!!e===t;if(null===t)return null===e;if(Array.isArray(t)||!tt(t))return JSON.stringify(e)===JSON.stringify(t);for(const n in t)if(!nt(n,e,t[n]))return!1;return!0}function tt(t){const e=Object.keys(t);return e.length>0&&e.filter((t=>"$"===t[0])).length===e.length}function et(t,e){return Array.isArray(t)?t.some((t=>e.includes(t))):e.includes(t)}function nt(t,e,n){switch(t){case"$veq":return Z(e)===Z(n);case"$vne":return Z(e)!==Z(n);case"$vgt":return Z(e)>Z(n);case"$vgte":return Z(e)>=Z(n);case"$vlt":return Z(e)<Z(n);case"$vlte":return Z(e)<=Z(n);case"$eq":return e===n;case"$ne":return e!==n;case"$lt":return e<n;case"$lte":return e<=n;case"$gt":return e>n;case"$gte":return e>=n;case"$exists":return n?null!=e:null==e;case"$in":return!!Array.isArray(n)&&et(e,n);case"$nin":return!!Array.isArray(n)&&!et(e,n);case"$not":return!Q(n,e);case"$size":return!!Array.isArray(e)&&Q(n,e.length);case"$elemMatch":return function(t,e){if(!Array.isArray(t))return!1;const n=tt(e)?t=>Q(e,t):t=>X(t,e);for(let r=0;r<t.length;r++)if(t[r]&&n(t[r]))return!0;return!1}(e,n);case"$all":if(!Array.isArray(e))return!1;for(let t=0;t<n.length;t++){let r=!1;for(let i=0;i<e.length;i++)if(Q(n[t],e[i])){r=!0;break}if(!r)return!1}return!0;case"$regex":try{return(r=n,$[r]||($[r]=new RegExp(r.replace(/([^\\])\//g,"$1\\/"))),$[r]).test(e)}catch(i){return!1}case"$type":return function(t){if(null===t)return"null";if(Array.isArray(t))return"array";const e=typeof t;return["string","number","boolean","object","undefined"].includes(e)?e:"unknown"}(e)===n;default:return console.error("Unknown operator: "+t),!1}var r}function rt(t,e){if(!e.length)return!0;for(let n=0;n<e.length;n++)if(X(t,e[n]))return!0;return!1}const it={staleTTL:6e4,maxAge:864e5,cacheKey:"gbFeaturesCache",backgroundSync:!0,maxEntries:10,disableIdleStreams:!1,idleStreamInterval:2e4},ot={fetch:globalThis.fetch?globalThis.fetch.bind(globalThis):void 0,SubtleCrypto:globalThis.crypto?globalThis.crypto.subtle:void 0,EventSource:globalThis.EventSource},at={fetchFeaturesCall:t=>{let{host:e,clientKey:n,headers:r}=t;return ot.fetch("".concat(e,"/api/features/").concat(n),{headers:r})},fetchRemoteEvalCall:t=>{let{host:e,clientKey:n,payload:r,headers:i}=t;const o={method:"POST",headers:{"Content-Type":"application/json",...i},body:JSON.stringify(r)};return ot.fetch("".concat(e,"/api/eval/").concat(n),o)},eventSourceCall:t=>{let{host:e,clientKey:n,headers:r}=t;return r?new ot.EventSource("".concat(e,"/sub/").concat(n),{headers:r}):new ot.EventSource("".concat(e,"/sub/").concat(n))},startIdleListener:()=>{let t;if(!("undefined"!==typeof window&&"undefined"!==typeof document))return;const e=()=>{"visible"===document.visibilityState?(window.clearTimeout(t),dt.forEach((t=>{t&&"idle"===t.state&&Et(t)}))):"hidden"===document.visibilityState&&(t=window.setTimeout(ht,it.idleStreamInterval))};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},stopIdleListener:()=>{}};try{globalThis.localStorage&&(ot.localStorage=globalThis.localStorage)}catch(Dt){}const st=new Map;let ut=!1;const ct=new Map,lt=new Map,dt=new Map,ft=new Set;async function pt(t,e,n,r,i,o){o||(it.backgroundSync=!1);const a=await async function(t,e,n,r){const i=mt(t),o=gt(t),a=new Date,s=new Date(a.getTime()-it.maxAge+it.staleTTL);await async function(){if(ut)return;ut=!0;try{if(ot.localStorage){const t=await ot.localStorage.getItem(it.cacheKey);if(t){const e=JSON.parse(t);e&&Array.isArray(e)&&e.forEach((t=>{let[e,n]=t;ct.set(e,{...n,staleAt:new Date(n.staleAt)})})),yt()}}}catch(Dt){}if(!it.disableIdleStreams){const t=at.startIdleListener();t&&(at.stopIdleListener=t)}}();const u=ct.get(o);return u&&!r&&(e||u.staleAt>a)&&u.staleAt>s?(u.sse&&ft.add(i),u.staleAt<a?_t(t):St(t),u.data):await function(t,e){return new Promise((n=>{let r,i=!1;const o=t=>{i||(i=!0,r&&clearTimeout(r),n(t||null))};e&&(r=setTimeout((()=>o()),e)),t.then((t=>o(t))).catch((()=>o()))}))}(_t(t),n)}(t,r,e,n);i&&a&&await wt(t,a)}function ht(){dt.forEach((t=>{t&&(t.state="idle",xt(t))}))}async function vt(){try{if(!ot.localStorage)return;await ot.localStorage.setItem(it.cacheKey,JSON.stringify(Array.from(ct.entries())))}catch(Dt){}}function mt(t){const[e,n]=t.getApiInfo();return"".concat(e,"||").concat(n)}function gt(t){const e=mt(t);if(!t.isRemoteEval())return e;const n=t.getAttributes(),r=t.getCacheKeyAttributes()||Object.keys(t.getAttributes()),i={};r.forEach((t=>{i[t]=n[t]}));const o=t.getForcedVariations(),a=t.getUrl();return"".concat(e,"||").concat(JSON.stringify({ca:i,fv:o,url:a}))}function yt(){const t=Array.from(ct.entries()).map((t=>{let[e,n]=t;return{key:e,staleAt:n.staleAt.getTime()}})).sort(((t,e)=>t.staleAt-e.staleAt)),e=Math.min(Math.max(0,ct.size-it.maxEntries),ct.size);for(let n=0;n<e;n++)ct.delete(t[n].key)}function bt(t,e,n){const r=n.dateUpdated||"",i=new Date(Date.now()+it.staleTTL),o=ct.get(e);if(o&&r&&o.version===r)return o.staleAt=i,void vt();ct.set(e,{data:n,version:r,staleAt:i,sse:ft.has(t)}),yt(),vt();const a=st.get(t);a&&a.forEach((t=>wt(t,n)))}async function wt(t,e){e=await t.decryptPayload(e,void 0,ot.SubtleCrypto),await t.refreshStickyBuckets(e),t.setFeatures(e.features||t.getFeatures()),t.setExperiments(e.experiments||t.getExperiments())}async function _t(t){const{apiHost:e,apiRequestHeaders:n}=t.getApiHosts(),r=t.getClientKey(),i=t.isRemoteEval(),o=mt(t),a=gt(t);let s=lt.get(a);if(!s){s=(i?at.fetchRemoteEvalCall({host:e,clientKey:r,payload:{attributes:t.getAttributes(),forcedVariations:t.getForcedVariations(),forcedFeatures:Array.from(t.getForcedFeatures().entries()),url:t.getUrl()},headers:n}):at.fetchFeaturesCall({host:e,clientKey:r,headers:n})).then((t=>{if(!t.ok)throw new Error("HTTP error: ".concat(t.status));return"enabled"===t.headers.get("x-sse-support")&&ft.add(o),t.json()})).then((e=>(bt(o,a,e),St(t),lt.delete(a),e))).catch((t=>(lt.delete(a),Promise.resolve({})))),lt.set(a,s)}return await s}function St(t){const e=mt(t),n=gt(t),{streamingHost:r,streamingHostRequestHeaders:i}=t.getApiHosts(),o=t.getClientKey();if(it.backgroundSync&&ft.has(e)&&ot.EventSource){if(dt.has(e))return;const t={src:null,host:r,clientKey:o,headers:i,cb:r=>{try{if("features-updated"===r.type){const t=st.get(e);t&&t.forEach((t=>{_t(t)}))}else if("features"===r.type){const t=JSON.parse(r.data);bt(e,n,t)}t.errors=0}catch(Dt){kt(t)}},errors:0,state:"active"};dt.set(e,t),Et(t)}}function kt(t){if("idle"!==t.state&&(t.errors++,t.errors>3||t.src&&2===t.src.readyState)){const e=Math.pow(3,t.errors-3)*(1e3+1e3*Math.random());xt(t),setTimeout((()=>{["idle","active"].includes(t.state)||Et(t)}),Math.min(e,3e5))}}function xt(t){t.src&&(t.src.onopen=null,t.src.onerror=null,t.src.close(),t.src=null,"active"===t.state&&(t.state="disabled"))}function Et(t){t.src=at.eventSourceCall({host:t.host,clientKey:t.clientKey,headers:t.headers}),t.state="active",t.src.addEventListener("features",t.cb),t.src.addEventListener("features-updated",t.cb),t.src.onerror=()=>kt(t),t.src.onopen=()=>{t.errors=0}}const It="undefined"!==typeof window&&"undefined"!==typeof document,Ct=function(){let t;try{t="0.36.0"}catch(Dt){t=""}return t}();class Ot{constructor(t){if(t=t||{},this.version=Ct,this._ctx=this.context=t,this._renderer=null,this._trackedExperiments=new Set,this._trackedFeatures={},this.debug=!1,this._subscriptions=new Set,this._rtQueue=[],this._rtTimer=0,this.ready=!1,this._assigned=new Map,this._forcedFeatureValues=new Map,this._attributeOverrides={},this._activeAutoExperiments=new Map,this._triggeredExpKeys=new Set,this._loadFeaturesCalled=!1,this._redirectedUrl="",this._deferredTrackingCalls=[],t.renderer&&(this._renderer=t.renderer),t.remoteEval){if(t.decryptionKey)throw new Error("Encryption is not available for remoteEval");if(!t.clientKey)throw new Error("Missing clientKey");let e=!1;try{e=!!new URL(t.apiHost||"").hostname.match(/growthbook\.io$/i)}catch(Dt){}if(e)throw new Error("Cannot use remoteEval on GrowthBook Cloud")}else if(t.cacheKeyAttributes)throw new Error("cacheKeyAttributes are only used for remoteEval");t.features&&(this.ready=!0),It&&t.enableDevMode&&(window._growthbook=this,document.dispatchEvent(new Event("gbloaded"))),t.experiments?(this.ready=!0,this._updateAllAutoExperiments()):t.antiFlicker&&this._setAntiFlicker(),t.clientKey&&!t.remoteEval&&this._refresh({},!0,!1)}async loadFeatures(t){t&&t.autoRefresh&&(this._ctx.subscribeToChanges=!0),this._loadFeaturesCalled=!0,await this._refresh(t,!0,!0),this._canSubscribe()&&function(t){const e=mt(t),n=st.get(e)||new Set;n.add(t),st.set(e,n)}(this)}async refreshFeatures(t){await this._refresh(t,!1,!0)}getApiInfo(){return[this.getApiHosts().apiHost,this.getClientKey()]}getApiHosts(){const t=this._ctx.apiHost||"https://cdn.growthbook.io";return{apiHost:t.replace(/\/*$/,""),streamingHost:(this._ctx.streamingHost||t).replace(/\/*$/,""),apiRequestHeaders:this._ctx.apiHostRequestHeaders,streamingHostRequestHeaders:this._ctx.streamingHostRequestHeaders}}getClientKey(){return this._ctx.clientKey||""}isRemoteEval(){return this._ctx.remoteEval||!1}getCacheKeyAttributes(){return this._ctx.cacheKeyAttributes}async _refresh(t,e,n){if(t=t||{},!this._ctx.clientKey)throw new Error("Missing clientKey");await pt(this,t.timeout,t.skipCache||this._ctx.enableDevMode,e,n,!1!==this._ctx.backgroundSync)}_render(){if(this._renderer)try{this._renderer()}catch(Dt){console.error("Failed to render",Dt)}}setFeatures(t){this._ctx.features=t,this.ready=!0,this._render()}async setEncryptedFeatures(t,e,n){const r=await K(t,e||this._ctx.decryptionKey,n);this.setFeatures(JSON.parse(r))}setExperiments(t){this._ctx.experiments=t,this.ready=!0,this._updateAllAutoExperiments()}async setEncryptedExperiments(t,e,n){const r=await K(t,e||this._ctx.decryptionKey,n);this.setExperiments(JSON.parse(r))}async decryptPayload(t,e,n){return t.encryptedFeatures&&(t.features=JSON.parse(await K(t.encryptedFeatures,e||this._ctx.decryptionKey,n)),delete t.encryptedFeatures),t.encryptedExperiments&&(t.experiments=JSON.parse(await K(t.encryptedExperiments,e||this._ctx.decryptionKey,n)),delete t.encryptedExperiments),t}async setAttributes(t){this._ctx.attributes=t,this._ctx.stickyBucketService&&await this.refreshStickyBuckets(),this._ctx.remoteEval?await this._refreshForRemoteEval():(this._render(),this._updateAllAutoExperiments())}async updateAttributes(t){return this.setAttributes({...this._ctx.attributes,...t})}async setAttributeOverrides(t){this._attributeOverrides=t,this._ctx.stickyBucketService&&await this.refreshStickyBuckets(),this._ctx.remoteEval?await this._refreshForRemoteEval():(this._render(),this._updateAllAutoExperiments())}async setForcedVariations(t){this._ctx.forcedVariations=t||{},this._ctx.remoteEval?await this._refreshForRemoteEval():(this._render(),this._updateAllAutoExperiments())}setForcedFeatures(t){this._forcedFeatureValues=t,this._render()}async setURL(t){if(this._ctx.url=t,this._redirectedUrl="",this._ctx.remoteEval)return await this._refreshForRemoteEval(),void this._updateAllAutoExperiments(!0);this._updateAllAutoExperiments(!0)}getAttributes(){return{...this._ctx.attributes,...this._attributeOverrides}}getForcedVariations(){return this._ctx.forcedVariations||{}}getForcedFeatures(){return this._forcedFeatureValues||new Map}getStickyBucketAssignmentDocs(){return this._ctx.stickyBucketAssignmentDocs||{}}getUrl(){return this._ctx.url||""}getFeatures(){return this._ctx.features||{}}getExperiments(){return this._ctx.experiments||[]}subscribe(t){return this._subscriptions.add(t),()=>{this._subscriptions.delete(t)}}_canSubscribe(){return!1!==this._ctx.backgroundSync&&this._ctx.subscribeToChanges}async _refreshForRemoteEval(){this._ctx.remoteEval&&this._loadFeaturesCalled&&await this._refresh({},!1,!0).catch((()=>{}))}getAllResults(){return new Map(this._assigned)}destroy(){var t;this._subscriptions.clear(),this._assigned.clear(),this._trackedExperiments.clear(),this._trackedFeatures={},this._rtQueue=[],this._rtTimer&&clearTimeout(this._rtTimer),t=this,st.forEach((e=>e.delete(t))),It&&window._growthbook===this&&delete window._growthbook,this._activeAutoExperiments.forEach((t=>{t.undo()})),this._activeAutoExperiments.clear(),this._triggeredExpKeys.clear()}setRenderer(t){this._renderer=t}forceVariation(t,e){this._ctx.forcedVariations=this._ctx.forcedVariations||{},this._ctx.forcedVariations[t]=e,this._ctx.remoteEval?this._refreshForRemoteEval():(this._updateAllAutoExperiments(),this._render())}run(t){const e=this._run(t,null);return this._fireSubscriptions(t,e),e}triggerExperiment(t){if(this._triggeredExpKeys.add(t),!this._ctx.experiments)return null;return this._ctx.experiments.filter((e=>e.key===t)).map((t=>t.manual?this._runAutoExperiment(t):null)).filter((t=>null!==t))}_runAutoExperiment(t,e){const n=this._activeAutoExperiments.get(t);if(t.manual&&!this._triggeredExpKeys.has(t.key)&&!n)return null;const r=this.run(t),i=JSON.stringify(r.value);if(!e&&r.inExperiment&&n&&n.valueHash===i)return r;if(n&&this._undoActiveAutoExperiment(t),r.inExperiment)if(r.value.urlRedirect&&t.urlPatterns){const e=t.persistQueryString?function(t,e){let n,r;try{n=new URL(t),r=new URL(e)}catch(Dt){return console.error("Unable to merge query strings: ".concat(Dt)),e}return n.searchParams.forEach(((t,e)=>{r.searchParams.has(e)||r.searchParams.set(e,t)})),r.toString()}(this._getContextUrl(),r.value.urlRedirect):r.value.urlRedirect;if(V(e,t.urlPatterns))return this.log("Skipping redirect because original URL matches redirect URL",{id:t.key}),r;this._redirectedUrl=e;const n=this._getNavigateFunction();var o;if(n)if(It)this._setAntiFlicker(),window.setTimeout((()=>{try{n(e)}catch(Dt){console.error(Dt)}}),null!==(o=this._ctx.navigateDelay)&&void 0!==o?o:100);else try{n(e)}catch(Dt){console.error(Dt)}}else{const e=this._applyDOMChanges(r.value);e&&this._activeAutoExperiments.set(t,{undo:e,valueHash:i})}return r}_undoActiveAutoExperiment(t){const e=this._activeAutoExperiments.get(t);e&&(e.undo(),this._activeAutoExperiments.delete(t))}_isRedirectExperiment(t){return t.variations.some((t=>Object.keys(t).includes("urlRedirect")))}_updateAllAutoExperiments(t){const e=this._ctx.experiments||[],n=new Set(e);this._activeAutoExperiments.forEach(((t,e)=>{n.has(e)||(t.undo(),this._activeAutoExperiments.delete(e))}));for(const r of e){const e=this._runAutoExperiment(r,t);if(null!==e&&void 0!==e&&e.inExperiment&&this._isRedirectExperiment(r))break}}_fireSubscriptions(t,e){const n=t.key,r=this._assigned.get(n);r&&r.result.inExperiment===e.inExperiment&&r.result.variationId===e.variationId||(this._assigned.set(n,{experiment:t,result:e}),this._subscriptions.forEach((n=>{try{n(t,e)}catch(Dt){console.error(Dt)}})))}_trackFeatureUsage(t,e){if("override"===e.source)return;const n=JSON.stringify(e.value);if(this._trackedFeatures[t]!==n){if(this._trackedFeatures[t]=n,this._ctx.onFeatureUsage)try{this._ctx.onFeatureUsage(t,e)}catch(Dt){}It&&window.fetch&&(this._rtQueue.push({key:t,on:e.on}),this._rtTimer||(this._rtTimer=window.setTimeout((()=>{this._rtTimer=0;const t=[...this._rtQueue];this._rtQueue=[],this._ctx.realtimeKey&&window.fetch("https://rt.growthbook.io/?key=".concat(this._ctx.realtimeKey,"&events=").concat(encodeURIComponent(JSON.stringify(t))),{cache:"no-cache",mode:"no-cors"}).catch((()=>{}))}),this._ctx.realtimeInterval||2e3)))}}_getFeatureResult(t,e,n,r,i,o){const a={value:e,on:!!e,off:!e,source:n,ruleId:r||""};return i&&(a.experiment=i),o&&(a.experimentResult=o),this._trackFeatureUsage(t,a),a}isOn(t){return this.evalFeature(t).on}isOff(t){return this.evalFeature(t).off}getFeatureValue(t,e){const n=this.evalFeature(t).value;return null===n?e:n}feature(t){return this.evalFeature(t)}evalFeature(t){return this._evalFeature(t)}_evalFeature(t,e){if((e=e||{evaluatedFeatures:new Set}).evaluatedFeatures.has(t))return this._getFeatureResult(t,null,"cyclicPrerequisite");if(e.evaluatedFeatures.add(t),e.id=t,this._forcedFeatureValues.has(t))return this._getFeatureResult(t,this._forcedFeatureValues.get(t),"override");if(!this._ctx.features||!this._ctx.features[t])return this._getFeatureResult(t,null,"unknownFeature");const n=this._ctx.features[t];if(n.rules)t:for(const r of n.rules){if(r.parentConditions)for(const o of r.parentConditions){const n=this._evalFeature(o.id,e);if("cyclicPrerequisite"===n.source)return this._getFeatureResult(t,null,"cyclicPrerequisite");if(!X({value:n.value},o.condition||{})){if(o.gate)return this._getFeatureResult(t,null,"prerequisite");continue t}}if(r.filters&&this._isFilteredOut(r.filters))continue;if("force"in r){if(r.condition&&!this._conditionPasses(r.condition))continue;if(!this._isIncludedInRollout(r.seed||t,r.hashAttribute,this._ctx.stickyBucketService&&!r.disableStickyBucketing?r.fallbackAttribute:void 0,r.range,r.coverage,r.hashVersion))continue;return r.tracks&&r.tracks.forEach((t=>{this._track(t.experiment,t.result)})),this._getFeatureResult(t,r.force,"force",r.id)}if(!r.variations)continue;const n={variations:r.variations,key:r.key||t};"coverage"in r&&(n.coverage=r.coverage),r.weights&&(n.weights=r.weights),r.hashAttribute&&(n.hashAttribute=r.hashAttribute),r.fallbackAttribute&&(n.fallbackAttribute=r.fallbackAttribute),r.disableStickyBucketing&&(n.disableStickyBucketing=r.disableStickyBucketing),void 0!==r.bucketVersion&&(n.bucketVersion=r.bucketVersion),void 0!==r.minBucketVersion&&(n.minBucketVersion=r.minBucketVersion),r.namespace&&(n.namespace=r.namespace),r.meta&&(n.meta=r.meta),r.ranges&&(n.ranges=r.ranges),r.name&&(n.name=r.name),r.phase&&(n.phase=r.phase),r.seed&&(n.seed=r.seed),r.hashVersion&&(n.hashVersion=r.hashVersion),r.filters&&(n.filters=r.filters),r.condition&&(n.condition=r.condition);const i=this._run(n,t);if(this._fireSubscriptions(n,i),i.inExperiment&&!i.passthrough)return this._getFeatureResult(t,i.value,"experiment",r.id,n,i)}return this._getFeatureResult(t,void 0===n.defaultValue?null:n.defaultValue,"defaultValue")}_isIncludedInRollout(t,e,n,r,i,o){if(!r&&void 0===i)return!0;const{hashValue:a}=this._getHashAttribute(e,n);if(!a)return!1;const s=U(t,a,o||1);return null!==s&&(r?B(s,r):void 0===i||s<=i)}_conditionPasses(t){return X(this.getAttributes(),t)}_isFilteredOut(t){return t.some((t=>{const{hashValue:e}=this._getHashAttribute(t.attribute);if(!e)return!0;const n=U(t.seed,e,t.hashVersion||2);return null===n||!t.ranges.some((t=>B(n,t)))}))}_run(t,e){const n=t.key,r=t.variations.length;if(r<2)return this._getResult(t,-1,!1,e);if(!1===this._ctx.enabled)return this._getResult(t,-1,!1,e);if((t=this._mergeOverrides(t)).urlPatterns&&!V(this._getContextUrl(),t.urlPatterns))return this._getResult(t,-1,!1,e);const i=function(t,e,n){if(!e)return null;const r=e.split("?")[1];if(!r)return null;const i=r.replace(/#.*/,"").split("&").map((t=>t.split("=",2))).filter((e=>{let[n]=e;return n===t})).map((t=>{let[,e]=t;return parseInt(e)}));return i.length>0&&i[0]>=0&&i[0]<n?i[0]:null}(n,this._getContextUrl(),r);if(null!==i)return this._getResult(t,i,!1,e);if(this._ctx.forcedVariations&&n in this._ctx.forcedVariations){const r=this._ctx.forcedVariations[n];return this._getResult(t,r,!1,e)}if("draft"===t.status||!1===t.active)return this._getResult(t,-1,!1,e);const{hashAttribute:o,hashValue:a}=this._getHashAttribute(t.hashAttribute,this._ctx.stickyBucketService&&!t.disableStickyBucketing?t.fallbackAttribute:void 0);if(!a)return this._getResult(t,-1,!1,e);let s=-1,u=!1,c=!1;if(this._ctx.stickyBucketService&&!t.disableStickyBucketing){const{variation:e,versionIsBlocked:n}=this._getStickyBucketVariation(t.key,t.bucketVersion,t.minBucketVersion,t.meta);u=e>=0,s=e,c=!!n}if(!u){if(t.filters){if(this._isFilteredOut(t.filters))return this._getResult(t,-1,!1,e)}else if(t.namespace&&!function(t,e){const n=U("__"+e[0],t,1);return null!==n&&n>=e[1]&&n<e[2]}(a,t.namespace))return this._getResult(t,-1,!1,e);if(t.include&&!function(t){try{return t()}catch(Dt){return console.error(Dt),!1}}(t.include))return this._getResult(t,-1,!1,e);if(t.condition&&!this._conditionPasses(t.condition))return this._getResult(t,-1,!1,e);if(t.parentConditions)for(const n of t.parentConditions){const r=this._evalFeature(n.id);if("cyclicPrerequisite"===r.source)return this._getResult(t,-1,!1,e);if(!X({value:r.value},n.condition||{}))return this._getResult(t,-1,!1,e)}if(t.groups&&!this._hasGroupOverlap(t.groups))return this._getResult(t,-1,!1,e)}if(t.url&&!this._urlIsValid(t.url))return this._getResult(t,-1,!1,e);const l=U(t.seed||n,a,t.hashVersion||1);if(null===l)return this._getResult(t,-1,!1,e);if(!u){s=function(t,e){for(let n=0;n<e.length;n++)if(B(t,e[n]))return n;return-1}(l,t.ranges||H(r,void 0===t.coverage?1:t.coverage,t.weights))}if(c)return this._getResult(t,-1,!1,e,void 0,!0);if(s<0)return this._getResult(t,-1,!1,e);if("force"in t)return this._getResult(t,void 0===t.force?-1:t.force,!1,e);if(this._ctx.qaMode)return this._getResult(t,-1,!1,e);if("stopped"===t.status)return this._getResult(t,-1,!1,e);const d=this._getResult(t,s,!0,e,l,u);if(this._ctx.stickyBucketService&&!t.disableStickyBucketing){const{changed:e,key:n,doc:r}=this._generateStickyBucketAssignmentDoc(o,W(a),{[this._getStickyBucketExperimentKey(t.key,t.bucketVersion)]:d.key});e&&(this._ctx.stickyBucketAssignmentDocs=this._ctx.stickyBucketAssignmentDocs||{},this._ctx.stickyBucketAssignmentDocs[n]=r,this._ctx.stickyBucketService.saveAssignments(r))}return this._track(t,d),d}log(t,e){this.debug&&(this._ctx.log?this._ctx.log(t,e):console.log(t,e))}getDeferredTrackingCalls(){return this._deferredTrackingCalls}setDeferredTrackingCalls(t){this._deferredTrackingCalls=t}fireDeferredTrackingCalls(){let t=!1;if(this._deferredTrackingCalls.forEach((e=>{e&&e.experiment&&e.result?this._track(e.experiment,e.result):(console.error("Invalid deferred tracking call",{call:e}),t=!0)})),this._deferredTrackingCalls=[],t)throw new Error("Invalid tracking data")}setTrackingCallback(t){this._ctx.trackingCallback=t;try{this.fireDeferredTrackingCalls()}catch(Dt){console.error(Dt)}}_track(t,e){if(!this._ctx.trackingCallback)return void this._deferredTrackingCalls.push({experiment:t,result:e});const n=t.key,r=e.hashAttribute+e.hashValue+n+e.variationId;if(!this._trackedExperiments.has(r)){this._trackedExperiments.add(r);try{this._ctx.trackingCallback(t,e)}catch(Dt){console.error(Dt)}}}_mergeOverrides(t){const e=t.key,n=this._ctx.overrides;return n&&n[e]&&"string"===typeof(t=Object.assign({},t,n[e])).url&&(t.url=z(t.url)),t}_getHashAttribute(t,e){let n=t||"id",r="";return this._attributeOverrides[n]?r=this._attributeOverrides[n]:this._ctx.attributes?r=this._ctx.attributes[n]||"":this._ctx.user&&(r=this._ctx.user[n]||""),!r&&e&&(this._attributeOverrides[e]?r=this._attributeOverrides[e]:this._ctx.attributes?r=this._ctx.attributes[e]||"":this._ctx.user&&(r=this._ctx.user[e]||""),r&&(n=e)),{hashAttribute:n,hashValue:r}}_getResult(t,e,n,r,i,o){let a=!0;(e<0||e>=t.variations.length)&&(e=0,a=!1);const{hashAttribute:s,hashValue:u}=this._getHashAttribute(t.hashAttribute,this._ctx.stickyBucketService&&!t.disableStickyBucketing?t.fallbackAttribute:void 0),c=t.meta?t.meta[e]:{},l={key:c.key||""+e,featureId:r,inExperiment:a,hashUsed:n,variationId:e,value:t.variations[e],hashAttribute:s,hashValue:u,stickyBucketUsed:!!o};return c.name&&(l.name=c.name),void 0!==i&&(l.bucket=i),c.passthrough&&(l.passthrough=c.passthrough),l}_getContextUrl(){return this._ctx.url||(It?window.location.href:"")}_urlIsValid(t){const e=this._getContextUrl();if(!e)return!1;const n=e.replace(/^https?:\/\//,"").replace(/^[^/]*\//,"/");return!!t.test(e)||!!t.test(n)}_hasGroupOverlap(t){const e=this._ctx.groups||{};for(let n=0;n<t.length;n++)if(e[t[n]])return!0;return!1}getRedirectUrl(){return this._redirectedUrl}_getNavigateFunction(){return this._ctx.navigate?this._ctx.navigate:It?t=>{window.location.replace(t)}:null}_setAntiFlicker(){if(this._ctx.antiFlicker&&It)try{var t;const e=document.createElement("style");e.innerHTML=".gb-anti-flicker { opacity: 0 !important; pointer-events: none; }",document.head.appendChild(e),document.documentElement.classList.add("gb-anti-flicker"),setTimeout((()=>{document.documentElement.classList.remove("gb-anti-flicker")}),null!==(t=this._ctx.antiFlickerTimeout)&&void 0!==t?t:3500)}catch(Dt){console.error(Dt)}}_applyDOMChanges(t){if(!It)return;const e=[];if(t.css){const n=document.createElement("style");n.innerHTML=t.css,document.head.appendChild(n),e.push((()=>n.remove()))}if(t.js){const n=document.createElement("script");n.innerHTML=t.js,document.head.appendChild(n),e.push((()=>n.remove()))}return t.domMutations&&t.domMutations.forEach((t=>{e.push(j.declarative(t).revert)})),()=>{e.forEach((t=>t()))}}_deriveStickyBucketIdentifierAttributes(t){const e=new Set,n=t&&t.features?t.features:this.getFeatures(),r=t&&t.experiments?t.experiments:this.getExperiments();return Object.keys(n).forEach((t=>{const r=n[t];if(r.rules)for(const n of r.rules)n.variations&&(e.add(n.hashAttribute||"id"),n.fallbackAttribute&&e.add(n.fallbackAttribute))})),r.map((t=>{e.add(t.hashAttribute||"id"),t.fallbackAttribute&&e.add(t.fallbackAttribute)})),Array.from(e)}async refreshStickyBuckets(t){if(this._ctx.stickyBucketService){const e=this._getStickyBucketAttributes(t);this._ctx.stickyBucketAssignmentDocs=await this._ctx.stickyBucketService.getAllAssignments(e)}}_getStickyBucketAssignments(){const t={};return Object.values(this._ctx.stickyBucketAssignmentDocs||{}).forEach((e=>{e.assignments&&Object.assign(t,e.assignments)})),t}_getStickyBucketVariation(t,e,n,r){e=e||0,n=n||0,r=r||[];const i=this._getStickyBucketExperimentKey(t,e),o=this._getStickyBucketAssignments();if(n>0)for(let u=0;u<=n;u++){if(void 0!==o[this._getStickyBucketExperimentKey(t,u)])return{variation:-1,versionIsBlocked:!0}}const a=o[i];if(void 0===a)return{variation:-1};const s=r.findIndex((t=>t.key===a));return s<0?{variation:-1}:{variation:s}}_getStickyBucketExperimentKey(t,e){return e=e||0,"".concat(t,"__").concat(e)}_getStickyBucketAttributes(t){const e={};return this._ctx.stickyBucketIdentifierAttributes=this._ctx.stickyBucketIdentifierAttributes?this._ctx.stickyBucketIdentifierAttributes:this._deriveStickyBucketIdentifierAttributes(t),this._ctx.stickyBucketIdentifierAttributes.forEach((t=>{const{hashValue:n}=this._getHashAttribute(t);e[t]=W(n)})),e}_generateStickyBucketAssignmentDoc(t,e,n){const r="".concat(t,"||").concat(e),i=this._ctx.stickyBucketAssignmentDocs&&this._ctx.stickyBucketAssignmentDocs[r]&&this._ctx.stickyBucketAssignmentDocs[r].assignments||{},o={...i,...n};return{key:r,doc:{attributeName:t,attributeValue:e,assignments:o},changed:JSON.stringify(i)!==JSON.stringify(o)}}}var Tt=n(11720);const At=Tt.createContext({});function Rt(t){const e=Nt();return!!e&&e.isOn(t)}function Mt(t,e){const n=Nt();return n?n.getFeatureValue(t,e):e}function Nt(){const{growthbook:t}=Tt.useContext(At);return t}const Lt=({children:t,growthbook:e})=>{const[n,r]=Tt.useState(0);return Tt.useEffect((()=>{if(e&&e.setRenderer)return e.setRenderer((()=>{r((t=>t+1))})),()=>{e.setRenderer((()=>{}))}}),[e]),Tt.createElement(At.Provider,{value:{growthbook:e}},t)}},4591:function(t,e,n){"use strict";function r(t,e){return new Promise((function(n,r){var i=setTimeout((function(){r(Error("Promise timed out"))}),e);t.then((function(t){return clearTimeout(i),n(t)})).catch(r)}))}function i(t,e,n){var i;return(i=n,new Promise((function(t){return setTimeout(t,i)}))).then((function(){return r(function(){try{return Promise.resolve(e(t))}catch(n){return Promise.reject(n)}}(),1e3)})).catch((function(e){null===t||void 0===t||t.log("warn","Callback Error",{error:e}),null===t||void 0===t||t.stats.increment("callback_error")})).then((function(){return t}))}n.d(e,{FJ:function(){return r},UI:function(){return i}})},98191:function(t,e,n){"use strict";n.d(e,{Y:function(){return u},_:function(){return c}});var r=n(59108),i=n(96475),o=n(70655),a=function(){function t(){this._logs=[]}return t.prototype.log=function(t,e,n){var r=new Date;this._logs.push({level:t,message:e,time:r,extras:n})},Object.defineProperty(t.prototype,"logs",{get:function(){return this._logs},enumerable:!1,configurable:!0}),t.prototype.flush=function(){if(this.logs.length>1){var t=this._logs.reduce((function(t,e){var n,r,i,a=(0,o.pi)((0,o.pi)({},e),{json:JSON.stringify(e.extras,null," "),extras:e.extras});delete a.time;var s=null!==(i=null===(r=e.time)||void 0===r?void 0:r.toISOString())&&void 0!==i?i:"";return t[s]&&(s="".concat(s,"-").concat(Math.random())),(0,o.pi)((0,o.pi)({},t),((n={})[s]=a,n))}),{});console.table?console.table(t):console.log(t)}else this.logs.forEach((function(t){var e=t.level,n=t.message,r=t.extras;"info"===e||"debug"===e?console.log(n,null!==r&&void 0!==r?r:""):console[e](n,null!==r&&void 0!==r?r:"")}));this._logs=[]},t}(),s=n(50732),u=function(t){var e,n,r;this.retry=null===(e=t.retry)||void 0===e||e,this.type=null!==(n=t.type)&&void 0!==n?n:"plugin Error",this.reason=null!==(r=t.reason)&&void 0!==r?r:""},c=function(){function t(t,e,n,i){void 0===e&&(e=(0,r.v4)()),void 0===n&&(n=new s.i),void 0===i&&(i=new a),this.attempts=0,this.event=t,this._id=e,this.logger=i,this.stats=n}return t.system=function(){},t.prototype.isSame=function(t){return t.id===this.id},t.prototype.cancel=function(t){if(t)throw t;throw new u({reason:"Context Cancel"})},t.prototype.log=function(t,e,n){this.logger.log(t,e,n)},Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),t.prototype.updateEvent=function(t,e){var n;if("integrations"===t.split(".")[0]){var r=t.split(".")[1];if(!1===(null===(n=this.event.integrations)||void 0===n?void 0:n[r]))return this.event}return(0,i.N)(this.event,t,e),this.event},t.prototype.failedDelivery=function(){return this._failedDelivery},t.prototype.setFailedDelivery=function(t){this._failedDelivery=t},t.prototype.logs=function(){return this.logger.logs},t.prototype.flush=function(){this.logger.flush(),this.stats.flush()},t.prototype.toJSON=function(){return{id:this._id,event:this.event,logs:this.logger.logs,metrics:this.stats.metrics}},t}()},51181:function(t,e,n){"use strict";n.d(e,{M:function(){return o},Z:function(){return a}});var r=n(70655),i=n(38714);var o="onRemoveFromFuture",a=function(t){function e(e,n,r){var i=t.call(this)||this;return i.future=[],i.maxAttempts=e,i.queue=n,i.seen=null!==r&&void 0!==r?r:{},i}return(0,r.ZT)(e,t),e.prototype.push=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.map((function(e){return!(t.updateAttempts(e)>t.maxAttempts||t.includes(e))&&(t.queue.push(e),!0)}));return this.queue=this.queue.sort((function(e,n){return t.getAttempts(e)-t.getAttempts(n)})),r},e.prototype.pushWithBackoff=function(t){var e=this;if(0===this.getAttempts(t))return this.push(t)[0];var n=this.updateAttempts(t);if(n>this.maxAttempts||this.includes(t))return!1;var r=function(t){var e=Math.random()+1,n=t.minTimeout,r=void 0===n?500:n,i=t.factor,o=void 0===i?2:i,a=t.attempt,s=t.maxTimeout,u=void 0===s?1/0:s;return Math.min(e*r*Math.pow(o,a),u)}({attempt:n-1});return setTimeout((function(){e.queue.push(t),e.future=e.future.filter((function(e){return e.id!==t.id})),e.emit(o)}),r),this.future.push(t),!0},e.prototype.getAttempts=function(t){var e;return null!==(e=this.seen[t.id])&&void 0!==e?e:0},e.prototype.updateAttempts=function(t){return this.seen[t.id]=this.getAttempts(t)+1,this.getAttempts(t)},e.prototype.includes=function(t){return this.queue.includes(t)||this.future.includes(t)||Boolean(this.queue.find((function(e){return e.id===t.id})))||Boolean(this.future.find((function(e){return e.id===t.id})))},e.prototype.pop=function(){return this.queue.shift()},Object.defineProperty(e.prototype,"length",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"todo",{get:function(){return this.queue.length+this.future.length},enumerable:!1,configurable:!0}),e}(i.Q)},69147:function(t,e,n){"use strict";n.d(e,{a:function(){return o},z:function(){return a}});var r=n(70655),i=n(98191);function o(t,e){t.log("debug","plugin",{plugin:e.name});var n=(new Date).getTime(),o=e[t.event.type];return void 0===o?Promise.resolve(t):function(t){return(0,r.mG)(this,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,t()];case 1:return[2,n.sent()];case 2:return e=n.sent(),[2,Promise.reject(e)];case 3:return[2]}}))}))}((function(){return o.apply(e,[t])})).then((function(t){var r=(new Date).getTime()-n;return t.stats.gauge("plugin_time",r,["plugin:".concat(e.name)]),t})).catch((function(n){if(n instanceof i.Y&&"middleware_cancellation"===n.type)throw n;return n instanceof i.Y?(t.log("warn",n.type,{plugin:e.name,error:n}),n):(t.log("error","plugin Error",{plugin:e.name,error:n}),t.stats.increment("plugin_error",1,["plugin:".concat(e.name)]),n)}))}function a(t,e){return o(t,e).then((function(e){if(e instanceof i._)return e;t.log("debug","Context canceled"),t.stats.increment("context_canceled"),t.cancel(e)}))}},50732:function(t,e,n){"use strict";n.d(e,{s:function(){return i},i:function(){return o}});var r=n(70655),i=function(){function t(){this.metrics=[]}return t.prototype.increment=function(t,e,n){void 0===e&&(e=1),this.metrics.push({metric:t,value:e,tags:null!==n&&void 0!==n?n:[],type:"counter",timestamp:Date.now()})},t.prototype.gauge=function(t,e,n){this.metrics.push({metric:t,value:e,tags:null!==n&&void 0!==n?n:[],type:"gauge",timestamp:Date.now()})},t.prototype.flush=function(){var t=this.metrics.map((function(t){return(0,r.pi)((0,r.pi)({},t),{tags:t.tags.join(",")})}));console.table?console.table(t):console.log(t),this.metrics=[]},t.prototype.serialize=function(){return this.metrics.map((function(t){return{m:t.metric,v:t.value,t:t.tags,k:(e=t.type,{gauge:"g",counter:"c"}[e]),e:t.timestamp};var e}))},t}(),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.prototype.gauge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.increment=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.flush=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.serialize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return[]},e}(i)},55469:function(t,e,n){"use strict";function r(t){return"string"===typeof t}function i(t){return"number"===typeof t}function o(t){return"function"===typeof t}function a(t){return void 0!==t&&null!==t}function s(t){return"object"===Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}n.d(e,{HD:function(){return r},hj:function(){return i},mf:function(){return o},Gg:function(){return a},PO:function(){return s}})},15987:function(t,e,n){"use strict";n.d(e,{d:function(){return r}});var r=function(){var t,e,n=!1,r=new Promise((function(r,i){t=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n=!0,r.apply(void 0,t)},e=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n=!0,i.apply(void 0,t)}}));return{resolve:t,reject:e,promise:r,isSettled:function(){return n}}}},38714:function(t,e,n){"use strict";n.d(e,{Q:function(){return r}});var r=function(){function t(t){var e;this.callbacks={},this.warned=!1,this.maxListeners=null!==(e=null===t||void 0===t?void 0:t.maxListeners)&&void 0!==e?e:10}return t.prototype.warnIfPossibleMemoryLeak=function(t){this.warned||this.maxListeners&&this.callbacks[t].length>this.maxListeners&&(console.warn("Event Emitter: Possible memory leak detected; ".concat(String(t)," has exceeded ").concat(this.maxListeners," listeners.")),this.warned=!0)},t.prototype.on=function(t,e){return this.callbacks[t]?(this.callbacks[t].push(e),this.warnIfPossibleMemoryLeak(t)):this.callbacks[t]=[e],this},t.prototype.once=function(t,e){var n=this,r=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];n.off(t,r),e.apply(n,i)};return this.on(t,r),this},t.prototype.off=function(t,e){var n,r=(null!==(n=this.callbacks[t])&&void 0!==n?n:[]).filter((function(t){return t!==e}));return this.callbacks[t]=r,this},t.prototype.emit=function(t){for(var e,n=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=null!==(e=this.callbacks[t])&&void 0!==e?e:[];return o.forEach((function(t){t.apply(n,r)})),this},t}()},65904:function(t,e,n){"use strict";n.d(e,{G:function(){return i},s:function(){return o}});var r=n(69699);function i(){return!(0,r.j)()||window.navigator.onLine}function o(){return!i()}},36514:function(t,e,n){"use strict";n.d(e,{U:function(){return r}});var r="api.segment.io/v1"},29784:function(t,e,n){"use strict";n.d(e,{_:function(){return a}});var r=n(70655),i=n(98191),o=n(42718),a=function(t){function e(e,n){return t.call(this,e,n,new o.j)||this}return(0,r.ZT)(e,t),e.system=function(){return new this({type:"track",event:"system"})},e}(i._)},69699:function(t,e,n){"use strict";function r(){return"undefined"!==typeof window}function i(){return!r()}n.d(e,{j:function(){return r},s:function(){return i}})},67475:function(t,e,n){"use strict";function r(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}}n.d(e,{a:function(){return r}})},42718:function(t,e,n){"use strict";n.d(e,{j:function(){return f}});var r=n(70655),i=n(50732),o=n(55609),a=n(39821),s=n(7227),u=n(36514);function c(t){console.error("Error sending segment performance metrics",t)}var l,d=function(){function t(t){var e,n,r,i,o,a=this;if(this.host=null!==(e=null===t||void 0===t?void 0:t.host)&&void 0!==e?e:u.U,this.sampleRate=null!==(n=null===t||void 0===t?void 0:t.sampleRate)&&void 0!==n?n:1,this.flushTimer=null!==(r=null===t||void 0===t?void 0:t.flushTimer)&&void 0!==r?r:3e4,this.maxQueueSize=null!==(i=null===t||void 0===t?void 0:t.maxQueueSize)&&void 0!==i?i:20,this.protocol=null!==(o=null===t||void 0===t?void 0:t.protocol)&&void 0!==o?o:"https",this.queue=[],this.sampleRate>0){var s=!1,l=function(){s||(s=!0,a.flush().catch(c),s=!1,setTimeout(l,a.flushTimer))};l()}}return t.prototype.increment=function(t,e){if(t.includes("analytics_js.")&&0!==e.length&&!(Math.random()>this.sampleRate)&&!(this.queue.length>=this.maxQueueSize)){var n=function(t,e,n){var i=e.reduce((function(t,e){var n=e.split(":"),r=n[0],i=n[1];return t[r]=i,t}),{});return{type:"Counter",metric:t,value:1,tags:(0,r.pi)((0,r.pi)({},i),{library:"analytics.js",library_version:"web"===n?"next-".concat(a.i):"npm:next-".concat(a.i)})}}(t,e,(0,s.B)());this.queue.push(n),t.includes("error")&&this.flush().catch(c)}},t.prototype.flush=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t=this;return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return this.queue.length<=0?[2]:[4,this.send().catch((function(e){c(e),t.sampleRate=0}))];case 1:return e.sent(),[2]}}))}))},t.prototype.send=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t,e,n;return(0,r.Jh)(this,(function(r){return t={series:this.queue},this.queue=[],e={"Content-Type":"text/plain"},n="".concat(this.protocol,"://").concat(this.host,"/m"),[2,(0,o.h)(n,{headers:e,body:JSON.stringify(t),method:"POST"})]}))}))},t}(),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.initRemoteMetrics=function(t){l=new d(t)},e.prototype.increment=function(e,n,r){t.prototype.increment.call(this,e,n,r),null===l||void 0===l||l.increment(e,null!==r&&void 0!==r?r:[])},e}(i.s)},92311:function(t,e,n){"use strict";function r(t,e){var n=e.methodName,r=e.integrationName,i=e.type,o=e.didError,a=void 0!==o&&o;t.stats.increment("analytics_js.integration.invoke".concat(a?".error":""),1,["method:".concat(n),"integration_name:".concat(r),"type:".concat(i)])}n.d(e,{z:function(){return r}})},39821:function(t,e,n){"use strict";n.d(e,{i:function(){return r}});var r="1.70.0"},55609:function(t,e,n){"use strict";n.d(e,{h:function(){return a}});var r=n(63144),i=n.n(r),o=n(44083),a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=(0,o.R)();return(n&&n.fetch||i()).apply(void 0,t)}},44083:function(t,e,n){"use strict";n.d(e,{R:function(){return r}});var r=function(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:null}},74939:function(t,e,n){"use strict";n.d(e,{wI:function(){return i},jV:function(){return o},ql:function(){return a}});var r="analytics";function i(){return window[r]}function o(t){r=t}function a(t){window[r]=t}},66548:function(t,e,n){"use strict";function r(t){return Array.prototype.slice.call(window.document.querySelectorAll("script")).find((function(e){return e.src===t}))}function i(t,e){var n=r(t);if(void 0!==n){var i=null===n||void 0===n?void 0:n.getAttribute("status");if("loaded"===i)return Promise.resolve(n);if("loading"===i)return new Promise((function(t,e){n.addEventListener("load",(function(){return t(n)})),n.addEventListener("error",(function(t){return e(t)}))}))}return new Promise((function(n,r){var i,o=window.document.createElement("script");o.type="text/javascript",o.src=t,o.async=!0,o.setAttribute("status","loading");for(var a=0,s=Object.entries(null!==e&&void 0!==e?e:{});a<s.length;a++){var u=s[a],c=u[0],l=u[1];o.setAttribute(c,l)}o.onload=function(){o.onerror=o.onload=null,o.setAttribute("status","loaded"),n(o)},o.onerror=function(){o.onerror=o.onload=null,o.setAttribute("status","error"),r(new Error("Failed to load ".concat(t)))};var d=window.document.getElementsByTagName("script")[0];null===(i=d.parentElement)||void 0===i||i.insertBefore(o,d)}))}function o(t){var e=r(t);return void 0!==e&&e.remove(),Promise.resolve()}n.d(e,{v:function(){return i},t:function(){return o}})},913:function(t,e,n){"use strict";n.d(e,{o:function(){return i}});var r=n(70655);function i(t,e){var n,i=Object.entries(null!==(n=e.integrations)&&void 0!==n?n:{}).reduce((function(t,e){var n,i,o=e[0],a=e[1];return"object"===typeof a?(0,r.pi)((0,r.pi)({},t),((n={})[o]=a,n)):(0,r.pi)((0,r.pi)({},t),((i={})[o]={},i))}),{});return Object.entries(t.integrations).reduce((function(t,e){var n,o=e[0],a=e[1];return(0,r.pi)((0,r.pi)({},t),((n={})[o]=(0,r.pi)((0,r.pi)({},a),i[o]),n))}),{})}},56749:function(t,e,n){"use strict";n.d(e,{x:function(){return i}});var r=n(70655),i=function(t,e){return(0,r.mG)(void 0,void 0,void 0,(function(){var n;return(0,r.Jh)(this,(function(i){return n=function(i){return(0,r.mG)(void 0,void 0,void 0,(function(){var o;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return t(i)?(o=n,[4,e()]):[3,2];case 1:return[2,o.apply(void 0,[r.sent()])];case 2:return[2]}}))}))},[2,n(void 0)]}))}))}},99382:function(t,e,n){"use strict";n.d(e,{UH:function(){return a},Vl:function(){return s},Kg:function(){return u}});var r,i=n(74939),o=/(https:\/\/.*)\/analytics\.js\/v1\/(?:.*?)\/(?:platform|analytics.*)?/,a=function(t){var e=(0,i.wI)();e&&(e._cdn=t),r=t},s=function(){var t=function(){var t;return null!==r&&void 0!==r?r:null===(t=(0,i.wI)())||void 0===t?void 0:t._cdn}();if(t)return t;var e=function(){var t;return Array.prototype.slice.call(document.querySelectorAll("script")).forEach((function(e){var n,r=null!==(n=e.getAttribute("src"))&&void 0!==n?n:"",i=o.exec(r);i&&i[1]&&(t=i[1])})),t}();return e||"https://cdn.segment.com"},u=function(){var t=s();return"".concat(t,"/next-integrations")}},65976:function(t,e,n){"use strict";n.d(e,{$:function(){return f}});var r=n(70655),i=n(51181),o=n(29784),a=n(69699),s={getItem:function(){},setItem:function(){},removeItem:function(){}};try{s=(0,a.j)()&&window.localStorage?window.localStorage:s}catch(p){console.warn("Unable to access localStorage",p)}function u(t){var e=s.getItem(t);return(e?JSON.parse(e):[]).map((function(t){return new o._(t.event,t.id)}))}function c(t){var e=s.getItem(t);return e?JSON.parse(e):{}}function l(t){s.removeItem(t)}function d(t,e,n){void 0===n&&(n=0);var r="persisted-queue:v1:".concat(t,":lock"),i=s.getItem(r),o=i?JSON.parse(i):null,a=null===o||function(t){return(new Date).getTime()>t}(o);if(a)return s.setItem(r,JSON.stringify((new Date).getTime()+50)),e(),void s.removeItem(r);!a&&n<3?setTimeout((function(){d(t,e,n+1)}),50):console.error("Unable to retrieve lock")}var f=function(t){function e(e,n){var i=t.call(this,e,[])||this,o="persisted-queue:v1:".concat(n,":items"),a="persisted-queue:v1:".concat(n,":seen"),f=[],h={};return d(n,(function(){try{f=u(o),h=c(a),l(o),l(a),i.queue=(0,r.ev)((0,r.ev)([],f,!0),i.queue,!0),i.seen=(0,r.pi)((0,r.pi)({},h),i.seen)}catch(p){console.error(p)}})),window.addEventListener("pagehide",(function(){if(i.todo>0){var t=(0,r.ev)((0,r.ev)([],i.queue,!0),i.future,!0);try{d(n,(function(){!function(t,e){var n=u(t),i=(0,r.ev)((0,r.ev)([],e,!0),n,!0).reduce((function(t,e){var n;return(0,r.pi)((0,r.pi)({},t),((n={})[e.id]=e,n))}),{});s.setItem(t,JSON.stringify(Object.values(i)))}(o,t),function(t,e){var n=c(t);s.setItem(t,JSON.stringify((0,r.pi)((0,r.pi)({},n),e)))}(a,i.seen)}))}catch(p){console.error(p)}}})),i}return(0,r.ZT)(e,t),e}(i.Z)},23888:function(t,e,n){"use strict";n.d(e,{D:function(){return i}});var r=n(49969);function i(t,e){var n=new r.Facade(t,e);return"track"===t.type&&(n=new r.Track(t,e)),"identify"===t.type&&(n=new r.Identify(t,e)),"page"===t.type&&(n=new r.Page(t,e)),"alias"===t.type&&(n=new r.Alias(t,e)),"group"===t.type&&(n=new r.Group(t,e)),"screen"===t.type&&(n=new r.Screen(t,e)),Object.defineProperty(n,"obj",{value:t,writable:!0}),n}},7227:function(t,e,n){"use strict";n.d(e,{B:function(){return i}});var r="npm";function i(){return r}},66170:function(t,e,n){"use strict";n.r(e),n.d(e,{applyDestinationMiddleware:function(){return a},sourceMiddlewarePlugin:function(){return s}});var r=n(70655),i=n(98191),o=n(23888);function a(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){function i(e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,a,s;return(0,r.Jh)(this,(function(u){switch(u.label){case 0:return i=!1,a=null,[4,n({payload:(0,o.D)(e,{clone:!0,traverse:!1}),integration:t,next:function(t){i=!0,null===t&&(a=null),t&&(a=t.obj)}})];case 1:return u.sent(),i||null===a||((a=a).integrations=(0,r.pi)((0,r.pi)({},e.integrations),((s={})[t]=!1,s))),[2,a]}}))}))}var a,s,u,c,l;return(0,r.Jh)(this,(function(t){switch(t.label){case 0:a=(0,o.D)(e,{clone:!0,traverse:!1}).rawEvent(),s=0,u=n,t.label=1;case 1:return s<u.length?(c=u[s],[4,i(a,c)]):[3,4];case 2:if(null===(l=t.sent()))return[2,null];a=l,t.label=3;case 3:return s++,[3,1];case 4:return[2,a]}}))}))}function s(t,e){function n(n){return(0,r.mG)(this,void 0,void 0,(function(){var a;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return a=!1,[4,t({payload:(0,o.D)(n.event,{clone:!0,traverse:!1}),integrations:null!==e&&void 0!==e?e:{},next:function(t){a=!0,t&&(n.event=t.obj)}})];case 1:if(r.sent(),!a)throw new i.Y({retry:!1,type:"middleware_cancellation",reason:"Middleware `next` function skipped"});return[2,n]}}))}))}return{name:"Source Middleware ".concat(t.name),type:"before",version:"0.1.0",isLoaded:function(){return!0},load:function(t){return Promise.resolve(t)},track:n,page:n,identify:n,alias:n,group:n}}},16025:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(53410));function o(t,e){return function(){var n=this.traits(),r=this.properties?this.properties():{};return i.default(n,"address."+t)||i.default(n,t)||(e?i.default(n,"address."+e):null)||(e?i.default(n,e):null)||i.default(r,"address."+t)||i.default(r,t)||(e?i.default(r,"address."+e):null)||(e?i.default(r,e):null)}}e.default=function(t){t.zip=o("postalCode","zip"),t.country=o("country"),t.street=o("street"),t.state=o("state"),t.city=o("city"),t.region=o("region")}},36576:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Alias=void 0;var i=r(n(35717)),o=n(40747);function a(t,e){o.Facade.call(this,t,e)}e.Alias=a,i.default(a,o.Facade),a.prototype.action=function(){return"alias"},a.prototype.type=a.prototype.action,a.prototype.previousId=function(){return this.field("previousId")||this.field("from")},a.prototype.from=a.prototype.previousId,a.prototype.userId=function(){return this.field("userId")||this.field("to")},a.prototype.to=a.prototype.userId},83948:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.clone=void 0,e.clone=function t(e){if("[object Object]"===Object.prototype.toString.call(e)){var n={};for(var r in e)n[r]=t(e[r]);return n}return Array.isArray(e)?e.map(t):e}},85655:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Delete=void 0;var i=r(n(35717)),o=n(40747);function a(t,e){o.Facade.call(this,t,e)}e.Delete=a,i.default(a,o.Facade),a.prototype.type=function(){return"delete"}},40747:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Facade=void 0;var i=r(n(16025)),o=n(83948),a=r(n(2530)),s=r(n(18013)),u=r(n(53410)),c=r(n(28595));function l(t,e){e=e||{},this.raw=o.clone(t),"clone"in e||(e.clone=!0),e.clone&&(t=o.clone(t)),"traverse"in e||(e.traverse=!0),t.timestamp="timestamp"in t?s.default(t.timestamp):new Date,e.traverse&&c.default(t),this.opts=e,this.obj=t}e.Facade=l;var d=l.prototype;function f(t){return o.clone(t)}d.proxy=function(t){var e=t.split("."),n=this[t=e.shift()]||this.field(t);return n?("function"===typeof n&&(n=n.call(this)||{}),0===e.length||(n=u.default(n,e.join("."))),this.opts.clone?f(n):n):n},d.field=function(t){var e=this.obj[t];return this.opts.clone?f(e):e},l.proxy=function(t){return function(){return this.proxy(t)}},l.field=function(t){return function(){return this.field(t)}},l.multi=function(t){return function(){var e=this.proxy(t+"s");if(Array.isArray(e))return e;var n=this.proxy(t);return n&&(n=[this.opts.clone?o.clone(n):n]),n||[]}},l.one=function(t){return function(){var e=this.proxy(t);if(e)return e;var n=this.proxy(t+"s");return Array.isArray(n)?n[0]:void 0}},d.json=function(){var t=this.opts.clone?o.clone(this.obj):this.obj;return this.type&&(t.type=this.type()),t},d.rawEvent=function(){return this.raw},d.options=function(t){var e=this.obj.options||this.obj.context||{},n=this.opts.clone?o.clone(e):e;if(!t)return n;if(this.enabled(t)){var r=this.integrations(),i=r[t]||u.default(r,t);return"object"!==typeof i&&(i=u.default(this.options(),t)),"object"===typeof i?i:{}}},d.context=d.options,d.enabled=function(t){var e=this.proxy("options.providers.all");"boolean"!==typeof e&&(e=this.proxy("options.all")),"boolean"!==typeof e&&(e=this.proxy("integrations.all")),"boolean"!==typeof e&&(e=!0);var n=e&&a.default(t),r=this.integrations();if(r.providers&&r.providers.hasOwnProperty(t)&&(n=r.providers[t]),r.hasOwnProperty(t)){var i=r[t];n="boolean"!==typeof i||i}return!!n},d.integrations=function(){return this.obj.integrations||this.proxy("options.providers")||this.options()},d.active=function(){var t=this.proxy("options.active");return null!==t&&void 0!==t||(t=!0),t},d.anonymousId=function(){return this.field("anonymousId")||this.field("sessionId")},d.sessionId=d.anonymousId,d.groupId=l.proxy("options.groupId"),d.traits=function(t){var e=this.proxy("options.traits")||{},n=this.userId();for(var r in t=t||{},n&&(e.id=n),t){var i=null==this[r]?this.proxy("options.traits."+r):this[r]();null!=i&&(e[t[r]]=i,delete e[r])}return e},d.library=function(){var t=this.proxy("options.library");return t?"string"===typeof t?{name:t,version:null}:t:{name:"unknown",version:null}},d.device=function(){var t=this.proxy("context.device");"object"===typeof t&&null!==t||(t={});var e=this.library().name;return t.type||(e.indexOf("ios")>-1&&(t.type="ios"),e.indexOf("android")>-1&&(t.type="android")),t},d.userAgent=l.proxy("context.userAgent"),d.timezone=l.proxy("context.timezone"),d.timestamp=l.field("timestamp"),d.channel=l.field("channel"),d.ip=l.proxy("context.ip"),d.userId=l.field("userId"),i.default(d)},63789:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Group=void 0;var i=r(n(35717)),o=r(n(66243)),a=r(n(18013)),s=n(40747);function u(t,e){s.Facade.call(this,t,e)}e.Group=u,i.default(u,s.Facade);var c=u.prototype;c.action=function(){return"group"},c.type=c.action,c.groupId=s.Facade.field("groupId"),c.created=function(){var t=this.proxy("traits.createdAt")||this.proxy("traits.created")||this.proxy("properties.createdAt")||this.proxy("properties.created");if(t)return a.default(t)},c.email=function(){var t=this.proxy("traits.email");if(t)return t;var e=this.groupId();return o.default(e)?e:void 0},c.traits=function(t){var e=this.properties(),n=this.groupId();for(var r in t=t||{},n&&(e.id=n),t){var i=null==this[r]?this.proxy("traits."+r):this[r]();null!=i&&(e[t[r]]=i,delete e[r])}return e},c.name=s.Facade.proxy("traits.name"),c.industry=s.Facade.proxy("traits.industry"),c.employees=s.Facade.proxy("traits.employees"),c.properties=function(){return this.field("traits")||this.field("properties")||{}}},98649:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Identify=void 0;var i=n(40747),o=r(n(53410)),a=r(n(35717)),s=r(n(66243)),u=r(n(18013)),c=function(t){return t.trim()};function l(t,e){i.Facade.call(this,t,e)}e.Identify=l,a.default(l,i.Facade);var d=l.prototype;d.action=function(){return"identify"},d.type=d.action,d.traits=function(t){var e=this.field("traits")||{},n=this.userId();for(var r in t=t||{},n&&(e.id=n),t){var i=null==this[r]?this.proxy("traits."+r):this[r]();null!=i&&(e[t[r]]=i,r!==t[r]&&delete e[r])}return e},d.email=function(){var t=this.proxy("traits.email");if(t)return t;var e=this.userId();return s.default(e)?e:void 0},d.created=function(){var t=this.proxy("traits.created")||this.proxy("traits.createdAt");if(t)return u.default(t)},d.companyCreated=function(){var t=this.proxy("traits.company.created")||this.proxy("traits.company.createdAt");if(t)return u.default(t)},d.companyName=function(){return this.proxy("traits.company.name")},d.name=function(){var t=this.proxy("traits.name");if("string"===typeof t)return c(t);var e=this.firstName(),n=this.lastName();return e&&n?c(e+" "+n):void 0},d.firstName=function(){var t=this.proxy("traits.firstName");if("string"===typeof t)return c(t);var e=this.proxy("traits.name");return"string"===typeof e?c(e).split(" ")[0]:void 0},d.lastName=function(){var t=this.proxy("traits.lastName");if("string"===typeof t)return c(t);var e=this.proxy("traits.name");if("string"===typeof e){var n=c(e).indexOf(" ");if(-1!==n)return c(e.substr(n+1))}},d.uid=function(){return this.userId()||this.username()||this.email()},d.description=function(){return this.proxy("traits.description")||this.proxy("traits.background")},d.age=function(){var t=this.birthday(),e=o.default(this.traits(),"age");return null!=e?e:t instanceof Date?(new Date).getFullYear()-t.getFullYear():void 0},d.avatar=function(){var t=this.traits();return o.default(t,"avatar")||o.default(t,"photoUrl")||o.default(t,"avatarUrl")},d.position=function(){var t=this.traits();return o.default(t,"position")||o.default(t,"jobTitle")},d.username=i.Facade.proxy("traits.username"),d.website=i.Facade.one("traits.website"),d.websites=i.Facade.multi("traits.website"),d.phone=i.Facade.one("traits.phone"),d.phones=i.Facade.multi("traits.phone"),d.address=i.Facade.proxy("traits.address"),d.gender=i.Facade.proxy("traits.gender"),d.birthday=i.Facade.proxy("traits.birthday")},49969:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Delete=e.Screen=e.Page=e.Track=e.Identify=e.Group=e.Alias=e.Facade=void 0;var i=n(40747);Object.defineProperty(e,"Facade",{enumerable:!0,get:function(){return i.Facade}});var o=n(36576);Object.defineProperty(e,"Alias",{enumerable:!0,get:function(){return o.Alias}});var a=n(63789);Object.defineProperty(e,"Group",{enumerable:!0,get:function(){return a.Group}});var s=n(98649);Object.defineProperty(e,"Identify",{enumerable:!0,get:function(){return s.Identify}});var u=n(27286);Object.defineProperty(e,"Track",{enumerable:!0,get:function(){return u.Track}});var c=n(83070);Object.defineProperty(e,"Page",{enumerable:!0,get:function(){return c.Page}});var l=n(69860);Object.defineProperty(e,"Screen",{enumerable:!0,get:function(){return l.Screen}});var d=n(85655);Object.defineProperty(e,"Delete",{enumerable:!0,get:function(){return d.Delete}}),e.default=r(r({},i.Facade),{Alias:o.Alias,Group:a.Group,Identify:s.Identify,Track:u.Track,Page:c.Page,Screen:l.Screen,Delete:d.Delete})},66243:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=/.+\@.+\..+/;e.default=function(t){return n.test(t)}},2530:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={Salesforce:!0};e.default=function(t){return!n[t]}},83070:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Page=void 0;var i=r(n(35717)),o=n(40747),a=n(27286),s=r(n(66243));function u(t,e){o.Facade.call(this,t,e)}e.Page=u,i.default(u,o.Facade);var c=u.prototype;c.action=function(){return"page"},c.type=c.action,c.category=o.Facade.field("category"),c.name=o.Facade.field("name"),c.title=o.Facade.proxy("properties.title"),c.path=o.Facade.proxy("properties.path"),c.url=o.Facade.proxy("properties.url"),c.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},c.properties=function(t){var e=this.field("properties")||{},n=this.category(),r=this.name();for(var i in t=t||{},n&&(e.category=n),r&&(e.name=r),t){var o=null==this[i]?this.proxy("properties."+i):this[i]();null!=o&&(e[t[i]]=o,i!==t[i]&&delete e[i])}return e},c.email=function(){var t=this.proxy("context.traits.email")||this.proxy("properties.email");if(t)return t;var e=this.userId();return s.default(e)?e:void 0},c.fullName=function(){var t=this.category(),e=this.name();return e&&t?t+" "+e:e},c.event=function(t){return t?"Viewed "+t+" Page":"Loaded a Page"},c.track=function(t){var e=this.json();return e.event=this.event(t),e.timestamp=this.timestamp(),e.properties=this.properties(),new a.Track(e,this.opts)}},69860:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Screen=void 0;var i=r(n(35717)),o=n(83070),a=n(27286);function s(t,e){o.Page.call(this,t,e)}e.Screen=s,i.default(s,o.Page),s.prototype.action=function(){return"screen"},s.prototype.type=s.prototype.action,s.prototype.event=function(t){return t?"Viewed "+t+" Screen":"Loaded a Screen"},s.prototype.track=function(t){var e=this.json();return e.event=this.event(t),e.timestamp=this.timestamp(),e.properties=this.properties(),new a.Track(e,this.opts)}},27286:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Track=void 0;var i=r(n(35717)),o=n(40747),a=n(98649),s=r(n(66243)),u=r(n(53410));function c(t,e){o.Facade.call(this,t,e)}e.Track=c,i.default(c,o.Facade);var l=c.prototype;l.action=function(){return"track"},l.type=l.action,l.event=o.Facade.field("event"),l.value=o.Facade.proxy("properties.value"),l.category=o.Facade.proxy("properties.category"),l.id=o.Facade.proxy("properties.id"),l.productId=function(){return this.proxy("properties.product_id")||this.proxy("properties.productId")},l.promotionId=function(){return this.proxy("properties.promotion_id")||this.proxy("properties.promotionId")},l.cartId=function(){return this.proxy("properties.cart_id")||this.proxy("properties.cartId")},l.checkoutId=function(){return this.proxy("properties.checkout_id")||this.proxy("properties.checkoutId")},l.paymentId=function(){return this.proxy("properties.payment_id")||this.proxy("properties.paymentId")},l.couponId=function(){return this.proxy("properties.coupon_id")||this.proxy("properties.couponId")},l.wishlistId=function(){return this.proxy("properties.wishlist_id")||this.proxy("properties.wishlistId")},l.reviewId=function(){return this.proxy("properties.review_id")||this.proxy("properties.reviewId")},l.orderId=function(){return this.proxy("properties.id")||this.proxy("properties.order_id")||this.proxy("properties.orderId")},l.sku=o.Facade.proxy("properties.sku"),l.tax=o.Facade.proxy("properties.tax"),l.name=o.Facade.proxy("properties.name"),l.price=o.Facade.proxy("properties.price"),l.total=o.Facade.proxy("properties.total"),l.repeat=o.Facade.proxy("properties.repeat"),l.coupon=o.Facade.proxy("properties.coupon"),l.shipping=o.Facade.proxy("properties.shipping"),l.discount=o.Facade.proxy("properties.discount"),l.shippingMethod=function(){return this.proxy("properties.shipping_method")||this.proxy("properties.shippingMethod")},l.paymentMethod=function(){return this.proxy("properties.payment_method")||this.proxy("properties.paymentMethod")},l.description=o.Facade.proxy("properties.description"),l.plan=o.Facade.proxy("properties.plan"),l.subtotal=function(){var t=u.default(this.properties(),"subtotal"),e=this.total()||this.revenue();if(t)return t;if(!e)return 0;if(this.total()){var n=this.tax();n&&(e-=n),(n=this.shipping())&&(e-=n),(n=this.discount())&&(e+=n)}return e},l.products=function(){var t=this.properties(),e=u.default(t,"products");return Array.isArray(e)?e.filter((function(t){return null!==t})):[]},l.quantity=function(){return(this.obj.properties||{}).quantity||1},l.currency=function(){return(this.obj.properties||{}).currency||"USD"},l.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},l.query=o.Facade.proxy("options.query"),l.properties=function(t){var e=this.field("properties")||{};for(var n in t=t||{}){var r=null==this[n]?this.proxy("properties."+n):this[n]();null!=r&&(e[t[n]]=r,delete e[n])}return e},l.username=function(){return this.proxy("traits.username")||this.proxy("properties.username")||this.userId()||this.sessionId()},l.email=function(){var t=this.proxy("traits.email")||this.proxy("properties.email")||this.proxy("options.traits.email");if(t)return t;var e=this.userId();return s.default(e)?e:void 0},l.revenue=function(){var t=this.proxy("properties.revenue"),e=this.event();return!t&&e&&e.match(/^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i)&&(t=this.proxy("properties.total")),function(t){if(!t)return;if("number"===typeof t)return t;if("string"!==typeof t)return;if(t=t.replace(/\$/g,""),t=parseFloat(t),!isNaN(t))return t}(t)},l.cents=function(){var t=this.revenue();return"number"!==typeof t?this.value()||0:100*t},l.identify=function(){var t=this.json();return t.traits=this.traits(),new a.Identify(t,this.opts)}},28595:function(t,e,n){"use strict";var r=n(28336);function i(t,e){return void 0===e&&(e=!0),t&&"object"===typeof t?function(t,e){return Object.keys(t).forEach((function(n){t[n]=i(t[n],e)})),t}(t,e):Array.isArray(t)?function(t,e){return t.forEach((function(n,r){t[r]=i(n,e)})),t}(t,e):r.is(t,e)?r.parse(t):t}t.exports=i},28336:function(t,e){"use strict";var n=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;e.parse=function(t){var e=[1,5,6,7,11,12],r=n.exec(t),i=0;if(!r)return new Date(t);for(var o,a=0;o=e[a];a++)r[o]=parseInt(r[o],10)||0;r[2]=parseInt(r[2],10)||1,r[3]=parseInt(r[3],10)||1,r[2]--,r[8]=r[8]?(r[8]+"00").substring(0,3):0," "===r[4]?i=(new Date).getTimezoneOffset():"Z"!==r[9]&&r[10]&&(i=60*r[11]+r[12],"+"===r[10]&&(i=0-i));var s=Date.UTC(r[1],r[2],r[3],r[5],r[6]+i,r[7],r[8]);return new Date(s)},e.is=function(t,e){return"string"===typeof t&&((!e||!1!==/^\d{4}-\d{2}-\d{2}/.test(t))&&n.test(t))}},86010:function(t,e,n){"use strict";function r(t){var e,n,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t)if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=r(t[e]))&&(i&&(i+=" "),i+=n);else for(e in t)t[e]&&(i&&(i+=" "),i+=e);return i}e.Z=function(){for(var t,e,n=0,i="";n<arguments.length;)(t=arguments[n++])&&(e=r(t))&&(i&&(i+=" "),i+=e);return i}},35717:function(t){"function"===typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},62705:function(t,e,n){var r=n(55639).Symbol;t.exports=r},44239:function(t,e,n){var r=n(62705),i=n(89607),o=n(2333),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?i(t):o(t)}},27561:function(t,e,n){var r=n(67990),i=/^\s+/;t.exports=function(t){return t?t.slice(0,r(t)+1).replace(i,""):t}},31957:function(t,e,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=r},89607:function(t,e,n){var r=n(62705),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(u){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i}},2333:function(t){var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},55639:function(t,e,n){var r=n(31957),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},67990:function(t){var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},23279:function(t,e,n){var r=n(13218),i=n(7771),o=n(14841),a=Math.max,s=Math.min;t.exports=function(t,e,n){var u,c,l,d,f,p,h=0,v=!1,m=!1,g=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var n=u,r=c;return u=c=void 0,h=e,d=t.apply(r,n)}function b(t){return h=t,f=setTimeout(_,e),v?y(t):d}function w(t){var n=t-p;return void 0===p||n>=e||n<0||m&&t-h>=l}function _(){var t=i();if(w(t))return S(t);f=setTimeout(_,function(t){var n=e-(t-p);return m?s(n,l-(t-h)):n}(t))}function S(t){return f=void 0,g&&u?y(t):(u=c=void 0,d)}function k(){var t=i(),n=w(t);if(u=arguments,c=this,p=t,n){if(void 0===f)return b(p);if(m)return clearTimeout(f),f=setTimeout(_,e),y(p)}return void 0===f&&(f=setTimeout(_,e)),d}return e=o(e)||0,r(n)&&(v=!!n.leading,l=(m="maxWait"in n)?a(o(n.maxWait)||0,e):l,g="trailing"in n?!!n.trailing:g),k.cancel=function(){void 0!==f&&clearTimeout(f),h=0,u=p=c=f=void 0},k.flush=function(){return void 0===f?d:S(i())},k}},13218:function(t){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},37005:function(t){t.exports=function(t){return null!=t&&"object"==typeof t}},33448:function(t,e,n){var r=n(44239),i=n(37005);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},7771:function(t,e,n){var r=n(55639);t.exports=function(){return r.Date.now()}},23493:function(t,e,n){var r=n(23279),i=n(13218);t.exports=function(t,e,n){var o=!0,a=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return i(n)&&(o="leading"in n?!!n.leading:o,a="trailing"in n?!!n.trailing:a),r(t,e,{leading:o,maxWait:e,trailing:a})}},14841:function(t,e,n){var r=n(27561),i=n(13218),o=n(33448),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=r(t);var n=s.test(t);return n||u.test(t)?c(t.slice(2),n?2:8):a.test(t)?NaN:+t}},18013:function(t,e,n){"use strict";var r=n(28336),i=n(18040),o=n(24085),a=Object.prototype.toString;t.exports=function(t){return e=t,"[object Date]"===a.call(e)?t:function(t){return"[object Number]"===a.call(t)}(t)?new Date((n=t)<315576e5?1e3*n:n):r.is(t)?r.parse(t):i.is(t)?i.parse(t):o.is(t)?o.parse(t):new Date(t);var e,n}},18040:function(t,e){"use strict";var n=/\d{13}/;e.is=function(t){return n.test(t)},e.parse=function(t){return t=parseInt(t,10),new Date(t)}},24085:function(t,e){"use strict";var n=/\d{10}/;e.is=function(t){return n.test(t)},e.parse=function(t){var e=1e3*parseInt(t,10);return new Date(e)}},63144:function(t){"use strict";var e=self.fetch.bind(self);t.exports=e,t.exports.default=t.exports},76363:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(21355)}])},39242:function(t,e,n){"use strict";var r=(0,n(11720).createContext)(null);e.Z=r},46763:function(t,e,n){"use strict";n.d(e,{Cz:function(){return Fa},FU:function(){return Ua},gj:function(){return Ba},u2:function(){return za.Z}});var r=n(34051),i=n.n(r),o=n(97997),a=n(11720),s=n(5678),u=n(70655),c=n(34155);function l(){return"undefined"!==typeof c&&c.env?c.env:{}}var d=n(99382),f=n(55609),p=n(55469);function h(t,e,n,r){var i,o=[t,e,n,r],a=(0,p.PO)(t)?t.event:t;if(!a||!(0,p.HD)(a))throw new Error("Event missing");var s=(0,p.PO)(t)?null!==(i=t.properties)&&void 0!==i?i:{}:(0,p.PO)(e)?e:{},u={};return(0,p.mf)(n)||(u=null!==n&&void 0!==n?n:{}),(0,p.PO)(t)&&!(0,p.mf)(e)&&(u=null!==e&&void 0!==e?e:{}),[a,s,u,o.find(p.mf)]}function v(t,e,n,r,i){var o,a,s=null,u=null,c=[t,e,n,r,i],l=c.filter(p.HD);void 0!==l[0]&&void 0!==l[1]&&(s=l[0],u=l[1]),1===l.length&&(s=null,u=l[0]);var d=c.find(p.mf),f=c.filter((function(t){return null===u?(0,p.PO)(t):(0,p.PO)(t)||null===t})),h=null!==(o=f[0])&&void 0!==o?o:{},v=null!==(a=f[1])&&void 0!==a?a:{};return[s,u,h,v,d]}var m=function(t){return function(){for(var e,n,r,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];for(var a={},s=["callback","options","traits","id"],u=0,c=i;u<c.length;u++){var l=c[u],d=s.pop();if("id"===d){if((0,p.HD)(l)||(0,p.hj)(l)){a.id=l.toString();continue}if(null===l||void 0===l)continue;d=s.pop()}if("traits"!==d&&"options"!==d||null!==l&&void 0!==l&&!(0,p.PO)(l)||(a[d]=l),(0,p.mf)(l)){a.callback=l;break}}return[null!==(e=a.id)&&void 0!==e?e:t.id(),null!==(n=a.traits)&&void 0!==n?n:{},null!==(r=a.options)&&void 0!==r?r:{},a.callback]}};function g(t,e,n,r){(0,p.hj)(t)&&(t=t.toString()),(0,p.hj)(e)&&(e=e.toString());var i=[t,e,n,r],o=i.filter(p.HD),a=o[0],s=void 0===a?t:a,u=o[1],c=void 0===u?null:u,l=i.filter(p.PO)[0];return[s,c,void 0===l?{}:l,i.find(p.mf)]}var y=n(65904),b=n(29784),w=n(4591),_=function(t,e){var n=Date.now()-t;return Math.max((null!==e&&void 0!==e?e:300)-n,0)};function S(t,e,n,r){return(0,u.mG)(this,void 0,void 0,(function(){var i,o;return(0,u.Jh)(this,(function(a){switch(a.label){case 0:return n.emit("dispatch_start",t),i=Date.now(),e.isEmpty()?[4,e.dispatchSingle(t)]:[3,2];case 1:return o=a.sent(),[3,4];case 2:return[4,e.dispatch(t)];case 3:o=a.sent(),a.label=4;case 4:return(null===r||void 0===r?void 0:r.callback)?[4,(0,w.UI)(o,r.callback,_(i,r.timeout))]:[3,6];case 5:o=a.sent(),a.label=6;case 6:return(null===r||void 0===r?void 0:r.debug)&&o.flush(),[2,o]}}))}))}var k=n(38714),x=n(59108);var E=function(t,e,n,r,i,o){return{__t:"bpc",c:e,p:r,u:t,s:n,t:i,r:o}},I=Object.keys(E("","","","","",""));var C=function(t){var e=t.c,n=t.p,r=t.s,i=t.u,o=t.r,a=t.t,s=e?function(t){try{return new URL(t).pathname}catch(e){return"/"===t[0]?t:"/"+t}}(e):n,u=e?function(t,e){return t.indexOf("?")>-1?t:t+e}(e,r):function(t){var e=t.indexOf("#");return-1===e?t:t.slice(0,e)}(i);return{path:s,referrer:o,search:r,title:a,url:u}},O=function(){var t=document.querySelector("link[rel='canonical']");return E(location.href,t&&t.getAttribute("href")||void 0,location.search,location.pathname,document.title,document.referrer)},T=function(t,e){void 0===e&&(e=C(O()));var n,r,i,o=t.context;"page"===t.type&&(n=t.properties&&(r=t.properties,i=Object.keys(e),Object.assign.apply(Object,(0,u.ev)([{}],i.map((function(t){var e;if(r&&Object.prototype.hasOwnProperty.call(r,t))return(e={})[t]=r[t],e})),!1))),t.properties=(0,u.pi)((0,u.pi)((0,u.pi)({},e),t.properties),t.name?{name:t.name}:{})),o.page=(0,u.pi)((0,u.pi)((0,u.pi)({},e),n),o.page)},A=n(96475),R=function(t){function e(e,n){var r=t.call(this,"".concat(e," ").concat(n))||this;return r.field=e,r}return(0,u.ZT)(e,t),e}(Error),M="is not a string",N="is not an object",L="is nil";function D(t){!function(t){if(!(0,p.Gg)(t))throw new R("Event",L);if("object"!==typeof t)throw new R("Event",N)}(t),function(t){if(!(0,p.HD)(t.type))throw new R(".type",M)}(t),function(t){if(!(0,p.HD)(t.messageId))throw new R(".messageId",M)}(t),"track"===t.type&&(function(t){if(!(0,p.HD)(t.event))throw new R(".event",M)}(t),function(t){if(!(0,p.PO)(t.properties))throw new R(".properties",N)}(t)),["group","identify"].includes(t.type)&&function(t){if(!(0,p.PO)(t.traits))throw new R(".traits",N)}(t)}var P=function(t){var e,n;this.settings=t,this.createMessageId=t.createMessageId,this.onEventMethodCall=null!==(e=t.onEventMethodCall)&&void 0!==e?e:function(){},this.onFinishedEvent=null!==(n=t.onFinishedEvent)&&void 0!==n?n:function(){}},j=function(){function t(t){this.settings=new P(t)}return t.prototype.track=function(t,e,n,r){return this.settings.onEventMethodCall({type:"track",options:n}),this.normalize((0,u.pi)((0,u.pi)({},this.baseEvent()),{event:t,type:"track",properties:null!==e&&void 0!==e?e:{},options:(0,u.pi)({},n),integrations:(0,u.pi)({},r)}))},t.prototype.page=function(t,e,n,r,i){var o;this.settings.onEventMethodCall({type:"page",options:r});var a={type:"page",properties:(0,u.pi)({},n),options:(0,u.pi)({},r),integrations:(0,u.pi)({},i)};return null!==t&&(a.category=t,a.properties=null!==(o=a.properties)&&void 0!==o?o:{},a.properties.category=t),null!==e&&(a.name=e),this.normalize((0,u.pi)((0,u.pi)({},this.baseEvent()),a))},t.prototype.screen=function(t,e,n,r,i){this.settings.onEventMethodCall({type:"screen",options:r});var o={type:"screen",properties:(0,u.pi)({},n),options:(0,u.pi)({},r),integrations:(0,u.pi)({},i)};return null!==t&&(o.category=t),null!==e&&(o.name=e),this.normalize((0,u.pi)((0,u.pi)({},this.baseEvent()),o))},t.prototype.identify=function(t,e,n,r){return this.settings.onEventMethodCall({type:"identify",options:n}),this.normalize((0,u.pi)((0,u.pi)({},this.baseEvent()),{type:"identify",userId:t,traits:null!==e&&void 0!==e?e:{},options:(0,u.pi)({},n),integrations:r}))},t.prototype.group=function(t,e,n,r){return this.settings.onEventMethodCall({type:"group",options:n}),this.normalize((0,u.pi)((0,u.pi)({},this.baseEvent()),{type:"group",traits:null!==e&&void 0!==e?e:{},options:(0,u.pi)({},n),integrations:(0,u.pi)({},r),groupId:t}))},t.prototype.alias=function(t,e,n,r){this.settings.onEventMethodCall({type:"alias",options:n});var i={userId:t,type:"alias",options:(0,u.pi)({},n),integrations:(0,u.pi)({},r)};return null!==e&&(i.previousId=e),void 0===t?this.normalize((0,u.pi)((0,u.pi)({},i),this.baseEvent())):this.normalize((0,u.pi)((0,u.pi)({},this.baseEvent()),i))},t.prototype.baseEvent=function(){return{integrations:{},options:{}}},t.prototype.context=function(t){var e,n=["userId","anonymousId","timestamp","messageId"];delete t.integrations;var r=Object.keys(t),i=null!==(e=t.context)&&void 0!==e?e:{},o={};return r.forEach((function(e){"context"!==e&&(n.includes(e)?(0,A.N)(o,e,t[e]):(0,A.N)(i,e,t[e]))})),[i,o]},t.prototype.normalize=function(t){var e,n,r,i,o=Object.keys(null!==(e=t.integrations)&&void 0!==e?e:{}).reduce((function(e,n){var r,i;return(0,u.pi)((0,u.pi)({},e),((r={})[n]=Boolean(null===(i=t.integrations)||void 0===i?void 0:i[n]),r))}),{});t.options=(r=t.options||{},i=function(t,e){return void 0!==e},Object.keys(r).filter((function(t){return i(t,r[t])})).reduce((function(t,e){return t[e]=r[e],t}),{}));var a=(0,u.pi)((0,u.pi)({},o),null===(n=t.options)||void 0===n?void 0:n.integrations),s=t.options?this.context(t.options):[],c=s[0],l=s[1],d=t.options,f=(0,u._T)(t,["options"]),p=(0,u.pi)((0,u.pi)((0,u.pi)((0,u.pi)({timestamp:new Date},f),{context:c,integrations:a}),l),{messageId:d.messageId||this.settings.createMessageId()});return this.settings.onFinishedEvent(p),D(p),p},t}(),F=function(t){function e(e){var n=t.call(this,{createMessageId:function(){return"ajs-next-".concat(Date.now(),"-").concat((0,x.v4)())},onEventMethodCall:function(t){var e=t.options;n.maybeUpdateAnonId(e)},onFinishedEvent:function(t){return n.addIdentity(t),t}})||this;return n.user=e,n}return(0,u.ZT)(e,t),e.prototype.maybeUpdateAnonId=function(t){(null===t||void 0===t?void 0:t.anonymousId)&&this.user.anonymousId(t.anonymousId)},e.prototype.addIdentity=function(t){this.user.id()&&(t.userId=this.user.id()),this.user.anonymousId()&&(t.anonymousId=this.user.anonymousId())},e.prototype.track=function(e,n,r,i,o){var a=t.prototype.track.call(this,e,n,r,i);return T(a,o),a},e.prototype.page=function(e,n,r,i,o,a){var s=t.prototype.page.call(this,e,n,r,i,o);return T(s,a),s},e.prototype.screen=function(e,n,r,i,o,a){var s=t.prototype.screen.call(this,e,n,r,i,o);return T(s,a),s},e.prototype.identify=function(e,n,r,i,o){var a=t.prototype.identify.call(this,e,n,r,i);return T(a,o),a},e.prototype.group=function(e,n,r,i,o){var a=t.prototype.group.call(this,e,n,r,i);return T(a,o),a},e.prototype.alias=function(e,n,r,i,o){var a=t.prototype.alias.call(this,e,n,r,i);return T(a,o),a},e}(j),U=function(t){return"addMiddleware"in t&&"destination"===t.type},B=n(65976);var z=n(51181),V=n(98191),q=n(69147),G=function(t){function e(e){var n=t.call(this)||this;return n.criticalTasks=function(){var t,e,n=0;return{done:function(){return t},run:function(r){var i,o=r();return"object"===typeof(i=o)&&null!==i&&"then"in i&&"function"===typeof i.then&&(1===++n&&(t=new Promise((function(t){return e=t}))),o.finally((function(){return 0===--n&&e()}))),o}}}(),n.plugins=[],n.failedInitializations=[],n.flushing=!1,n.queue=e,n.queue.on(z.M,(function(){n.scheduleFlush(0)})),n}return(0,u.ZT)(e,t),e.prototype.register=function(t,e,n){return(0,u.mG)(this,void 0,void 0,(function(){var r,i,o=this;return(0,u.Jh)(this,(function(a){switch(a.label){case 0:return this.plugins.push(e),r=function(n){o.failedInitializations.push(e.name),o.emit("initialization_failure",e),console.warn(e.name,n),t.log("warn","Failed to load destination",{plugin:e.name,error:n}),o.plugins=o.plugins.filter((function(t){return t!==e}))},"destination"!==e.type||"Segment.io"===e.name?[3,1]:(e.load(t,n).catch(r),[3,4]);case 1:return a.trys.push([1,3,,4]),[4,e.load(t,n)];case 2:return a.sent(),[3,4];case 3:return i=a.sent(),r(i),[3,4];case 4:return[2]}}))}))},e.prototype.deregister=function(t,e,n){return(0,u.mG)(this,void 0,void 0,(function(){var r;return(0,u.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),e.unload?[4,Promise.resolve(e.unload(t,n))]:[3,2];case 1:i.sent(),i.label=2;case 2:return this.plugins=this.plugins.filter((function(t){return t.name!==e.name})),[3,4];case 3:return r=i.sent(),t.log("warn","Failed to unload destination",{plugin:e.name,error:r}),[3,4];case 4:return[2]}}))}))},e.prototype.dispatch=function(t){return(0,u.mG)(this,void 0,void 0,(function(){var e;return(0,u.Jh)(this,(function(n){return t.log("debug","Dispatching"),t.stats.increment("message_dispatched"),this.queue.push(t),e=this.subscribeToDelivery(t),this.scheduleFlush(0),[2,e]}))}))},e.prototype.subscribeToDelivery=function(t){return(0,u.mG)(this,void 0,void 0,(function(){var e=this;return(0,u.Jh)(this,(function(n){return[2,new Promise((function(n){var r=function(i,o){i.isSame(t)&&(e.off("flush",r),n(i))};e.on("flush",r)}))]}))}))},e.prototype.dispatchSingle=function(t){return(0,u.mG)(this,void 0,void 0,(function(){var e=this;return(0,u.Jh)(this,(function(n){return t.log("debug","Dispatching"),t.stats.increment("message_dispatched"),this.queue.updateAttempts(t),t.attempts=1,[2,this.deliver(t).catch((function(n){return e.enqueuRetry(n,t)?e.subscribeToDelivery(t):(t.setFailedDelivery({reason:n}),t)}))]}))}))},e.prototype.isEmpty=function(){return 0===this.queue.length},e.prototype.scheduleFlush=function(t){var e=this;void 0===t&&(t=500),this.flushing||(this.flushing=!0,setTimeout((function(){e.flush().then((function(){setTimeout((function(){e.flushing=!1,e.queue.length&&e.scheduleFlush(0)}),0)}))}),t))},e.prototype.deliver=function(t){return(0,u.mG)(this,void 0,void 0,(function(){var e,n,r,i;return(0,u.Jh)(this,(function(o){switch(o.label){case 0:return[4,this.criticalTasks.done()];case 1:o.sent(),e=Date.now(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.flushOne(t)];case 3:return t=o.sent(),n=Date.now()-e,this.emit("delivery_success",t),t.stats.gauge("delivered",n),t.log("debug","Delivered",t.event),[2,t];case 4:throw r=o.sent(),i=r,t.log("error","Failed to deliver",i),this.emit("delivery_failure",t,i),t.stats.increment("delivery_failed"),r;case 5:return[2]}}))}))},e.prototype.enqueuRetry=function(t,e){return!(t instanceof V.Y&&!t.retry)&&this.queue.pushWithBackoff(e)},e.prototype.flush=function(){return(0,u.mG)(this,void 0,void 0,(function(){var t,e;return(0,u.Jh)(this,(function(n){switch(n.label){case 0:if(0===this.queue.length)return[2,[]];if(!(t=this.queue.pop()))return[2,[]];t.attempts=this.queue.getAttempts(t),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.deliver(t)];case 2:return t=n.sent(),this.emit("flush",t,!0),[3,4];case 3:return e=n.sent(),this.enqueuRetry(e,t)||(t.setFailedDelivery({reason:e}),this.emit("flush",t,!1)),[2,[]];case 4:return[2,[t]]}}))}))},e.prototype.isReady=function(){return!0},e.prototype.availableExtensions=function(t){var e=this.plugins.filter((function(e){var n,r,i;if("destination"!==e.type&&"Segment.io"!==e.name)return!0;var o=void 0;return null===(n=e.alternativeNames)||void 0===n||n.forEach((function(e){void 0!==t[e]&&(o=t[e])})),null!==(i=null!==(r=t[e.name])&&void 0!==r?r:o)&&void 0!==i?i:!1!==("Segment.io"===e.name||t.All)})),n=function(t,e){var n={};return t.forEach((function(t){var r,i=void 0;if("string"===typeof e){var o=t[e];i="string"!==typeof o?JSON.stringify(o):o}else e instanceof Function&&(i=e(t));void 0!==i&&(n[i]=(0,u.ev)((0,u.ev)([],null!==(r=n[i])&&void 0!==r?r:[],!0),[t],!1))})),n}(e,"type"),r=n.before,i=void 0===r?[]:r,o=n.enrichment,a=void 0===o?[]:o,s=n.destination,c=void 0===s?[]:s,l=n.after;return{before:i,enrichment:a,destinations:c,after:void 0===l?[]:l}},e.prototype.flushOne=function(t){var e,n;return(0,u.mG)(this,void 0,void 0,(function(){var r,i,o,a,s,c,l,d,f,p,h,v,m,g;return(0,u.Jh)(this,(function(u){switch(u.label){case 0:if(!this.isReady())throw new Error("Not ready");t.attempts>1&&this.emit("delivery_retry",t),r=this.availableExtensions(null!==(e=t.event.integrations)&&void 0!==e?e:{}),i=r.before,o=r.enrichment,a=0,s=i,u.label=1;case 1:return a<s.length?(c=s[a],[4,(0,q.z)(t,c)]):[3,4];case 2:(p=u.sent())instanceof V._&&(t=p),this.emit("message_enriched",t,c),u.label=3;case 3:return a++,[3,1];case 4:l=0,d=o,u.label=5;case 5:return l<d.length?(f=d[l],[4,(0,q.a)(t,f)]):[3,8];case 6:(p=u.sent())instanceof V._&&(t=p),this.emit("message_enriched",t,f),u.label=7;case 7:return l++,[3,5];case 8:return h=this.availableExtensions(null!==(n=t.event.integrations)&&void 0!==n?n:{}),v=h.destinations,m=h.after,[4,new Promise((function(e,n){setTimeout((function(){var r=v.map((function(e){return(0,q.a)(t,e)}));Promise.all(r).then(e).catch(n)}),0)}))];case 9:return u.sent(),t.stats.increment("message_delivered"),this.emit("message_delivered",t),g=m.map((function(e){return(0,q.a)(t,e)})),[4,Promise.all(g)];case 10:return u.sent(),[2,t]}}))}))},e}(k.Q),H=function(t){function e(e){return t.call(this,"string"===typeof e?new B.$(4,e):e)||this}return(0,u.ZT)(e,t),e.prototype.flush=function(){return(0,u.mG)(this,void 0,void 0,(function(){return(0,u.Jh)(this,(function(e){return(0,y.s)()?[2,[]]:[2,t.prototype.flush.call(this)]}))}))},e}(G);function J(t){for(var e=t.constructor.prototype,n=0,r=Object.getOwnPropertyNames(e);n<r.length;n++){var i=r[n];if("constructor"!==i){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);o&&"function"===typeof o.value&&(t[i]=t[i].bind(t))}}return t}function K(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}var W=function t(e,n){function r(t,r,i){if("undefined"!==typeof document){"number"===typeof(i=K({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var a in i)i[a]&&(o+="; "+a,!0!==i[a]&&(o+="="+i[a].split(";")[0]));return document.cookie=t+"="+e.write(r,t)+o}}return Object.create({set:r,get:function(t){if("undefined"!==typeof document&&(!arguments.length||t)){for(var n=document.cookie?document.cookie.split("; "):[],r={},i=0;i<n.length;i++){var o=n[i].split("="),a=o.slice(1).join("=");try{var s=decodeURIComponent(o[0]);if(r[s]=e.read(a,s),t===s)break}catch(u){}}return t?r[t]:r}},remove:function(t,e){r(t,"",K({},e,{expires:-1}))},withAttributes:function(e){return t(this.converter,K({},this.attributes,e))},withConverter:function(e){return t(K({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(e)}})}({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),Z=W;function $(t){var e=function(t){try{return new URL(t)}catch(Yt){return}}(t);if(e)for(var n=function(t){var e=t.hostname.split("."),n=e[e.length-1],r=[];if(4===e.length&&parseInt(n,10)>0)return r;if(e.length<=1)return r;for(var i=e.length-2;i>=0;--i)r.push(e.slice(i).join("."));return r}(e),r=0;r<n.length;++r){var i="__tld__",o=n[r],a={domain:"."+o};try{if(Z.set(i,"1",a),Z.get(i))return Z.remove(i,a),o}catch(s){return}}}var X=function(){function t(e){void 0===e&&(e=t.defaults),this.options=(0,u.pi)((0,u.pi)({},t.defaults),e)}return Object.defineProperty(t,"defaults",{get:function(){return{maxage:365,domain:$(window.location.href),path:"/",sameSite:"Lax"}},enumerable:!1,configurable:!0}),t.prototype.opts=function(){return{sameSite:this.options.sameSite,expires:this.options.maxage,domain:this.options.domain,path:this.options.path,secure:this.options.secure}},t.prototype.get=function(t){var e;try{var n=Z.get(t);if(void 0===n||null===n)return null;try{return null!==(e=JSON.parse(n))&&void 0!==e?e:null}catch(r){return null!==n&&void 0!==n?n:null}}catch(r){return null}},t.prototype.set=function(t,e){"string"===typeof e?Z.set(t,e,this.opts()):null===e?Z.remove(t,this.opts()):Z.set(t,JSON.stringify(e),this.opts())},t.prototype.remove=function(t){return Z.remove(t,this.opts())},t}(),Y=function(){function t(){}return t.prototype.localStorageWarning=function(t,e){console.warn("Unable to access ".concat(t,", localStorage may be ").concat(e))},t.prototype.get=function(t){var e;try{var n=localStorage.getItem(t);if(null===n)return null;try{return null!==(e=JSON.parse(n))&&void 0!==e?e:null}catch(r){return null!==n&&void 0!==n?n:null}}catch(i){return this.localStorageWarning(t,"unavailable"),null}},t.prototype.set=function(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(Yt){this.localStorageWarning(t,"full")}},t.prototype.remove=function(t){try{return localStorage.removeItem(t)}catch(e){this.localStorageWarning(t,"unavailable")}},t}(),Q=function(){function t(){this.cache={}}return t.prototype.get=function(t){var e;return null!==(e=this.cache[t])&&void 0!==e?e:null},t.prototype.set=function(t,e){this.cache[t]=e},t.prototype.remove=function(t){delete this.cache[t]},t}(),tt={Cookie:"cookie",LocalStorage:"localStorage",Memory:"memory"};function et(t){return t&&t.stores&&Array.isArray(t.stores)&&t.stores.every((function(t){return Object.values(tt).includes(t)}))}function nt(t){return t.map((function(t){var e,n;switch(!function(t){return"object"===typeof t&&void 0!==t.name}(t)?e=t:(e=t.name,n=t.settings),e){case tt.Cookie:return new X(n);case tt.LocalStorage:return new Y;case tt.Memory:return new Q;default:throw new Error("Unknown Store Type: ".concat(t))}}))}function rt(t,e){return t.map((function(t){return e&&t===tt.Cookie?{name:t,settings:e}:t}))}var it=function(t,e,n,r){console.warn("".concat(t.constructor.name,": Can't ").concat(e,' key "').concat(n,'" | Err: ').concat(r))},ot=function(){function t(t){this.stores=t}return t.prototype.get=function(t){for(var e=null,n=0,r=this.stores;n<r.length;n++){var i=r[n];try{if(void 0!==(e=i.get(t))&&null!==e)return e}catch(o){it(i,"get",t,o)}}return null},t.prototype.set=function(t,e){this.stores.forEach((function(n){try{n.set(t,e)}catch(r){it(n,"set",t,r)}}))},t.prototype.clear=function(t){this.stores.forEach((function(e){try{e.remove(t)}catch(n){it(e,"remove",t,n)}}))},t.prototype.getAndSync=function(t){var e=this.get(t),n="number"===typeof e?e.toString():e;return this.set(t,n),n},t}(),at={persist:!0,cookie:{key:"ajs_user_id",oldKey:"ajs_user"},localStorage:{key:"ajs_user_traits"}},st=function(){function t(t,e){void 0===t&&(t=at);var n,r,i,o,a=this;this.options={},this.id=function(t){if(a.options.disable)return null;var e=a.identityStore.getAndSync(a.idKey);void 0!==t&&(a.identityStore.set(a.idKey,t),t!==e&&null!==e&&null!==t&&a.anonymousId(null));var n=a.identityStore.getAndSync(a.idKey);if(n)return n;var r=a.legacyUserStore.get(at.cookie.oldKey);return r?"object"===typeof r?r.id:r:null},this.anonymousId=function(t){var e,n;if(a.options.disable)return null;if(void 0===t){var r=null!==(e=a.identityStore.getAndSync(a.anonKey))&&void 0!==e?e:null===(n=a.legacySIO())||void 0===n?void 0:n[0];if(r)return r}return null===t?(a.identityStore.set(a.anonKey,null),a.identityStore.getAndSync(a.anonKey)):(a.identityStore.set(a.anonKey,null!==t&&void 0!==t?t:(0,x.v4)()),a.identityStore.getAndSync(a.anonKey))},this.traits=function(t){var e;if(!a.options.disable)return null===t&&(t={}),t&&a.traitsStore.set(a.traitsKey,null!==t&&void 0!==t?t:{}),null!==(e=a.traitsStore.get(a.traitsKey))&&void 0!==e?e:{}},this.options=(0,u.pi)((0,u.pi)({},at),t),this.cookieOptions=e,this.idKey=null!==(r=null===(n=t.cookie)||void 0===n?void 0:n.key)&&void 0!==r?r:at.cookie.key,this.traitsKey=null!==(o=null===(i=t.localStorage)||void 0===i?void 0:i.key)&&void 0!==o?o:at.localStorage.key,this.anonKey="ajs_anonymous_id",this.identityStore=this.createStorage(this.options,e),this.legacyUserStore=this.createStorage(this.options,e,(function(t){return t===tt.Cookie})),this.traitsStore=this.createStorage(this.options,e,(function(t){return t!==tt.Cookie}));var s=this.legacyUserStore.get(at.cookie.oldKey);s&&"object"===typeof s&&(s.id&&this.id(s.id),s.traits&&this.traits(s.traits)),J(this)}return t.prototype.legacySIO=function(){var t=this.legacyUserStore.get("_sio");if(!t)return null;var e=t.split("----");return[e[0],e[1]]},t.prototype.identify=function(t,e){if(!this.options.disable){e=null!==e&&void 0!==e?e:{};var n=this.id();null!==n&&n!==t||(e=(0,u.pi)((0,u.pi)({},this.traits()),e)),t&&this.id(t),this.traits(e)}},t.prototype.logout=function(){this.anonymousId(null),this.id(null),this.traits({})},t.prototype.reset=function(){this.logout(),this.identityStore.clear(this.idKey),this.identityStore.clear(this.anonKey),this.traitsStore.clear(this.traitsKey)},t.prototype.load=function(){return new t(this.options,this.cookieOptions)},t.prototype.save=function(){return!0},t.prototype.createStorage=function(t,e,n){var r=[tt.LocalStorage,tt.Cookie,tt.Memory];return t.disable?new ot([]):t.persist?(void 0!==t.storage&&null!==t.storage&&et(t.storage)&&(r=t.storage.stores),t.localStorageFallbackDisabled&&(r=r.filter((function(t){return t!==tt.LocalStorage}))),n&&(r=r.filter(n)),new ot(nt(rt(r,e)))):new ot([new Q])},t.defaults=at,t}(),ut={persist:!0,cookie:{key:"ajs_group_id"},localStorage:{key:"ajs_group_properties"}},ct=function(t){function e(e,n){void 0===e&&(e=ut);var r=t.call(this,(0,u.pi)((0,u.pi)({},ut),e),n)||this;return r.anonymousId=function(t){},J(r),r}return(0,u.ZT)(e,t),e}(st),lt=n(39821),dt=n(44083),ft=n(74939),pt=function(t,e,n){n.getCalls(t).forEach((function(t){_t(e,t).catch(console.error)}))},ht=function(t,e){return(0,u.mG)(void 0,void 0,void 0,(function(){var n,r,i;return(0,u.Jh)(this,(function(o){switch(o.label){case 0:n=0,r=e.getCalls("addSourceMiddleware"),o.label=1;case 1:return n<r.length?(i=r[n],[4,_t(t,i).catch(console.error)]):[3,4];case 2:o.sent(),o.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},vt=pt.bind(void 0,"on"),mt=pt.bind(void 0,"setAnonymousId"),gt=function(t){if(yt(t)){var e=t.pop();return C(e)}},yt=function(t){return function(t){if(!(0,p.PO)(t))return!1;if("bpc"!==t.__t)return!1;for(var e in t)if(!I.includes(e))return!1;return!0}(t[t.length-1])},bt=function(t,e,n,r){void 0===n&&(n=function(){}),void 0===r&&(r=console.error),this.method=t,this.resolve=n,this.reject=r,this.called=!1,this.args=e},wt=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._callMap={},this.push.apply(this,t)}return Object.defineProperty(t.prototype,"calls",{get:function(){return this._pushSnippetWindowBuffer(),this._callMap},set:function(t){this._callMap=t},enumerable:!1,configurable:!0}),t.prototype.getCalls=function(t){var e;return null!==(e=this.calls[t])&&void 0!==e?e:[]},t.prototype.push=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.forEach((function(e){["track","screen","alias","group","page","identify"].includes(e.method)&&!yt(e.args)&&(e.args=(0,u.ev)((0,u.ev)([],e.args,!0),[O()],!1)),t.calls[e.method]?t.calls[e.method].push(e):t.calls[e.method]=[e]}))},t.prototype.clear=function(){this._pushSnippetWindowBuffer(),this.calls={}},t.prototype.toArray=function(){var t;return(t=[]).concat.apply(t,Object.values(this.calls))},t.prototype._pushSnippetWindowBuffer=function(){var t=(0,ft.wI)();if(Array.isArray(t)){var e=t.splice(0,t.length).map((function(t){var e=t[0],n=t.slice(1);return new bt(e,n)}));this.push.apply(this,e)}},t}();function _t(t,e){return(0,u.mG)(this,void 0,void 0,(function(){var n,r;return(0,u.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),e.called?[2,void 0]:(e.called=!0,n=t[e.method].apply(t,e.args),"object"===typeof(o=n)&&null!==o&&"then"in o&&"function"===typeof o.then?[4,n]:[3,2]);case 1:i.sent(),i.label=2;case 2:return e.resolve(n),[3,4];case 3:return r=i.sent(),e.reject(r),[3,4];case 4:return[2]}var o}))}))}var St=function(){function t(t){var e=this;this.trackSubmit=this._createMethod("trackSubmit"),this.trackClick=this._createMethod("trackClick"),this.trackLink=this._createMethod("trackLink"),this.pageView=this._createMethod("pageview"),this.identify=this._createMethod("identify"),this.reset=this._createMethod("reset"),this.group=this._createMethod("group"),this.track=this._createMethod("track"),this.ready=this._createMethod("ready"),this.alias=this._createMethod("alias"),this.debug=this._createChainableMethod("debug"),this.page=this._createMethod("page"),this.once=this._createChainableMethod("once"),this.off=this._createChainableMethod("off"),this.on=this._createChainableMethod("on"),this.addSourceMiddleware=this._createMethod("addSourceMiddleware"),this.setAnonymousId=this._createMethod("setAnonymousId"),this.addDestinationMiddleware=this._createMethod("addDestinationMiddleware"),this.screen=this._createMethod("screen"),this.register=this._createMethod("register"),this.deregister=this._createMethod("deregister"),this.user=this._createMethod("user"),this.VERSION=lt.i,this._preInitBuffer=new wt,this._promise=t(this._preInitBuffer),this._promise.then((function(t){var n=t[0],r=t[1];e.instance=n,e.ctx=r})).catch((function(){}))}return t.prototype.then=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._promise).then.apply(t,e)},t.prototype.catch=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._promise).catch.apply(t,e)},t.prototype.finally=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._promise).finally.apply(t,e)},t.prototype._createMethod=function(t){var e=this;return function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(e.instance){var o=(n=e.instance)[t].apply(n,r);return Promise.resolve(o)}return new Promise((function(n,i){e._preInitBuffer.push(new bt(t,r,n,i))}))}},t.prototype._createChainableMethod=function(t){var e=this;return function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return e.instance?((n=e.instance)[t].apply(n,r),e):(e._preInitBuffer.push(new bt(t,r)),e)}},t}(),kt="This is being deprecated and will be not be available in future releases of Analytics JS",xt=(0,dt.R)(),Et=null===xt||void 0===xt?void 0:xt.analytics;var It=function(t){var e;this.timeout=300,this.writeKey=t.writeKey,this.cdnSettings=null!==(e=t.cdnSettings)&&void 0!==e?e:{integrations:{}}};function Ct(){console.warn(kt)}var Ot,Tt=function(t){function e(e,n,r,i,o){var a,s,c=this;(c=t.call(this)||this)._debug=!1,c.initialized=!1,c.user=function(){return c._user},c.init=c.initialize.bind(c),c.log=Ct,c.addIntegrationMiddleware=Ct,c.listeners=Ct,c.addEventListener=Ct,c.removeAllListeners=Ct,c.removeListener=Ct,c.removeEventListener=Ct,c.hasListeners=Ct,c.add=Ct,c.addIntegration=Ct;var l=null===n||void 0===n?void 0:n.cookie,d=null!==(a=null===n||void 0===n?void 0:n.disableClientPersistence)&&void 0!==a&&a;c.settings=new It(e),c.queue=null!==r&&void 0!==r?r:function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=e?10:1,i=n?new z.Z(r,[]):new B.$(r,t);return new H(i)}("".concat(e.writeKey,":event-queue"),null===n||void 0===n?void 0:n.retryQueue,d);var f=null===n||void 0===n?void 0:n.storage;return c._universalStorage=c.createStore(d,f,l),c._user=null!==i&&void 0!==i?i:new st((0,u.pi)({persist:!d,storage:null===n||void 0===n?void 0:n.storage},null===n||void 0===n?void 0:n.user),l).load(),c._group=null!==o&&void 0!==o?o:new ct((0,u.pi)({persist:!d,storage:null===n||void 0===n?void 0:n.storage},null===n||void 0===n?void 0:n.group),l).load(),c.eventFactory=new F(c._user),c.integrations=null!==(s=null===n||void 0===n?void 0:n.integrations)&&void 0!==s?s:{},c.options=null!==n&&void 0!==n?n:{},J(c),c}return(0,u.ZT)(e,t),e.prototype.createStore=function(t,e,n){return t?new ot([new Q]):e&&et(e)?new ot(nt(rt(e.stores,n))):new ot(nt([tt.LocalStorage,{name:tt.Cookie,settings:n},tt.Memory]))},Object.defineProperty(e.prototype,"storage",{get:function(){return this._universalStorage},enumerable:!1,configurable:!0}),e.prototype.track=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,u.mG)(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,c=this;return(0,u.Jh)(this,(function(u){return e=gt(t),n=h.apply(void 0,t),r=n[0],i=n[1],o=n[2],a=n[3],s=this.eventFactory.track(r,i,o,this.integrations,e),[2,this._dispatch(s,a).then((function(t){return c.emit("track",r,t.event.properties,t.event.options),t}))]}))}))},e.prototype.page=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,u.mG)(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,c,l=this;return(0,u.Jh)(this,(function(u){return e=gt(t),n=v.apply(void 0,t),r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],c=this.eventFactory.page(r,i,o,a,this.integrations,e),[2,this._dispatch(c,s).then((function(t){return l.emit("page",r,i,t.event.properties,t.event.options),t}))]}))}))},e.prototype.identify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,u.mG)(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,c=this;return(0,u.Jh)(this,(function(u){return e=gt(t),n=m(this._user).apply(void 0,t),r=n[0],i=n[1],o=n[2],a=n[3],this._user.identify(r,i),s=this.eventFactory.identify(this._user.id(),this._user.traits(),o,this.integrations,e),[2,this._dispatch(s,a).then((function(t){return c.emit("identify",t.event.userId,t.event.traits,t.event.options),t}))]}))}))},e.prototype.group=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=gt(e);if(0===e.length)return this._group;var i=m(this._group).apply(void 0,e),o=i[0],a=i[1],s=i[2],u=i[3];this._group.identify(o,a);var c=this._group.id(),l=this._group.traits(),d=this.eventFactory.group(c,l,s,this.integrations,r);return this._dispatch(d,u).then((function(e){return t.emit("group",e.event.groupId,e.event.traits,e.event.options),e}))},e.prototype.alias=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,u.mG)(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,c=this;return(0,u.Jh)(this,(function(u){return e=gt(t),n=g.apply(void 0,t),r=n[0],i=n[1],o=n[2],a=n[3],s=this.eventFactory.alias(r,i,o,this.integrations,e),[2,this._dispatch(s,a).then((function(t){return c.emit("alias",r,i,t.event.options),t}))]}))}))},e.prototype.screen=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,u.mG)(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,c,l=this;return(0,u.Jh)(this,(function(u){return e=gt(t),n=v.apply(void 0,t),r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],c=this.eventFactory.screen(r,i,o,a,this.integrations,e),[2,this._dispatch(c,s).then((function(t){return l.emit("screen",r,i,t.event.properties,t.event.options),t}))]}))}))},e.prototype.trackClick=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,u.mG)(this,void 0,void 0,(function(){var e,r;return(0,u.Jh)(this,(function(i){switch(i.label){case 0:return[4,n.e(8119).then(n.bind(n,4802))];case 1:return e=i.sent(),[2,(r=e.link).call.apply(r,(0,u.ev)([this],t,!1))]}}))}))},e.prototype.trackLink=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,u.mG)(this,void 0,void 0,(function(){var e,r;return(0,u.Jh)(this,(function(i){switch(i.label){case 0:return[4,n.e(8119).then(n.bind(n,4802))];case 1:return e=i.sent(),[2,(r=e.link).call.apply(r,(0,u.ev)([this],t,!1))]}}))}))},e.prototype.trackSubmit=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,u.mG)(this,void 0,void 0,(function(){var e,r;return(0,u.Jh)(this,(function(i){switch(i.label){case 0:return[4,n.e(8119).then(n.bind(n,4802))];case 1:return e=i.sent(),[2,(r=e.form).call.apply(r,(0,u.ev)([this],t,!1))]}}))}))},e.prototype.trackForm=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,u.mG)(this,void 0,void 0,(function(){var e,r;return(0,u.Jh)(this,(function(i){switch(i.label){case 0:return[4,n.e(8119).then(n.bind(n,4802))];case 1:return e=i.sent(),[2,(r=e.form).call.apply(r,(0,u.ev)([this],t,!1))]}}))}))},e.prototype.register=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,u.mG)(this,void 0,void 0,(function(){var e,n,r=this;return(0,u.Jh)(this,(function(i){switch(i.label){case 0:return e=b._.system(),n=t.map((function(t){return r.queue.register(e,t,r)})),[4,Promise.all(n)];case 1:return i.sent(),[2,e]}}))}))},e.prototype.deregister=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,u.mG)(this,void 0,void 0,(function(){var e,n,r=this;return(0,u.Jh)(this,(function(i){switch(i.label){case 0:return e=b._.system(),n=t.map((function(t){var n=r.queue.plugins.find((function(e){return e.name===t}));if(n)return r.queue.deregister(e,n,r);e.log("warn","plugin ".concat(t," not found"))})),[4,Promise.all(n)];case 1:return i.sent(),[2,e]}}))}))},e.prototype.debug=function(t){return!1===t&&localStorage.getItem("debug")&&localStorage.removeItem("debug"),this._debug=t,this},e.prototype.reset=function(){this._user.reset(),this._group.reset(),this.emit("reset")},e.prototype.timeout=function(t){this.settings.timeout=t},e.prototype._dispatch=function(t,e){return(0,u.mG)(this,void 0,void 0,(function(){var n;return(0,u.Jh)(this,(function(r){return n=new b._(t),(0,y.s)()&&!this.options.retryQueue?[2,n]:[2,S(n,this.queue,this,{callback:e,debug:this._debug,timeout:this.settings.timeout})]}))}))},e.prototype.addSourceMiddleware=function(t){return(0,u.mG)(this,void 0,void 0,(function(){var e=this;return(0,u.Jh)(this,(function(r){switch(r.label){case 0:return[4,this.queue.criticalTasks.run((function(){return(0,u.mG)(e,void 0,void 0,(function(){var e,r,i;return(0,u.Jh)(this,(function(o){switch(o.label){case 0:return[4,Promise.resolve().then(n.bind(n,66170))];case 1:return e=o.sent().sourceMiddlewarePlugin,r={},this.queue.plugins.forEach((function(t){if("destination"===t.type)return r[t.name]=!0})),i=e(t,r),[4,this.register(i)];case 2:return o.sent(),[2]}}))}))}))];case 1:return r.sent(),[2,this]}}))}))},e.prototype.addDestinationMiddleware=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this.queue.plugins.filter(U).forEach((function(n){"*"!==t&&n.name.toLowerCase()!==t.toLowerCase()||n.addMiddleware.apply(n,e)})),Promise.resolve(this)},e.prototype.setAnonymousId=function(t){return this._user.anonymousId(t)},e.prototype.queryString=function(t){return(0,u.mG)(this,void 0,void 0,(function(){return(0,u.Jh)(this,(function(e){switch(e.label){case 0:return!1===this.options.useQueryString?[2,[]]:[4,n.e(3096).then(n.bind(n,46167))];case 1:return[2,(0,e.sent().queryString)(this,t)]}}))}))},e.prototype.use=function(t){return t(this),this},e.prototype.ready=function(t){return void 0===t&&(t=function(t){return t}),(0,u.mG)(this,void 0,void 0,(function(){return(0,u.Jh)(this,(function(e){return[2,Promise.all(this.queue.plugins.map((function(t){return t.ready?t.ready():Promise.resolve()}))).then((function(e){return t(e),e}))]}))}))},e.prototype.noConflict=function(){return console.warn(kt),(0,ft.ql)(null!==Et&&void 0!==Et?Et:this),this},e.prototype.normalize=function(t){return console.warn(kt),this.eventFactory.normalize(t)},Object.defineProperty(e.prototype,"failedInitializations",{get:function(){return console.warn(kt),this.queue.failedInitializations},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"VERSION",{get:function(){return lt.i},enumerable:!1,configurable:!0}),e.prototype.initialize=function(t,e){return(0,u.mG)(this,void 0,void 0,(function(){return(0,u.Jh)(this,(function(t){return console.warn(kt),[2,Promise.resolve(this)]}))}))},e.prototype.pageview=function(t){return(0,u.mG)(this,void 0,void 0,(function(){return(0,u.Jh)(this,(function(e){switch(e.label){case 0:return console.warn(kt),[4,this.page({path:t})];case 1:return e.sent(),[2,this]}}))}))},Object.defineProperty(e.prototype,"plugins",{get:function(){var t;return console.warn(kt),null!==(t=this._plugins)&&void 0!==t?t:{}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Integrations",{get:function(){return console.warn(kt),this.queue.plugins.filter((function(t){return"destination"===t.type})).reduce((function(t,e){var n="".concat(e.name.toLowerCase().replace(".","").split(" ").join("-"),"Integration"),r=window[n];if(!r)return t;var i=r.Integration;return i?(t[e.name]=i,t):(t[e.name]=r,t)}),{})},enumerable:!1,configurable:!0}),e.prototype.push=function(t){var e=t.shift();e&&!this[e]||this[e].apply(this,t)},e}(k.Q),At=function(t){function e(){var e=t.call(this,{writeKey:""},{disableClientPersistence:!0})||this;return e.initialized=!0,e}return(0,u.ZT)(e,t),e}(Tt),Rt=n(913),Mt=n(15987),Nt=n(7227),Lt=n(67475);function Dt(t){return(0,u.mG)(this,void 0,void 0,(function(){var e;return(0,u.Jh)(this,(function(n){return(e=navigator.userAgentData)?t?[2,e.getHighEntropyValues(t).catch((function(){return e.toJSON()}))]:[2,e.toJSON()]:[2,void 0]}))}))}function Pt(){if(Ot)return Ot;var t=$(window.location.href);return Ot={expires:31536e6,secure:!1,path:"/"},t&&(Ot.domain=t),Ot}var jt=function(){var t=this;this.name="Page Enrichment",this.type="before",this.version="0.1.0",this.isLoaded=function(){return!0},this.load=function(e,n){return(0,u.mG)(t,void 0,void 0,(function(){var t;return(0,u.Jh)(this,(function(e){switch(e.label){case 0:this.instance=n,e.label=1;case 1:return e.trys.push([1,3,,4]),t=this,[4,Dt(this.instance.options.highEntropyValuesClientHints)];case 2:return t.userAgentData=e.sent(),[3,4];case 3:return e.sent(),[3,4];case 4:return[2,Promise.resolve()]}}))}))},this.enrich=function(e){var n,r,i=e.event.context,o=i.page.search||"",a="object"===typeof o?function(t){try{var e=new URLSearchParams;return Object.entries(t).forEach((function(t){var n=t[0],r=t[1];Array.isArray(r)?r.forEach((function(t){return e.append(n,t)})):e.append(n,r)})),e.toString()}catch(n){return""}}(o):o;i.userAgent=navigator.userAgent,i.userAgentData=t.userAgentData;var s=navigator.userLanguage||navigator.language;"undefined"===typeof i.locale&&"undefined"!==typeof s&&(i.locale=s),null!==(n=i.library)&&void 0!==n||(i.library={name:"analytics.js",version:"".concat("web"===(0,Nt.B)()?"next":"npm:next","-").concat(lt.i)}),a&&!i.campaign&&(i.campaign=function(t){return t.startsWith("?")&&(t=t.substring(1)),(t=t.replace(/\?/g,"&")).split("&").reduce((function(t,e){var n=e.split("="),r=n[0],i=n[1],o=void 0===i?"":i;if(r.includes("utm_")&&r.length>4){var a=r.slice(4);"campaign"===a&&(a="name"),t[a]=(0,Lt.a)(o)}return t}),{})}(a));var c=function(){var t=Z.get("_ga");if(t&&t.startsWith("amp"))return t}();c&&(i.amp={id:c}),function(t,e,n){var r,i=new ot(n?[]:[new X(Pt())]),o=i.get("s:context.referrer"),a=null!==(r=function(t){var e={btid:"dataxu",urid:"millennial-media"};t.startsWith("?")&&(t=t.substring(1));for(var n=0,r=(t=t.replace(/\?/g,"&")).split("&");n<r.length;n++){var i=r[n].split("="),o=i[0],a=i[1];if(e[o])return{id:a,type:e[o]}}}(t))&&void 0!==r?r:o;a&&(e&&(e.referrer=(0,u.pi)((0,u.pi)({},e.referrer),a)),i.set("s:context.referrer",a))}(a,i,null!==(r=t.instance.options.disableClientPersistence)&&void 0!==r&&r);try{i.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(l){}return e},this.track=this.enrich,this.identify=this.enrich,this.page=this.enrich,this.group=this.enrich,this.alias=this.enrich,this.screen=this.enrich},Ft=new jt,Ut=n(66548),Bt=n(66170),zt=n(92311),Vt=function(){function t(t,e){this.version="1.0.0",this.alternativeNames=[],this.loadPromise=(0,Mt.d)(),this.middleware=[],this.alias=this._createMethod("alias"),this.group=this._createMethod("group"),this.identify=this._createMethod("identify"),this.page=this._createMethod("page"),this.screen=this._createMethod("screen"),this.track=this._createMethod("track"),this.action=e,this.name=t,this.type=e.type,this.alternativeNames.push(e.name)}return t.prototype.addMiddleware=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];"destination"===this.type&&(t=this.middleware).push.apply(t,e)},t.prototype.transform=function(t){return(0,u.mG)(this,void 0,void 0,(function(){var e;return(0,u.Jh)(this,(function(n){switch(n.label){case 0:return[4,(0,Bt.applyDestinationMiddleware)(this.name,t.event,this.middleware)];case 1:return null===(e=n.sent())&&t.cancel(new V.Y({retry:!1,reason:"dropped by destination middleware"})),[2,new b._(e)]}}))}))},t.prototype._createMethod=function(t){var e=this;return function(n){return(0,u.mG)(e,void 0,void 0,(function(){var e,r;return(0,u.Jh)(this,(function(i){switch(i.label){case 0:return this.action[t]?(e=n,"destination"!==this.type?[3,2]:[4,this.transform(n)]):[2,n];case 1:e=i.sent(),i.label=2;case 2:return i.trys.push([2,5,,6]),[4,this.ready()];case 3:if(!i.sent())throw new Error("Something prevented the destination from getting ready");return(0,zt.z)(n,{integrationName:this.action.name,methodName:t,type:"action"}),[4,this.action[t](e)];case 4:return i.sent(),[3,6];case 5:throw r=i.sent(),(0,zt.z)(n,{integrationName:this.action.name,methodName:t,type:"action",didError:!0}),r;case 6:return[2,n]}}))}))}},t.prototype.isLoaded=function(){return this.action.isLoaded()},t.prototype.ready=function(){return(0,u.mG)(this,void 0,void 0,(function(){return(0,u.Jh)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.loadPromise.promise];case 1:return t.sent(),[2,!0];case 2:return t.sent(),[2,!1];case 3:return[2]}}))}))},t.prototype.load=function(t,e){return(0,u.mG)(this,void 0,void 0,(function(){var n,r,i,o;return(0,u.Jh)(this,(function(a){switch(a.label){case 0:if(this.loadPromise.isSettled())return[2,this.loadPromise.promise];a.label=1;case 1:return a.trys.push([1,3,,4]),(0,zt.z)(t,{integrationName:this.action.name,methodName:"load",type:"action"}),n=this.action.load(t,e),i=(r=this.loadPromise).resolve,[4,n];case 2:return i.apply(r,[a.sent()]),[2,n];case 3:throw o=a.sent(),(0,zt.z)(t,{integrationName:this.action.name,methodName:"load",type:"action",didError:!0}),this.loadPromise.reject(o),o;case 4:return[2]}}))}))},t.prototype.unload=function(t,e){var n,r;return null===(r=(n=this.action).unload)||void 0===r?void 0:r.call(n,t,e)},t}();function qt(t,e){return(0,u.mG)(this,void 0,void 0,(function(){var n,r,i,o,a;return(0,u.Jh)(this,(function(s){switch(s.label){case 0:if(n=new RegExp("https://cdn.segment.(com|build)"),r=(0,d.Vl)(),!e)return[3,6];i=t.url.split("/"),o=i[i.length-2],a=t.url.replace(o,btoa(o).replace(/=/g,"")),s.label=1;case 1:return s.trys.push([1,3,,5]),[4,(0,Ut.v)(a.replace(n,r))];case 2:return s.sent(),[3,5];case 3:return s.sent(),[4,(0,Ut.v)(t.url.replace(n,r))];case 4:return s.sent(),[3,5];case 5:return[3,8];case 6:return[4,(0,Ut.v)(t.url.replace(n,r))];case 7:s.sent(),s.label=8;case 8:return"function"===typeof window[t.libraryName]?[2,window[t.libraryName]]:[2]}}))}))}function Gt(t,e,n,r,i,o){var a,s,c;return(0,u.mG)(this,void 0,void 0,(function(){var l,d,f,p=this;return(0,u.Jh)(this,(function(h){switch(h.label){case 0:return l=[],d=null!==(s=null===(a=t.middlewareSettings)||void 0===a?void 0:a.routingRules)&&void 0!==s?s:[],f=(null!==(c=t.remotePlugins)&&void 0!==c?c:[]).map((function(t){return(0,u.mG)(p,void 0,void 0,(function(){var a,s,c,f,p,h;return(0,u.Jh)(this,(function(v){switch(v.label){case 0:if(function(t,e){var n=t[e.creationName],r=t[e.name];return!1===t.All&&!n&&!r||!1===n||!1===r}(e,t))return[2];v.label=1;case 1:return v.trys.push([1,6,,7]),(s=null===o||void 0===o?void 0:o.find((function(e){return e.pluginName===t.name})))?[3,3]:[4,qt(t,null===r||void 0===r?void 0:r.obfuscate)];case 2:s=v.sent(),v.label=3;case 3:return(a=s)?[4,a((0,u.pi)((0,u.pi)({},t.settings),n[t.name]))]:[3,5];case 4:c=v.sent(),function(t){if(!Array.isArray(t))throw new Error("Not a valid list of plugins");var e=["load","isLoaded","name","version","type"];t.forEach((function(t){e.forEach((function(e){var n;if(void 0===t[e])throw new Error("Plugin: ".concat(null!==(n=t.name)&&void 0!==n?n:"unknown"," missing required function ").concat(e))}))}))}(f=Array.isArray(c)?c:[c]),p=d.filter((function(e){return e.destinationName===t.creationName})),f.forEach((function(e){var n=new Vt(t.creationName,e);p.length&&i&&n.addMiddleware(i),l.push(n)})),v.label=5;case 5:return[3,7];case 6:return h=v.sent(),console.warn("Failed to load Remote Plugin",h),[3,7];case 7:return[2]}}))}))})),[4,Promise.all(f)];case 1:return h.sent(),[2,l.filter(Boolean)]}}))}))}var Ht=n(23888);function Jt(t){return(encodeURI(JSON.stringify(t)).split(/%..|./).length-1)/1024}function Kt(t,e){var n,r,i,o=[],a=!1,s=null!==(n=null===e||void 0===e?void 0:e.size)&&void 0!==n?n:10,c=null!==(r=null===e||void 0===e?void 0:e.timeout)&&void 0!==r?r:5e3;function l(e){var n;if(0!==e.length){var r=null===(n=e[0])||void 0===n?void 0:n.writeKey,i=e.map((function(t){var e=t;e.sentAt;return(0,u._T)(e,["sentAt"])}));return(0,f.h)("https://".concat(t,"/b"),{keepalive:a,headers:{"Content-Type":"text/plain"},method:"post",body:JSON.stringify({writeKey:r,batch:i,sentAt:(new Date).toISOString()})})}}function d(){return(0,u.mG)(this,void 0,void 0,(function(){var t;return(0,u.Jh)(this,(function(e){return o.length?(t=o,o=[],[2,l(t)]):[2]}))}))}return function(t){var e=!1;window.addEventListener("pagehide",(function(){e||t(e=!0)})),document.addEventListener("visibilitychange",(function(){if("hidden"==document.visibilityState){if(e)return;e=!0}else e=!1;t(e)}))}((function(t){if((a=t)&&o.length){var e=function(t){var e=[],n=0;return t.forEach((function(t){Jt(e[n])>=64&&n++,e[n]?e[n].push(t):e[n]=[t]})),e}(o).map(l);Promise.all(e).catch(console.error)}})),{dispatch:function(t,e){return(0,u.mG)(this,void 0,void 0,(function(){var t;return(0,u.Jh)(this,(function(n){return o.push(e),t=o.length>=s||function(t){return Jt(t)>=450}(o),[2,t||a?d():void(i||(i=setTimeout((function(){i=void 0,d().catch(console.error)}),c)))]}))}))}}}function Wt(t,e,n,r){var i,o=t.user();delete e.options,e.writeKey=null===n||void 0===n?void 0:n.apiKey,e.userId=e.userId||o.id(),e.anonymousId=e.anonymousId||o.anonymousId(),e.sentAt=new Date;var a=t.queue.failedInitializations||[];a.length>0&&(e._metadata={failedInitializations:a});var s=[],c=[];for(var l in r){var d=r[l];"Segment.io"===l&&s.push(l),"bundled"===d.bundlingStatus&&s.push(l),"unbundled"===d.bundlingStatus&&c.push(l)}for(var f=0,p=(null===n||void 0===n?void 0:n.unbundledIntegrations)||[];f<p.length;f++){var h=p[f];c.includes(h)||c.push(h)}var v=null!==(i=null===n||void 0===n?void 0:n.maybeBundledConfigIds)&&void 0!==i?i:{},m=[];return s.sort().forEach((function(t){var e;(null!==(e=v[t])&&void 0!==e?e:[]).forEach((function(t){m.push(t)}))})),!1!==(null===n||void 0===n?void 0:n.addBundledMetadata)&&(e._metadata=(0,u.pi)((0,u.pi)({},e._metadata),{bundled:s.sort(),unbundled:c.sort(),bundledIds:m})),e}var Zt=n(56749);function $t(t,e){return(0,u.mG)(this,void 0,void 0,(function(){var n,r=this;return(0,u.Jh)(this,(function(i){switch(i.label){case 0:return n=[],(0,y.s)()?[2,e]:[4,(0,Zt.x)((function(){return e.length>0&&!(0,y.s)()}),(function(){return(0,u.mG)(r,void 0,void 0,(function(){var r,i;return(0,u.Jh)(this,(function(o){switch(o.label){case 0:return(r=e.pop())?[4,(0,q.a)(r,t)]:[2];case 1:return i=o.sent(),i instanceof b._||n.push(r),[2]}}))}))}))];case 1:return i.sent(),n.map((function(t){return e.pushWithBackoff(t)})),[2,e]}}))}))}function Xt(t,e,n,r){var i=this;t||setTimeout((function(){return(0,u.mG)(i,void 0,void 0,(function(){var t,i;return(0,u.Jh)(this,(function(o){switch(o.label){case 0:return t=!0,[4,$t(n,e)];case 1:return i=o.sent(),t=!1,e.todo>0&&r(t,i,n,r),[2]}}))}))}),5e3*Math.random())}var Yt,Qt,te=n(36514);function ee(t,e,n){var r,i,o;window.addEventListener("pagehide",(function(){s.push.apply(s,Array.from(c)),c.clear()}));var a=null!==(r=null===e||void 0===e?void 0:e.apiKey)&&void 0!==r?r:"",s=t.options.disableClientPersistence?new z.Z(t.queue.queue.maxAttempts,[]):new B.$(t.queue.queue.maxAttempts,"".concat(a,":dest-Segment.io")),c=new Set,l=!1,d=null!==(i=null===e||void 0===e?void 0:e.apiHost)&&void 0!==i?i:te.U,p=null!==(o=null===e||void 0===e?void 0:e.protocol)&&void 0!==o?o:"https",h="".concat(p,"://").concat(d),v=null===e||void 0===e?void 0:e.deliveryStrategy,m="batching"===(null===v||void 0===v?void 0:v.strategy)?Kt(d,v.config):function(t){return{dispatch:function(e,n){return(0,f.h)(e,{keepalive:null===t||void 0===t?void 0:t.keepalive,headers:{"Content-Type":"text/plain"},method:"post",body:JSON.stringify(n)})}}}(null===v||void 0===v?void 0:v.config);function g(r){return(0,u.mG)(this,void 0,void 0,(function(){var i,o;return(0,u.Jh)(this,(function(a){return(0,y.s)()?(s.push(r),Xt(l,s,b,Xt),[2,r]):(c.add(r),i=r.event.type.charAt(0),o=(0,Ht.D)(r.event).json(),"track"===r.event.type&&delete o.traits,"alias"===r.event.type&&(o=function(t,e){var n,r,i,o,a=t.user();return e.previousId=null!==(i=null!==(r=null!==(n=e.previousId)&&void 0!==n?n:e.from)&&void 0!==r?r:a.id())&&void 0!==i?i:a.anonymousId(),e.userId=null!==(o=e.userId)&&void 0!==o?o:e.to,delete e.from,delete e.to,e}(t,o)),[2,m.dispatch("".concat(h,"/").concat(i),Wt(t,o,e,n)).then((function(){return r})).catch((function(){return s.pushWithBackoff(r),Xt(l,s,b,Xt),r})).finally((function(){c.delete(r)}))])}))}))}var b={name:"Segment.io",type:"destination",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:g,identify:g,page:g,alias:g,group:g,screen:g};return s.todo&&Xt(l,s,b,Xt),b}var ne=null!==(Yt=(Qt=(0,dt.R)()).__SEGMENT_INSPECTOR__)&&void 0!==Yt?Yt:Qt.__SEGMENT_INSPECTOR__={},re=n(42718);function ie(t,e){var n=null!==e&&void 0!==e?e:(0,d.Vl)();return(0,f.h)("".concat(n,"/v1/projects/").concat(t,"/settings")).then((function(t){return t.ok?t.json():t.text().then((function(t){throw new Error(t)}))})).catch((function(t){throw console.error(t.message),t}))}function oe(t,e){return(0,u.mG)(this,void 0,void 0,(function(){return(0,u.Jh)(this,(function(n){switch(n.label){case 0:return[4,ht(t,e)];case 1:return n.sent(),function(t,e){e.toArray().forEach((function(e){setTimeout((function(){_t(t,e).catch(console.error)}),0)}))}(t,e),e.clear(),[2]}}))}))}function ae(t,e,r,i,o,a){var s,c,d;return void 0===o&&(o=[]),(0,u.mG)(this,void 0,void 0,(function(){var f,p,h,v,m,g,y,b,w,_,S,k,x,E,I=this;return(0,u.Jh)(this,(function(C){switch(C.label){case 0:return f=null===o||void 0===o?void 0:o.filter((function(t){return"object"===typeof t})),p=null===o||void 0===o?void 0:o.filter((function(t){return"function"===typeof t&&"string"===typeof t.pluginName})),function(t){var e,n,r;return"test"!==l().NODE_ENV&&(null!==(r=null===(n=null===(e=t.middlewareSettings)||void 0===e?void 0:e.routingRules)||void 0===n?void 0:n.length)&&void 0!==r?r:0)>0}(e)?[4,n.e(4604).then(n.bind(n,37122)).then((function(t){return t.tsubMiddleware(e.middlewareSettings.routingRules)}))]:[3,2];case 1:return v=C.sent(),[3,3];case 2:v=void 0,C.label=3;case 3:return h=v,O=e,"test"!==l().NODE_ENV&&Object.keys(O.integrations).length>1||a.length>0?[4,n.e(9464).then(n.bind(n,92631)).then((function(n){return n.ajsDestinations(t,e,r.integrations,i,h,a)}))]:[3,5];case 4:return g=C.sent(),[3,6];case 5:g=[],C.label=6;case 6:return m=g,e.legacyVideoPluginsEnabled?[4,n.e(8150).then(n.bind(n,66352)).then((function(t){return t.loadLegacyVideoPlugins(r)}))]:[3,8];case 7:C.sent(),C.label=8;case 8:return(null===(s=i.plan)||void 0===s?void 0:s.track)?[4,n.e(7493).then(n.bind(n,70527)).then((function(t){var n;return t.schemaFilter(null===(n=i.plan)||void 0===n?void 0:n.track,e)}))]:[3,10];case 9:return b=C.sent(),[3,11];case 10:b=void 0,C.label=11;case 11:return y=b,w=(0,Rt.o)(e,i),[4,Gt(e,r.integrations,w,i,h,p).catch((function(){return[]}))];case 12:return _=C.sent(),S=(0,u.ev)((0,u.ev)((0,u.ev)([Ft],f,!0),m,!0),_,!0),y&&S.push(y),!1===(null===(c=i.integrations)||void 0===c?void 0:c.All)&&!i.integrations["Segment.io"]||i.integrations&&!1===i.integrations["Segment.io"]?[3,14]:(x=(k=S).push,[4,ee(r,w["Segment.io"],e.integrations)]);case 13:x.apply(k,[C.sent()]),C.label=14;case 14:return[4,r.register.apply(r,S)];case 15:return E=C.sent(),Object.entries(null!==(d=e.enabledMiddleware)&&void 0!==d?d:{}).some((function(t){return t[1]}))?[4,n.e(9214).then(n.bind(n,14783)).then((function(t){var n=t.remoteMiddlewares;return(0,u.mG)(I,void 0,void 0,(function(){var t,o;return(0,u.Jh)(this,(function(a){switch(a.label){case 0:return[4,n(E,e,i.obfuscate)];case 1:return t=a.sent(),o=t.map((function(t){return r.addSourceMiddleware(t)})),[2,Promise.all(o)]}}))}))}))]:[3,17];case 16:C.sent(),C.label=17;case 17:return[2,E]}var O}))}))}function se(t,e,n){var r,i,o,a,s,c,l,f,p,h;return void 0===e&&(e={}),(0,u.mG)(this,void 0,void 0,(function(){var v,m,g,y,w,_,S,k,x,E,I;return(0,u.Jh)(this,(function(C){switch(C.label){case 0:return!0===e.disable?[2,[new At,b._.system()]]:(e.globalAnalyticsKey&&(0,ft.jV)(e.globalAnalyticsKey),t.cdnURL&&(0,d.UH)(t.cdnURL),e.initialPageview&&n.push(new bt("page",[])),null===(r=t.cdnSettings)||void 0===r?[3,1]:(m=r,[3,3]));case 1:return[4,ie(t.writeKey,t.cdnURL)];case 2:m=C.sent(),C.label=3;case 3:return v=m,e.updateCDNSettings&&(v=e.updateCDNSettings(v)),"function"!==typeof e.disable?[3,5]:[4,e.disable(v)];case 4:if(C.sent())return[2,[new At,b._.system()]];C.label=5;case 5:return g=null===(o=null===(i=v.integrations["Segment.io"])||void 0===i?void 0:i.retryQueue)||void 0===o||o,e=(0,u.pi)({retryQueue:g},e),function(t){var e;null===(e=ne.attach)||void 0===e||e.call(ne,t)}(y=new Tt((0,u.pi)((0,u.pi)({},t),{cdnSettings:v}),e)),w=null!==(a=t.plugins)&&void 0!==a?a:[],_=null!==(s=t.classicIntegrations)&&void 0!==s?s:[],S=null===(c=e.integrations)||void 0===c?void 0:c["Segment.io"],re.j.initRemoteMetrics((0,u.pi)((0,u.pi)({},v.metrics),{host:null!==(l=null===S||void 0===S?void 0:S.apiHost)&&void 0!==l?l:null===(f=v.metrics)||void 0===f?void 0:f.host,protocol:null===S||void 0===S?void 0:S.protocol})),function(t,e){mt(t,e),vt(t,e)}(y,n),[4,ae(t.writeKey,v,y,e,w,_)];case 6:return k=C.sent(),x=null!==(p=window.location.search)&&void 0!==p?p:"",E=null!==(h=window.location.hash)&&void 0!==h?h:"",(I=x.length?x:E.replace(/(?=#).*(?=\?)/,"")).includes("ajs_")?[4,y.queryString(I).catch(console.error)]:[3,8];case 7:C.sent(),C.label=8;case 8:return y.initialized=!0,y.emit("initialize",t,e),[4,oe(y,n)];case 9:return C.sent(),[2,[y,k]]}}))}))}var ue=function(t){function e(){var e=this,n=(0,Mt.d)(),r=n.promise,i=n.resolve;return e=t.call(this,(function(t){return r.then((function(e){return se(e[0],e[1],t)}))}))||this,e._resolveLoadStart=function(t,e){return i([t,e])},e}return(0,u.ZT)(e,t),e.prototype.load=function(t,e){return void 0===e&&(e={}),this._resolveLoadStart(t,e),this},e.load=function(t,n){return void 0===n&&(n={}),(new e).load(t,n)},e.standalone=function(t,n){return e.load({writeKey:t},n).then((function(t){return t[0]}))},e}(St),ce=n(81361),le=n(51663),de=n(11163),fe=n(14181),pe=function(t){var e=new URL(t).searchParams;return""===e.toString()?{}:{urlParams:e.toString(),utmTerm:e.get("utm_term")||void 0,utmContent:e.get("utm_content")||void 0,utmSource:e.get("utm_source")||void 0,utmMedium:e.get("utm_medium")||void 0}},he=n(13076),ve=n(90344),me=n(97660),ge=n(87078),ye=n(96552);function be(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function we(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){be(t,e,n[e])}))}return t}function _e(){if(fe.Qg&&(0,he.f)())try{var t=localStorage.getItem("gb_user_id");if(!t){var e=(0,me.Do)("ajs_anonymous_id");if(!e)try{e=window.crypto.randomUUID(),window.analytics&&window.analytics.setAnonymousId(e)}catch(n){(0,ve.H)(n,"Error in useGrowthBookSetup getSegmentAnonId window.crypto.randomUUID"),console.error("Error in getSegmentAnonId first !existingId conditional check:",n)}if(!e)return;localStorage.setItem("gb_user_id",e),t=e}return t}catch(n){console.error("Error in getSegmentAnonId:",n)}}var Se=n(53669),ke=fe.Cg?function(){}:function(t){var e=(0,ce.NQ)(),n=(0,de.useRouter)(),r=null===e||void 0===e?void 0:e.getFeatureValue(t,""),i=(0,a.useCallback)((function(t){r&&r!==t?((0,ye.f)("EFFECT:HANDLER:REDIRECT:: ".concat(t," ").concat(r),"log"),n.push(r)):(0,ye.f)("EFFECT:HANDLER:NO_REDIRECT:: ".concat(t," ").concat(r||"No Redirect Value Set"),"log")}),[n,r]);(0,a.useEffect)((function(){var t=n.asPath.split("?")[0];return(0,ye.f)("GROWTHBOOK_REDIRECT:Effect:Mount:: ".concat(t," ").concat(r||"No Redirect"),"log"),r&&r!==t&&((0,ye.f)("GROWTHBOOK_REDIRECT:Effect:Redirect:: ".concat(t," ").concat(r||"No Redirect"),"log"),n.push(r),n.events.on("routeChangeComplete",i)),function(){return n.events.off("routeChangeComplete",i)}}),[n,r,i])},xe=function(t){switch(!0){case t.indexOf("edge")>-1:return"MS Edge";case t.indexOf("edg/")>-1:return"Edge ( chromium based)";case t.indexOf("opera mini")>-1&&!!window.opr:return"Opera Mini";case t.indexOf("opr")>-1&&!!window.opr:return"Opera";case t.indexOf("chrome")>-1&&!!window.chrome:return"Chrome";case t.indexOf("trident")>-1:return"MS IE";case t.indexOf("firefox")>-1:return"Mozilla Firefox";case t.indexOf("safari")>-1:return"Safari";default:return"other"}};function Ee(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ie(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return Ee(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ee(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ce,Oe=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator.userAgent,e=Ie(t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],2),n=(e[0],e[1]);if("Safari"!==n)return!0;var r=t.match(/version\/(\d+)/i);if(!r)return!0;var i=Number.parseInt(r[1],10);return i>14};!function(t){t[t.None=0]="None",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Verbose=3]="Verbose",t[t.Debug=4]="Debug"}(Ce||(Ce={}));var Te,Ae=function(t){return void 0===t&&(t=0),((new Error).stack||"").split("\n").slice(2+t).map((function(t){return t.trim()}))},Re=function(t,e,n,r,i){return void 0===i&&(i=null),function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var s=n(),u=s.logger,c=s.logLevel;if(c&&c<Ce.Debug||!c||!u)return t.apply(i,o);var l={type:"invoke public method",name:e,args:o,stacktrace:Ae(1),time:{start:(new Date).toISOString()},states:{}};r&&l.states&&(l.states.before=r());var d=t.apply(i,o);return d&&d.promise?d.promise.then((function(){r&&l.states&&(l.states.after=r()),l.time&&(l.time.end=(new Date).toISOString()),u.debug(JSON.stringify(l,null,2))})):(r&&l.states&&(l.states.after=r()),l.time&&(l.time.end=(new Date).toISOString()),u.debug(JSON.stringify(l,null,2))),d}};!function(t){t.Unknown="unknown",t.Skipped="skipped",t.Success="success",t.RateLimit="rate_limit",t.PayloadTooLarge="payload_too_large",t.Invalid="invalid",t.Failed="failed",t.Timeout="Timeout",t.SystemError="SystemError"}(Te||(Te={}));var Me,Ne=function(){function t(){}return t.prototype.send=function(t,e){return Promise.resolve(null)},t.prototype.buildResponse=function(t){var e,n,r,i,o,a,s,u,c,l,d,f,p,h,v,m,g,y,b,w,_,S;if("object"!==typeof t)return null;var k=t.code||0,x=this.buildStatus(k);switch(x){case Te.Success:return{status:x,statusCode:k,body:{eventsIngested:null!==(e=t.events_ingested)&&void 0!==e?e:0,payloadSizeBytes:null!==(n=t.payload_size_bytes)&&void 0!==n?n:0,serverUploadTime:null!==(r=t.server_upload_time)&&void 0!==r?r:0}};case Te.Invalid:return{status:x,statusCode:k,body:{error:null!==(i=t.error)&&void 0!==i?i:"",missingField:null!==(o=t.missing_field)&&void 0!==o?o:"",eventsWithInvalidFields:null!==(a=t.events_with_invalid_fields)&&void 0!==a?a:{},eventsWithMissingFields:null!==(s=t.events_with_missing_fields)&&void 0!==s?s:{},eventsWithInvalidIdLengths:null!==(u=t.events_with_invalid_id_lengths)&&void 0!==u?u:{},epsThreshold:null!==(c=t.eps_threshold)&&void 0!==c?c:0,exceededDailyQuotaDevices:null!==(l=t.exceeded_daily_quota_devices)&&void 0!==l?l:{},silencedDevices:null!==(d=t.silenced_devices)&&void 0!==d?d:[],silencedEvents:null!==(f=t.silenced_events)&&void 0!==f?f:[],throttledDevices:null!==(p=t.throttled_devices)&&void 0!==p?p:{},throttledEvents:null!==(h=t.throttled_events)&&void 0!==h?h:[]}};case Te.PayloadTooLarge:return{status:x,statusCode:k,body:{error:null!==(v=t.error)&&void 0!==v?v:""}};case Te.RateLimit:return{status:x,statusCode:k,body:{error:null!==(m=t.error)&&void 0!==m?m:"",epsThreshold:null!==(g=t.eps_threshold)&&void 0!==g?g:0,throttledDevices:null!==(y=t.throttled_devices)&&void 0!==y?y:{},throttledUsers:null!==(b=t.throttled_users)&&void 0!==b?b:{},exceededDailyQuotaDevices:null!==(w=t.exceeded_daily_quota_devices)&&void 0!==w?w:{},exceededDailyQuotaUsers:null!==(_=t.exceeded_daily_quota_users)&&void 0!==_?_:{},throttledEvents:null!==(S=t.throttled_events)&&void 0!==S?S:[]}};case Te.Timeout:default:return{status:x,statusCode:k}}},t.prototype.buildStatus=function(t){return t>=200&&t<300?Te.Success:429===t?Te.RateLimit:413===t?Te.PayloadTooLarge:408===t?Te.Timeout:t>=400&&t<500?Te.Invalid:t>=500?Te.Failed:Te.Unknown},t}(),Le=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,u.ZT)(e,t),e.prototype.send=function(t,e){return(0,u.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,u.Jh)(this,(function(o){switch(o.label){case 0:if("undefined"===typeof fetch)throw new Error("FetchTransport is not supported");return n={headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify(e),method:"POST"},[4,fetch(t,n)];case 1:return[4,(r=o.sent()).text()];case 2:i=o.sent();try{return[2,this.buildResponse(JSON.parse(i))]}catch(Qt){return[2,this.buildResponse({code:r.status})]}return[2]}}))}))},e}(Ne),De="Amplitude Logger ",Pe=function(){function t(){this.logLevel=Ce.None}return t.prototype.disable=function(){this.logLevel=Ce.None},t.prototype.enable=function(t){void 0===t&&(t=Ce.Warn),this.logLevel=t},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.logLevel<Ce.Verbose||console.log("".concat(De,"[Log]: ").concat(t.join(" ")))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.logLevel<Ce.Warn||console.warn("".concat(De,"[Warn]: ").concat(t.join(" ")))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.logLevel<Ce.Error||console.error("".concat(De,"[Error]: ").concat(t.join(" ")))},t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.logLevel<Ce.Debug||console.log("".concat(De,"[Debug]: ").concat(t.join(" ")))},t}(),je="".concat("AMP","_unsent"),Fe="https://api2.amplitude.com/2/httpapi",Ue=function(){return{flushMaxRetries:12,flushQueueSize:200,flushIntervalMillis:1e4,instanceName:"$default_instance",logLevel:Ce.Warn,loggerProvider:new Pe,offline:!1,optOut:!1,serverUrl:Fe,serverZone:"US",useBatch:!1}},Be=function(){function t(t){var e,n,r,i;this._optOut=!1;var o=Ue();this.apiKey=t.apiKey,this.flushIntervalMillis=null!==(e=t.flushIntervalMillis)&&void 0!==e?e:o.flushIntervalMillis,this.flushMaxRetries=t.flushMaxRetries||o.flushMaxRetries,this.flushQueueSize=t.flushQueueSize||o.flushQueueSize,this.instanceName=t.instanceName||o.instanceName,this.loggerProvider=t.loggerProvider||o.loggerProvider,this.logLevel=null!==(n=t.logLevel)&&void 0!==n?n:o.logLevel,this.minIdLength=t.minIdLength,this.plan=t.plan,this.ingestionMetadata=t.ingestionMetadata,this.offline=void 0!==t.offline?t.offline:o.offline,this.optOut=null!==(r=t.optOut)&&void 0!==r?r:o.optOut,this.serverUrl=t.serverUrl,this.serverZone=t.serverZone||o.serverZone,this.storageProvider=t.storageProvider,this.transportProvider=t.transportProvider,this.useBatch=null!==(i=t.useBatch)&&void 0!==i?i:o.useBatch,this.loggerProvider.enable(this.logLevel);var a=Ve(t.serverUrl,t.serverZone,t.useBatch);this.serverZone=a.serverZone,this.serverUrl=a.serverUrl}return Object.defineProperty(t.prototype,"optOut",{get:function(){return this._optOut},set:function(t){this._optOut=t},enumerable:!1,configurable:!0}),t}(),ze=function(t,e){return"EU"===t?e?"https://api.eu.amplitude.com/batch":"https://api.eu.amplitude.com/2/httpapi":e?"https://api2.amplitude.com/batch":Fe},Ve=function(t,e,n){if(void 0===t&&(t=""),void 0===e&&(e=Ue().serverZone),void 0===n&&(n=Ue().useBatch),t)return{serverUrl:t,serverZone:void 0};var r=["US","EU"].includes(e)?e:Ue().serverZone;return{serverZone:r,serverUrl:ze(r,n)}};!function(t){t.US="US",t.EU="EU"}(Me||(Me={}));var qe="[Amplitude]",Ge="".concat(qe," Session Replay ID"),He=Me.US,Je="".concat(qe," Session Replay Debug"),Ke="amp-mask",We=("".concat("AMP","_replay_unsent"),function(){return{flushMaxRetries:2,logLevel:Ce.Warn,loggerProvider:new Pe,transportProvider:new Le}}),Ze=function(t){function e(e,n){var r=this,i=We();return(r=t.call(this,(0,u.pi)((0,u.pi)({transportProvider:i.transportProvider},n),{apiKey:e}))||this).flushMaxRetries=void 0!==n.flushMaxRetries&&n.flushMaxRetries<=i.flushMaxRetries?n.flushMaxRetries:i.flushMaxRetries,r.apiKey=e,r.sampleRate=n.sampleRate||0,r.serverZone=n.serverZone||He,r.configEndpointUrl=n.configEndpointUrl,r.shouldInlineStylesheet=n.shouldInlineStylesheet,n.privacyConfig&&(r.privacyConfig=n.privacyConfig),n.debugMode&&(r.debugMode=n.debugMode),r}return(0,u.ZT)(e,t),e}(Be),$e=function(){return"undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.ampIntegrationContext?globalThis.ampIntegrationContext:"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof self?self:"undefined"!==typeof n.g?n.g:void 0},Xe=function(){function t(){}return t.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:Ye(),platform:"Web",os:void 0,deviceModel:void 0}},t}(),Ye=function(){return"undefined"!==typeof navigator&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},Qe=function(){function t(){this.queue=[]}return t.prototype.logEvent=function(t){this.receiver?this.receiver(t):this.queue.length<512&&this.queue.push(t)},t.prototype.setEventReceiver=function(t){this.receiver=t,this.queue.length>0&&(this.queue.forEach((function(e){t(e)})),this.queue=[])},t}(),tn=function(){return tn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},tn.apply(this,arguments)},en=function(t,e){var n=typeof t;if(n!==typeof e)return!1;for(var r=0,i=["string","number","boolean","undefined"];r<i.length;r++){if(i[r]===n)return t===e}if(null==t&&null==e)return!0;if(null==t||null==e)return!1;if(t.length!==e.length)return!1;var o=Array.isArray(t),a=Array.isArray(e);if(o!==a)return!1;if(!o||!a){var s=Object.keys(t).sort(),u=Object.keys(e).sort();if(!en(s,u))return!1;var c=!0;return Object.keys(t).forEach((function(n){en(t[n],e[n])||(c=!1)})),c}for(var l=0;l<t.length;l++)if(!en(t[l],e[l]))return!1;return!0};Object.entries||(Object.entries=function(t){for(var e=Object.keys(t),n=e.length,r=new Array(n);n--;)r[n]=[e[n],t[e[n]]];return r});var nn,rn=function(){function t(){this.identity={userProperties:{}},this.listeners=new Set}return t.prototype.editIdentity=function(){var t=this,e=tn({},this.identity.userProperties),n=tn(tn({},this.identity),{userProperties:e});return{setUserId:function(t){return n.userId=t,this},setDeviceId:function(t){return n.deviceId=t,this},setUserProperties:function(t){return n.userProperties=t,this},setOptOut:function(t){return n.optOut=t,this},updateUserProperties:function(t){for(var e=n.userProperties||{},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r],a=o[0],s=o[1];switch(a){case"$set":for(var u=0,c=Object.entries(s);u<c.length;u++){var l=c[u],d=l[0],f=l[1];e[d]=f}break;case"$unset":for(var p=0,h=Object.keys(s);p<h.length;p++){delete e[d=h[p]]}break;case"$clearAll":e={}}}return n.userProperties=e,this},commit:function(){return t.setIdentity(n),this}}},t.prototype.getIdentity=function(){return tn({},this.identity)},t.prototype.setIdentity=function(t){var e=tn({},this.identity);this.identity=tn({},t),en(e,this.identity)||this.listeners.forEach((function(e){e(t)}))},t.prototype.addIdentityListener=function(t){this.listeners.add(t)},t.prototype.removeIdentityListener=function(t){this.listeners.delete(t)},t}(),on="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof n.g?n.g:self,an=function(){function t(){this.identityStore=new rn,this.eventBridge=new Qe,this.applicationContextProvider=new Xe}return t.getInstance=function(e){return on.analyticsConnectorInstances||(on.analyticsConnectorInstances={}),on.analyticsConnectorInstances[e]||(on.analyticsConnectorInstances[e]=new t),on.analyticsConnectorInstances[e]},t}(),sn=function(t){return void 0===t&&(t="$default_instance"),an.getInstance(t)},un=function(t){return{promise:t||Promise.resolve()}};function cn(t){return t.nodeType===t.ELEMENT_NODE}function ln(t){const e=null===t||void 0===t?void 0:t.host;return Boolean((null===e||void 0===e?void 0:e.shadowRoot)===t)}function dn(t){return"[object ShadowRoot]"===Object.prototype.toString.call(t)}function fn(t){try{const n=t.rules||t.cssRules;return n?((e=Array.from(n,pn).join("")).includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),e):null}catch(n){return null}var e}function pn(t){let e;if(function(t){return"styleSheet"in t}(t))try{e=fn(t.styleSheet)||function(t){const{cssText:e}=t;if(e.split('"').length<3)return e;const n=["@import",`url(${JSON.stringify(t.href)})`];return""===t.layerName?n.push("layer"):t.layerName&&n.push(`layer(${t.layerName})`),t.supportsText&&n.push(`supports(${t.supportsText})`),t.media.length&&n.push(t.media.mediaText),n.join(" ")+";"}(t)}catch(n){}else if(function(t){return"selectorText"in t}(t)&&t.selectorText.includes(":"))return function(t){const e=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return t.replace(e,"$1\\$2")}(t.cssText);return e||t.cssText}!function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"}(nn||(nn={}));class hn{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(t){var e;if(!t)return-1;const n=null===(e=this.getMeta(t))||void 0===e?void 0:e.id;return null!==n&&void 0!==n?n:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const e=this.getId(t);this.idNodeMap.delete(e),t.childNodes&&t.childNodes.forEach((t=>this.removeNodeFromMap(t)))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,e){const n=e.id;this.idNodeMap.set(n,t),this.nodeMetaMap.set(t,e)}replace(t,e){const n=this.getNode(t);if(n){const t=this.nodeMetaMap.get(n);t&&this.nodeMetaMap.set(e,t)}this.idNodeMap.set(t,e)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function vn({element:t,maskInputOptions:e,tagName:n,type:r,value:i,maskInputFn:o}){let a=i||"";const s=r&&mn(r);return(e[n.toLowerCase()]||s&&e[s])&&(a=o?o(a,t):"*".repeat(a.length)),a}function mn(t){return t.toLowerCase()}const gn="__rrweb_original__";function yn(t){const e=t.type;return t.hasAttribute("data-rr-is-password")?"password":e?mn(e):null}let bn=1;const wn=new RegExp("[^a-z0-9-_:]");function _n(){return bn++}let Sn,kn;const xn=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,En=/^(?:[a-z+]+:)?\/\//i,In=/^www\..*/i,Cn=/^(data:)([^,]*),(.*)/i;function On(t,e){return(t||"").replace(xn,((t,n,r,i,o,a)=>{const s=r||o||a,u=n||i||"";if(!s)return t;if(En.test(s)||In.test(s))return`url(${u}${s}${u})`;if(Cn.test(s))return`url(${u}${s}${u})`;if("/"===s[0])return`url(${u}${function(t){let e="";return e=t.indexOf("//")>-1?t.split("/").slice(0,3).join("/"):t.split("/")[0],e=e.split("?")[0],e}(e)+s}${u})`;const c=e.split("/"),l=s.split("/");c.pop();for(const e of l)"."!==e&&(".."===e?c.pop():c.push(e));return`url(${u}${c.join("/")}${u})`}))}const Tn=/^[^ \t\n\r\u000c]+/,An=/^[, \t\n\r\u000c]+/;function Rn(t,e){if(!e||""===e.trim())return e;const n=t.createElement("a");return n.href=e,n.href}function Mn(t){return Boolean("svg"===t.tagName||t.ownerSVGElement)}function Nn(){const t=document.createElement("a");return t.href="",t.href}function Ln(t,e,n,r){return r?"src"===n||"href"===n&&("use"!==e||"#"!==r[0])||"xlink:href"===n&&"#"!==r[0]?Rn(t,r):"background"!==n||"table"!==e&&"td"!==e&&"th"!==e?"srcset"===n?function(t,e){if(""===e.trim())return e;let n=0;function r(t){let r;const i=t.exec(e.substring(n));return i?(r=i[0],n+=r.length,r):""}const i=[];for(;r(An),!(n>=e.length);){let o=r(Tn);if(","===o.slice(-1))o=Rn(t,o.substring(0,o.length-1)),i.push(o);else{let r="";o=Rn(t,o);let a=!1;for(;;){const t=e.charAt(n);if(""===t){i.push((o+r).trim());break}if(a)")"===t&&(a=!1);else{if(","===t){n+=1,i.push((o+r).trim());break}"("===t&&(a=!0)}r+=t,n+=1}}}return i.join(", ")}(t,r):"style"===n?On(r,Nn()):"object"===e&&"data"===n?Rn(t,r):r:Rn(t,r):r}function Dn(t,e,n){return("video"===t||"audio"===t)&&"autoplay"===e}function Pn(t,e,n){if(!t)return!1;if(t.nodeType!==t.ELEMENT_NODE)return!!n&&Pn(t.parentNode,e,n);for(let r=t.classList.length;r--;){const n=t.classList[r];if(e.test(n))return!0}return!!n&&Pn(t.parentNode,e,n)}function jn(t,e,n){try{const r=t.nodeType===t.ELEMENT_NODE?t:t.parentElement;if(null===r)return!1;if("string"===typeof e){if(r.classList.contains(e))return!0;if(r.closest(`.${e}`))return!0}else if(Pn(r,e,!0))return!0;if(n){if(r.matches(n))return!0;if(r.closest(n))return!0}}catch(r){}return!1}function Fn(t,e){const{doc:n,mirror:r,blockClass:i,blockSelector:o,maskTextClass:a,maskTextSelector:s,inlineStylesheet:u,maskInputOptions:c={},maskTextFn:l,maskInputFn:d,dataURLOptions:f={},inlineImages:p,recordCanvas:h,keepIframeSrcFn:v,newlyAddedElement:m=!1}=e,g=function(t,e){if(!e.hasNode(t))return;const n=e.getId(t);return 1===n?void 0:n}(n,r);switch(t.nodeType){case t.DOCUMENT_NODE:return"CSS1Compat"!==t.compatMode?{type:nn.Document,childNodes:[],compatMode:t.compatMode}:{type:nn.Document,childNodes:[]};case t.DOCUMENT_TYPE_NODE:return{type:nn.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId,rootId:g};case t.ELEMENT_NODE:return function(t,e){const{doc:n,blockClass:r,blockSelector:i,inlineStylesheet:o,maskInputOptions:a={},maskInputFn:s,dataURLOptions:u={},inlineImages:c,recordCanvas:l,keepIframeSrcFn:d,newlyAddedElement:f=!1,rootId:p}=e,h=function(t,e,n){try{if("string"===typeof e){if(t.classList.contains(e))return!0}else for(let n=t.classList.length;n--;){const r=t.classList[n];if(e.test(r))return!0}if(n)return t.matches(n)}catch(r){}return!1}(t,r,i),v=function(t){if(t instanceof HTMLFormElement)return"form";const e=mn(t.tagName);return wn.test(e)?"div":e}(t);let m={};const g=t.attributes.length;for(let y=0;y<g;y++){const e=t.attributes[y];Dn(v,e.name,e.value)||(m[e.name]=Ln(n,v,mn(e.name),e.value))}if("link"===v&&o){const e=Array.from(n.styleSheets).find((e=>e.href===t.href));let r=null;e&&(r=fn(e)),r&&(delete m.rel,delete m.href,m._cssText=On(r,e.href))}if("style"===v&&t.sheet&&!(t.innerText||t.textContent||"").trim().length){const e=fn(t.sheet);e&&(m._cssText=On(e,Nn()))}if("input"===v||"textarea"===v||"select"===v){const e=t.value,n=t.checked;if("radio"!==m.type&&"checkbox"!==m.type&&"submit"!==m.type&&"button"!==m.type&&e){const n=yn(t);m.value=vn({element:t,type:n,tagName:v,value:e,maskInputOptions:a,maskInputFn:s})}else n&&(m.checked=n)}"option"===v&&(t.selected&&!a.select?m.selected=!0:delete m.selected);if("canvas"===v&&l)if("2d"===t.__context)(function(t){const e=t.getContext("2d");if(!e)return!0;for(let n=0;n<t.width;n+=50)for(let r=0;r<t.height;r+=50){const i=e.getImageData,o=gn in i?i.__rrweb_original__:i;if(new Uint32Array(o.call(e,n,r,Math.min(50,t.width-n),Math.min(50,t.height-r)).data.buffer).some((t=>0!==t)))return!1}return!0})(t)||(m.rr_dataURL=t.toDataURL(u.type,u.quality));else if(!("__context"in t)){const e=t.toDataURL(u.type,u.quality),n=document.createElement("canvas");n.width=t.width,n.height=t.height;e!==n.toDataURL(u.type,u.quality)&&(m.rr_dataURL=e)}if("img"===v&&c){Sn||(Sn=n.createElement("canvas"),kn=Sn.getContext("2d"));const e=t,r=e.crossOrigin;e.crossOrigin="anonymous";const i=()=>{e.removeEventListener("load",i);try{Sn.width=e.naturalWidth,Sn.height=e.naturalHeight,kn.drawImage(e,0,0),m.rr_dataURL=Sn.toDataURL(u.type,u.quality)}catch(t){console.warn(`Cannot inline img src=${e.currentSrc}! Error: ${t}`)}r?m.crossOrigin=r:e.removeAttribute("crossorigin")};e.complete&&0!==e.naturalWidth?i():e.addEventListener("load",i)}"audio"!==v&&"video"!==v||(m.rr_mediaState=t.paused?"paused":"played",m.rr_mediaCurrentTime=t.currentTime);f||(t.scrollLeft&&(m.rr_scrollLeft=t.scrollLeft),t.scrollTop&&(m.rr_scrollTop=t.scrollTop));if(h){const{width:e,height:n}=t.getBoundingClientRect();m={class:m.class,rr_width:`${e}px`,rr_height:`${n}px`}}"iframe"!==v||d(m.src)||(t.contentDocument||(m.rr_src=m.src),delete m.src);return{type:nn.Element,tagName:v,attributes:m,childNodes:[],isSVG:Mn(t)||void 0,needBlock:h,rootId:p}}(t,{doc:n,blockClass:i,blockSelector:o,inlineStylesheet:u,maskInputOptions:c,maskInputFn:d,dataURLOptions:f,inlineImages:p,recordCanvas:h,keepIframeSrcFn:v,newlyAddedElement:m,rootId:g});case t.TEXT_NODE:return function(t,e){var n;const{maskTextClass:r,maskTextSelector:i,maskTextFn:o,rootId:a}=e,s=t.parentNode&&t.parentNode.tagName;let u=t.textContent;const c="STYLE"===s||void 0,l="SCRIPT"===s||void 0;if(c&&u){try{t.nextSibling||t.previousSibling||(null===(n=t.parentNode.sheet)||void 0===n?void 0:n.cssRules)&&(u=fn(t.parentNode.sheet))}catch(d){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${d}`,t)}u=On(u,Nn())}l&&(u="SCRIPT_PLACEHOLDER");!c&&!l&&u&&jn(t,r,i)&&(u=o?o(u,t.parentElement):u.replace(/[\S]/g,"*"));return{type:nn.Text,textContent:u||"",isStyle:c,rootId:a}}(t,{maskTextClass:a,maskTextSelector:s,maskTextFn:l,rootId:g});case t.CDATA_SECTION_NODE:return{type:nn.CDATA,textContent:"",rootId:g};case t.COMMENT_NODE:return{type:nn.Comment,textContent:t.textContent||"",rootId:g};default:return!1}}function Un(t){return void 0===t||null===t?"":t.toLowerCase()}function Bn(t,e){const{doc:n,mirror:r,blockClass:i,blockSelector:o,maskTextClass:a,maskTextSelector:s,skipChild:u=!1,inlineStylesheet:c=!0,maskInputOptions:l={},maskTextFn:d,maskInputFn:f,slimDOMOptions:p,dataURLOptions:h={},inlineImages:v=!1,recordCanvas:m=!1,onSerialize:g,onIframeLoad:y,iframeLoadTimeout:b=5e3,onStylesheetLoad:w,stylesheetLoadTimeout:_=5e3,keepIframeSrcFn:S=(()=>!1),newlyAddedElement:k=!1}=e;let{preserveWhiteSpace:x=!0}=e;const E=Fn(t,{doc:n,mirror:r,blockClass:i,blockSelector:o,maskTextClass:a,maskTextSelector:s,inlineStylesheet:c,maskInputOptions:l,maskTextFn:d,maskInputFn:f,dataURLOptions:h,inlineImages:v,recordCanvas:m,keepIframeSrcFn:S,newlyAddedElement:k});if(!E)return console.warn(t,"not serialized"),null;let I;I=r.hasNode(t)?r.getId(t):!function(t,e){if(e.comment&&t.type===nn.Comment)return!0;if(t.type===nn.Element){if(e.script&&("script"===t.tagName||"link"===t.tagName&&("preload"===t.attributes.rel||"modulepreload"===t.attributes.rel)&&"script"===t.attributes.as||"link"===t.tagName&&"prefetch"===t.attributes.rel&&"string"===typeof t.attributes.href&&t.attributes.href.endsWith(".js")))return!0;if(e.headFavicon&&("link"===t.tagName&&"shortcut icon"===t.attributes.rel||"meta"===t.tagName&&(Un(t.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===Un(t.attributes.name)||"icon"===Un(t.attributes.rel)||"apple-touch-icon"===Un(t.attributes.rel)||"shortcut icon"===Un(t.attributes.rel))))return!0;if("meta"===t.tagName){if(e.headMetaDescKeywords&&Un(t.attributes.name).match(/^description|keywords$/))return!0;if(e.headMetaSocial&&(Un(t.attributes.property).match(/^(og|twitter|fb):/)||Un(t.attributes.name).match(/^(og|twitter):/)||"pinterest"===Un(t.attributes.name)))return!0;if(e.headMetaRobots&&("robots"===Un(t.attributes.name)||"googlebot"===Un(t.attributes.name)||"bingbot"===Un(t.attributes.name)))return!0;if(e.headMetaHttpEquiv&&void 0!==t.attributes["http-equiv"])return!0;if(e.headMetaAuthorship&&("author"===Un(t.attributes.name)||"generator"===Un(t.attributes.name)||"framework"===Un(t.attributes.name)||"publisher"===Un(t.attributes.name)||"progid"===Un(t.attributes.name)||Un(t.attributes.property).match(/^article:/)||Un(t.attributes.property).match(/^product:/)))return!0;if(e.headMetaVerification&&("google-site-verification"===Un(t.attributes.name)||"yandex-verification"===Un(t.attributes.name)||"csrf-token"===Un(t.attributes.name)||"p:domain_verify"===Un(t.attributes.name)||"verify-v1"===Un(t.attributes.name)||"verification"===Un(t.attributes.name)||"shopify-checkout-api-token"===Un(t.attributes.name)))return!0}}return!1}(E,p)&&(x||E.type!==nn.Text||E.isStyle||E.textContent.replace(/^\s+|\s+$/gm,"").length)?_n():-2;const C=Object.assign(E,{id:I});if(r.add(t,C),-2===I)return null;g&&g(t);let O=!u;if(C.type===nn.Element){O=O&&!C.needBlock,delete C.needBlock;const e=t.shadowRoot;e&&dn(e)&&(C.isShadowHost=!0)}if((C.type===nn.Document||C.type===nn.Element)&&O){p.headWhitespace&&C.type===nn.Element&&"head"===C.tagName&&(x=!1);const e={doc:n,mirror:r,blockClass:i,blockSelector:o,maskTextClass:a,maskTextSelector:s,skipChild:u,inlineStylesheet:c,maskInputOptions:l,maskTextFn:d,maskInputFn:f,slimDOMOptions:p,dataURLOptions:h,inlineImages:v,recordCanvas:m,preserveWhiteSpace:x,onSerialize:g,onIframeLoad:y,iframeLoadTimeout:b,onStylesheetLoad:w,stylesheetLoadTimeout:_,keepIframeSrcFn:S};for(const n of Array.from(t.childNodes)){const t=Bn(n,e);t&&C.childNodes.push(t)}if(cn(t)&&t.shadowRoot)for(const n of Array.from(t.shadowRoot.childNodes)){const r=Bn(n,e);r&&(dn(t.shadowRoot)&&(r.isShadow=!0),C.childNodes.push(r))}}return t.parentNode&&ln(t.parentNode)&&dn(t.parentNode)&&(C.isShadow=!0),C.type===nn.Element&&"iframe"===C.tagName&&function(t,e,n){const r=t.contentWindow;if(!r)return;let i,o=!1;try{i=r.document.readyState}catch(s){return}if("complete"!==i){const r=setTimeout((()=>{o||(e(),o=!0)}),n);return void t.addEventListener("load",(()=>{clearTimeout(r),o=!0,e()}))}const a="about:blank";if(r.location.href!==a||t.src===a||""===t.src)return setTimeout(e,0),t.addEventListener("load",e);t.addEventListener("load",e)}(t,(()=>{const e=t.contentDocument;if(e&&y){const n=Bn(e,{doc:e,mirror:r,blockClass:i,blockSelector:o,maskTextClass:a,maskTextSelector:s,skipChild:!1,inlineStylesheet:c,maskInputOptions:l,maskTextFn:d,maskInputFn:f,slimDOMOptions:p,dataURLOptions:h,inlineImages:v,recordCanvas:m,preserveWhiteSpace:x,onSerialize:g,onIframeLoad:y,iframeLoadTimeout:b,onStylesheetLoad:w,stylesheetLoadTimeout:_,keepIframeSrcFn:S});n&&y(t,n)}}),b),C.type===nn.Element&&"link"===C.tagName&&"stylesheet"===C.attributes.rel&&function(t,e,n){let r,i=!1;try{r=t.sheet}catch(a){return}if(r)return;const o=setTimeout((()=>{i||(e(),i=!0)}),n);t.addEventListener("load",(()=>{clearTimeout(o),i=!0,e()}))}(t,(()=>{if(w){const e=Bn(t,{doc:n,mirror:r,blockClass:i,blockSelector:o,maskTextClass:a,maskTextSelector:s,skipChild:!1,inlineStylesheet:c,maskInputOptions:l,maskTextFn:d,maskInputFn:f,slimDOMOptions:p,dataURLOptions:h,inlineImages:v,recordCanvas:m,preserveWhiteSpace:x,onSerialize:g,onIframeLoad:y,iframeLoadTimeout:b,onStylesheetLoad:w,stylesheetLoadTimeout:_,keepIframeSrcFn:S});e&&w(t,e)}}),_),C}const zn=/(max|min)-device-(width|height)/,Vn=(new RegExp(zn.source,"g"),/([^\\]):hover/);new RegExp(Vn.source,"g");var qn=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(qn||{}),Gn=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t))(Gn||{}),Hn=(t=>(t[t.MouseUp=0]="MouseUp",t[t.MouseDown=1]="MouseDown",t[t.Click=2]="Click",t[t.ContextMenu=3]="ContextMenu",t[t.DblClick=4]="DblClick",t[t.Focus=5]="Focus",t[t.Blur=6]="Blur",t[t.TouchStart=7]="TouchStart",t[t.TouchMove_Departed=8]="TouchMove_Departed",t[t.TouchEnd=9]="TouchEnd",t[t.TouchCancel=10]="TouchCancel",t))(Hn||{}),Jn=(t=>(t[t.Mouse=0]="Mouse",t[t.Pen=1]="Pen",t[t.Touch=2]="Touch",t))(Jn||{}),Kn=(t=>(t[t["2D"]=0]="2D",t[t.WebGL=1]="WebGL",t[t.WebGL2=2]="WebGL2",t))(Kn||{});function Wn(t,e,n=document){const r={capture:!0,passive:!0};return n.addEventListener(t,e,r),()=>n.removeEventListener(t,e,r)}const Zn="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let $n={map:{},getId:()=>(console.error(Zn),-1),getNode:()=>(console.error(Zn),null),removeNodeFromMap(){console.error(Zn)},has:()=>(console.error(Zn),!1),reset(){console.error(Zn)}};function Xn(t,e,n={}){let r=null,i=0;return function(...o){const a=Date.now();i||!1!==n.leading||(i=a);const s=e-(a-i),u=this;s<=0||s>e?(r&&(clearTimeout(r),r=null),i=a,t.apply(u,o)):r||!1===n.trailing||(r=setTimeout((()=>{i=!1===n.leading?0:Date.now(),r=null,t.apply(u,o)}),s))}}function Yn(t,e,n,r,i=window){const o=i.Object.getOwnPropertyDescriptor(t,e);return i.Object.defineProperty(t,e,r?n:{set(t){setTimeout((()=>{n.set.call(this,t)}),0),o&&o.set&&o.set.call(this,t)}}),()=>Yn(t,e,o||{},!0)}function Qn(t,e,n){try{if(!(e in t))return()=>{};const r=t[e],i=n(r);return"function"===typeof i&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:r}})),t[e]=i,()=>{t[e]=r}}catch(Yt){return()=>{}}}"undefined"!==typeof window&&window.Proxy&&window.Reflect&&($n=new Proxy($n,{get:(t,e,n)=>("map"===e&&console.error(Zn),Reflect.get(t,e,n))}));let tr,er=Date.now;function nr(t){var e,n,r,i,o,a;const s=t.document;return{left:s.scrollingElement?s.scrollingElement.scrollLeft:void 0!==t.pageXOffset?t.pageXOffset:(null===s||void 0===s?void 0:s.documentElement.scrollLeft)||(null===(n=null===(e=null===s||void 0===s?void 0:s.body)||void 0===e?void 0:e.parentElement)||void 0===n?void 0:n.scrollLeft)||(null===(r=null===s||void 0===s?void 0:s.body)||void 0===r?void 0:r.scrollLeft)||0,top:s.scrollingElement?s.scrollingElement.scrollTop:void 0!==t.pageYOffset?t.pageYOffset:(null===s||void 0===s?void 0:s.documentElement.scrollTop)||(null===(o=null===(i=null===s||void 0===s?void 0:s.body)||void 0===i?void 0:i.parentElement)||void 0===o?void 0:o.scrollTop)||(null===(a=null===s||void 0===s?void 0:s.body)||void 0===a?void 0:a.scrollTop)||0}}function rr(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function ir(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function or(t){if(!t)return null;return t.nodeType===t.ELEMENT_NODE?t:t.parentElement}function ar(t,e,n,r){if(!t)return!1;const i=or(t);if(!i)return!1;try{if("string"===typeof e){if(i.classList.contains(e))return!0;if(r&&null!==i.closest("."+e))return!0}else if(Pn(i,e,r))return!0}catch(o){}if(n){if(i.matches(n))return!0;if(r&&null!==i.closest(n))return!0}return!1}function sr(t,e){return-2===e.getId(t)}function ur(t,e){if(ln(t))return!1;const n=e.getId(t);return!e.has(n)||(!t.parentNode||t.parentNode.nodeType!==t.DOCUMENT_NODE)&&(!t.parentNode||ur(t.parentNode,e))}function cr(t){return Boolean(t.changedTouches)}function lr(t,e){return Boolean("IFRAME"===t.nodeName&&e.getMeta(t))}function dr(t,e){return Boolean("LINK"===t.nodeName&&t.nodeType===t.ELEMENT_NODE&&t.getAttribute&&"stylesheet"===t.getAttribute("rel")&&e.getMeta(t))}function fr(t){return Boolean(null===t||void 0===t?void 0:t.shadowRoot)}/[1-9][0-9]{12}/.test(Date.now().toString())||(er=()=>(new Date).getTime());class pr{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){var e;return null!==(e=this.styleIDMap.get(t))&&void 0!==e?e:-1}has(t){return this.styleIDMap.has(t)}add(t,e){if(this.has(t))return this.getId(t);let n;return n=void 0===e?this.id++:e,this.styleIDMap.set(t,n),this.idStyleMap.set(n,t),n}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function hr(t){var e,n;let r=null;return(null===(n=null===(e=t.getRootNode)||void 0===e?void 0:e.call(t))||void 0===n?void 0:n.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&t.getRootNode().host&&(r=t.getRootNode().host),r}function vr(t){const e=t.ownerDocument;if(!e)return!1;const n=function(t){let e,n=t;for(;e=hr(n);)n=e;return n}(t);return e.contains(n)}function mr(t){const e=t.ownerDocument;return!!e&&(e.contains(t)||vr(t))}function gr(t){tr=t}function yr(){tr=void 0}const br=t=>{if(!tr)return t;return(...e)=>{try{return t(...e)}catch(n){if(tr&&!0===tr(n))return;throw n}}};function wr(t){return(...e)=>{try{return t(...e)}catch(n){try{n._external_=!0}catch(Yt){}throw n}}}class _r{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,e,n,r){const i=n||this.getIdToRemoteIdMap(t),o=r||this.getRemoteIdToIdMap(t);let a=i.get(e);return a||(a=this.generateIdFn(),i.set(e,a),o.set(a,e)),a}getIds(t,e){const n=this.getIdToRemoteIdMap(t),r=this.getRemoteIdToIdMap(t);return e.map((e=>this.getId(t,e,n,r)))}getRemoteId(t,e,n){const r=n||this.getRemoteIdToIdMap(t);if("number"!==typeof e)return e;const i=r.get(e);return i||-1}getRemoteIds(t,e){const n=this.getRemoteIdToIdMap(t);return e.map((e=>this.getRemoteId(t,e,n)))}reset(t){if(!t)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let e=this.iframeIdToRemoteIdMap.get(t);return e||(e=new Map,this.iframeIdToRemoteIdMap.set(t,e)),e}getRemoteIdToIdMap(t){let e=this.iframeRemoteIdToIdMap.get(t);return e||(e=new Map,this.iframeRemoteIdToIdMap.set(t,e)),e}}class Sr{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new _r(_n),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new _r(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,e){var n;this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:e}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),null===(n=this.loadListener)||void 0===n||n.call(this,t),t.contentDocument&&t.contentDocument.adoptedStyleSheets&&t.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(t.contentDocument.adoptedStyleSheets,this.mirror.getId(t.contentDocument))}handleMessage(t){const e=t;if("rrweb"!==e.data.type||e.origin!==e.data.origin)return;if(!t.source)return;const n=this.crossOriginIframeMap.get(t.source);if(!n)return;const r=this.transformCrossOriginEvent(n,e.data.event);r&&this.wrappedEmit(r,e.data.isCheckout)}transformCrossOriginEvent(t,e){var n;switch(e.type){case qn.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(e.data.node,t);const n=e.data.node.id;return this.crossOriginIframeRootIdMap.set(t,n),this.patchRootIdOnNode(e.data.node,n),{timestamp:e.timestamp,type:qn.IncrementalSnapshot,data:{source:Gn.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:e.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case qn.Meta:case qn.Load:case qn.DomContentLoaded:return!1;case qn.Plugin:return e;case qn.Custom:return this.replaceIds(e.data.payload,t,["id","parentId","previousId","nextId"]),e;case qn.IncrementalSnapshot:switch(e.data.source){case Gn.Mutation:return e.data.adds.forEach((e=>{this.replaceIds(e,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(e.node,t);const n=this.crossOriginIframeRootIdMap.get(t);n&&this.patchRootIdOnNode(e.node,n)})),e.data.removes.forEach((e=>{this.replaceIds(e,t,["parentId","id"])})),e.data.attributes.forEach((e=>{this.replaceIds(e,t,["id"])})),e.data.texts.forEach((e=>{this.replaceIds(e,t,["id"])})),e;case Gn.Drag:case Gn.TouchMove:case Gn.MouseMove:return e.data.positions.forEach((e=>{this.replaceIds(e,t,["id"])})),e;case Gn.ViewportResize:return!1;case Gn.MediaInteraction:case Gn.MouseInteraction:case Gn.Scroll:case Gn.CanvasMutation:case Gn.Input:return this.replaceIds(e.data,t,["id"]),e;case Gn.StyleSheetRule:case Gn.StyleDeclaration:return this.replaceIds(e.data,t,["id"]),this.replaceStyleIds(e.data,t,["styleId"]),e;case Gn.Font:return e;case Gn.Selection:return e.data.ranges.forEach((e=>{this.replaceIds(e,t,["start","end"])})),e;case Gn.AdoptedStyleSheet:return this.replaceIds(e.data,t,["id"]),this.replaceStyleIds(e.data,t,["styleIds"]),null===(n=e.data.styles)||void 0===n||n.forEach((e=>{this.replaceStyleIds(e,t,["styleId"])})),e}}}replace(t,e,n,r){for(const i of r)(Array.isArray(e[i])||"number"===typeof e[i])&&(Array.isArray(e[i])?e[i]=t.getIds(n,e[i]):e[i]=t.getId(n,e[i]));return e}replaceIds(t,e,n){return this.replace(this.crossOriginIframeMirror,t,e,n)}replaceStyleIds(t,e,n){return this.replace(this.crossOriginIframeStyleMirror,t,e,n)}replaceIdOnNode(t,e){this.replaceIds(t,e,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach((t=>{this.replaceIdOnNode(t,e)}))}patchRootIdOnNode(t,e){t.type===nn.Document||t.rootId||(t.rootId=e),"childNodes"in t&&t.childNodes.forEach((t=>{this.patchRootIdOnNode(t,e)}))}}function kr(t){return"__ln"in t}class xr{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let e=this.head;for(let n=0;n<t;n++)e=(null===e||void 0===e?void 0:e.next)||null;return e}addNode(t){const e={value:t,previous:null,next:null};if(t.__ln=e,t.previousSibling&&kr(t.previousSibling)){const n=t.previousSibling.__ln.next;e.next=n,e.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=e,n&&(n.previous=e)}else if(t.nextSibling&&kr(t.nextSibling)&&t.nextSibling.__ln.previous){const n=t.nextSibling.__ln.previous;e.previous=n,e.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=e,n&&(n.next=e)}else this.head&&(this.head.previous=e),e.next=this.head,this.head=e;null===e.next&&(this.tail=e),this.length++}removeNode(t){const e=t.__ln;this.head&&(e.previous?(e.previous.next=e.next,e.next?e.next.previous=e.previous:this.tail=e.previous):(this.head=e.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}const Er=(t,e)=>`${t}@${e}`;class Ir{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],e=new Set,n=new xr,r=t=>{let e=t,n=-2;for(;-2===n;)e=e&&e.nextSibling,n=e&&this.mirror.getId(e);return n},i=i=>{if(!i.parentNode||!mr(i))return;const o=ln(i.parentNode)?this.mirror.getId(hr(i)):this.mirror.getId(i.parentNode),a=r(i);if(-1===o||-1===a)return n.addNode(i);const s=Bn(i,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:t=>{lr(t,this.mirror)&&this.iframeManager.addIframe(t),dr(t,this.mirror)&&this.stylesheetManager.trackLinkElement(t),fr(i)&&this.shadowDomManager.addShadowRoot(i.shadowRoot,this.doc)},onIframeLoad:(t,e)=>{this.iframeManager.attachIframe(t,e),this.shadowDomManager.observeAttachShadow(t)},onStylesheetLoad:(t,e)=>{this.stylesheetManager.attachLinkElement(t,e)}});s&&(t.push({parentId:o,nextId:a,node:s}),e.add(s.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const s of this.movedSet)Or(this.removes,s,this.mirror)&&!this.movedSet.has(s.parentNode)||i(s);for(const s of this.addedSet)Ar(this.droppedSet,s)||Or(this.removes,s,this.mirror)?Ar(this.movedSet,s)?i(s):this.droppedSet.add(s):i(s);let o=null;for(;n.length;){let t=null;if(o){const e=this.mirror.getId(o.value.parentNode),n=r(o.value);-1!==e&&-1!==n&&(t=o)}if(!t){let e=n.tail;for(;e;){const n=e;if(e=e.previous,n){const e=this.mirror.getId(n.value.parentNode);if(-1===r(n.value))continue;if(-1!==e){t=n;break}{const e=n.value;if(e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const r=e.parentNode.host;if(-1!==this.mirror.getId(r)){t=n;break}}}}}}if(!t){for(;n.head;)n.removeNode(n.head.value);break}o=t.previous,n.removeNode(t.value),i(t.value)}const a={texts:this.texts.map((t=>({id:this.mirror.getId(t.node),value:t.value}))).filter((t=>!e.has(t.id))).filter((t=>this.mirror.has(t.id))),attributes:this.attributes.map((t=>{const{attributes:e}=t;if("string"===typeof e.style){const n=JSON.stringify(t.styleDiff),r=JSON.stringify(t._unchangedStyles);n.length<e.style.length&&(n+r).split("var(").length===e.style.split("var(").length&&(e.style=t.styleDiff)}return{id:this.mirror.getId(t.node),attributes:e}})).filter((t=>!e.has(t.id))).filter((t=>this.mirror.has(t.id))),removes:this.removes,adds:t};(a.texts.length||a.attributes.length||a.removes.length||a.adds.length)&&(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=t=>{if(!sr(t.target,this.mirror))switch(t.type){case"characterData":{const e=t.target.textContent;ar(t.target,this.blockClass,this.blockSelector,!1)||e===t.oldValue||this.texts.push({value:jn(t.target,this.maskTextClass,this.maskTextSelector)&&e?this.maskTextFn?this.maskTextFn(e,or(t.target)):e.replace(/[\S]/g,"*"):e,node:t.target});break}case"attributes":{const n=t.target;let r=t.attributeName,i=t.target.getAttribute(r);if("value"===r){const t=yn(n);i=vn({element:n,maskInputOptions:this.maskInputOptions,tagName:n.tagName,type:t,value:i,maskInputFn:this.maskInputFn})}if(ar(t.target,this.blockClass,this.blockSelector,!1)||i===t.oldValue)return;let o=this.attributes.find((e=>e.node===t.target));if("IFRAME"===n.tagName&&"src"===r&&!this.keepIframeSrcFn(i)){if(n.contentDocument)return;r="rr_src"}if(o||(o={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o)),"type"===r&&"INPUT"===n.tagName&&"password"===(t.oldValue||"").toLowerCase()&&n.setAttribute("data-rr-is-password","true"),!Dn(n.tagName,r)&&(o.attributes[r]=Ln(this.doc,mn(n.tagName),mn(r),i),"style"===r)){let r;try{r=document.implementation.createHTMLDocument()}catch(e){r=this.doc}const i=r.createElement("span");t.oldValue&&i.setAttribute("style",t.oldValue);for(const t of Array.from(n.style)){const e=n.style.getPropertyValue(t),r=n.style.getPropertyPriority(t);e!==i.style.getPropertyValue(t)||r!==i.style.getPropertyPriority(t)?o.styleDiff[t]=""===r?e:[e,r]:o._unchangedStyles[t]=[e,r]}for(const t of Array.from(i.style))""===n.style.getPropertyValue(t)&&(o.styleDiff[t]=!1)}break}case"childList":if(ar(t.target,this.blockClass,this.blockSelector,!0))return;t.addedNodes.forEach((e=>this.genAdds(e,t.target))),t.removedNodes.forEach((e=>{const n=this.mirror.getId(e),r=ln(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);ar(t.target,this.blockClass,this.blockSelector,!1)||sr(e,this.mirror)||!function(t,e){return-1!==e.getId(t)}(e,this.mirror)||(this.addedSet.has(e)?(Cr(this.addedSet,e),this.droppedSet.add(e)):this.addedSet.has(t.target)&&-1===n||ur(t.target,this.mirror)||(this.movedSet.has(e)&&this.movedMap[Er(n,r)]?Cr(this.movedSet,e):this.removes.push({parentId:r,id:n,isShadow:!(!ln(t.target)||!dn(t.target))||void 0})),this.mapRemoves.push(e))}))}},this.genAdds=(t,e)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!this.addedSet.has(t)&&!this.movedSet.has(t)){if(this.mirror.hasNode(t)){if(sr(t,this.mirror))return;this.movedSet.add(t);let n=null;e&&this.mirror.hasNode(e)&&(n=this.mirror.getId(e)),n&&-1!==n&&(this.movedMap[Er(this.mirror.getId(t),n)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);ar(t,this.blockClass,this.blockSelector,!1)||(t.childNodes.forEach((t=>this.genAdds(t))),fr(t)&&t.shadowRoot.childNodes.forEach((e=>{this.processedNodeManager.add(e,this),this.genAdds(e,t)})))}}}init(t){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((e=>{this[e]=t[e]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Cr(t,e){t.delete(e),e.childNodes.forEach((e=>Cr(t,e)))}function Or(t,e,n){return 0!==t.length&&Tr(t,e,n)}function Tr(t,e,n){const{parentNode:r}=e;if(!r)return!1;const i=n.getId(r);return!!t.some((t=>t.id===i))||Tr(t,r,n)}function Ar(t,e){return 0!==t.size&&Rr(t,e)}function Rr(t,e){const{parentNode:n}=e;return!!n&&(!!t.has(n)||Rr(t,n))}const Mr=[];function Nr(t){try{if("composedPath"in t){const e=t.composedPath();if(e.length)return e[0]}else if("path"in t&&t.path.length)return t.path[0]}catch(Yt){}return t&&t.target}function Lr(t,e){var n,r;const i=new Ir;Mr.push(i),i.init(t);let o=window.MutationObserver||window.__rrMutationObserver;const a=null===(r=null===(n=null===window||void 0===window?void 0:window.Zone)||void 0===n?void 0:n.__symbol__)||void 0===r?void 0:r.call(n,"MutationObserver");a&&window[a]&&(o=window[a]);const s=new o(br(i.processMutations.bind(i)));return s.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function Dr({mouseInteractionCb:t,doc:e,mirror:n,blockClass:r,blockSelector:i,sampling:o}){if(!1===o.mouseInteraction)return()=>{};const a=!0===o.mouseInteraction||void 0===o.mouseInteraction?{}:o.mouseInteraction,s=[];let u=null;return Object.keys(Hn).filter((t=>Number.isNaN(Number(t))&&!t.endsWith("_Departed")&&!1!==a[t])).forEach((o=>{let a=mn(o);const c=(e=>o=>{const a=Nr(o);if(ar(a,r,i,!0))return;let s=null,c=e;if("pointerType"in o){switch(o.pointerType){case"mouse":s=Jn.Mouse;break;case"touch":s=Jn.Touch;break;case"pen":s=Jn.Pen}s===Jn.Touch?Hn[e]===Hn.MouseDown?c="TouchStart":Hn[e]===Hn.MouseUp&&(c="TouchEnd"):Jn.Pen}else cr(o)&&(s=Jn.Touch);null!==s?(u=s,(c.startsWith("Touch")&&s===Jn.Touch||c.startsWith("Mouse")&&s===Jn.Mouse)&&(s=null)):Hn[e]===Hn.Click&&(s=u,u=null);const l=cr(o)?o.changedTouches[0]:o;if(!l)return;const d=n.getId(a),{clientX:f,clientY:p}=l;br(t)(Object.assign({type:Hn[c],id:d,x:f,y:p},null!==s&&{pointerType:s}))})(o);if(window.PointerEvent)switch(Hn[o]){case Hn.MouseDown:case Hn.MouseUp:a=a.replace("mouse","pointer");break;case Hn.TouchStart:case Hn.TouchEnd:return}s.push(Wn(a,c,e))})),br((()=>{s.forEach((t=>t()))}))}function Pr({scrollCb:t,doc:e,mirror:n,blockClass:r,blockSelector:i,sampling:o}){const a=br(Xn(br((o=>{const a=Nr(o);if(!a||ar(a,r,i,!0))return;const s=n.getId(a);if(a===e&&e.defaultView){const n=nr(e.defaultView);t({id:s,x:n.left,y:n.top})}else t({id:s,x:a.scrollLeft,y:a.scrollTop})})),o.scroll||100));return Wn("scroll",a,e)}function jr(t,e){const n=Object.assign({},t);return e||delete n.userTriggered,n}const Fr=["INPUT","TEXTAREA","SELECT"],Ur=new WeakMap;function Br(t){return function(t,e){if(Gr("CSSGroupingRule")&&t.parentRule instanceof CSSGroupingRule||Gr("CSSMediaRule")&&t.parentRule instanceof CSSMediaRule||Gr("CSSSupportsRule")&&t.parentRule instanceof CSSSupportsRule||Gr("CSSConditionRule")&&t.parentRule instanceof CSSConditionRule){const n=Array.from(t.parentRule.cssRules).indexOf(t);e.unshift(n)}else if(t.parentStyleSheet){const n=Array.from(t.parentStyleSheet.cssRules).indexOf(t);e.unshift(n)}return e}(t,[])}function zr(t,e,n){let r,i;return t?(t.ownerNode?r=e.getId(t.ownerNode):i=n.getId(t),{styleId:i,id:r}):{}}function Vr({mirror:t,stylesheetManager:e},n){var r,i,o;let a=null;a="#document"===n.nodeName?t.getId(n):t.getId(n.host);const s="#document"===n.nodeName?null===(r=n.defaultView)||void 0===r?void 0:r.Document:null===(o=null===(i=n.ownerDocument)||void 0===i?void 0:i.defaultView)||void 0===o?void 0:o.ShadowRoot,u=(null===s||void 0===s?void 0:s.prototype)?Object.getOwnPropertyDescriptor(null===s||void 0===s?void 0:s.prototype,"adoptedStyleSheets"):void 0;return null!==a&&-1!==a&&s&&u?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:u.configurable,enumerable:u.enumerable,get(){var t;return null===(t=u.get)||void 0===t?void 0:t.call(this)},set(t){var n;const r=null===(n=u.set)||void 0===n?void 0:n.call(this,t);if(null!==a&&-1!==a)try{e.adoptStyleSheets(t,a)}catch(i){}return r}}),br((()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:u.configurable,enumerable:u.enumerable,get:u.get,set:u.set})}))):()=>{}}function qr(t,e={}){const n=t.doc.defaultView;if(!n)return()=>{};let r;!function(t,e){const{mutationCb:n,mousemoveCb:r,mouseInteractionCb:i,scrollCb:o,viewportResizeCb:a,inputCb:s,mediaInteractionCb:u,styleSheetRuleCb:c,styleDeclarationCb:l,canvasMutationCb:d,fontCb:f,selectionCb:p}=t;t.mutationCb=(...t)=>{e.mutation&&e.mutation(...t),n(...t)},t.mousemoveCb=(...t)=>{e.mousemove&&e.mousemove(...t),r(...t)},t.mouseInteractionCb=(...t)=>{e.mouseInteraction&&e.mouseInteraction(...t),i(...t)},t.scrollCb=(...t)=>{e.scroll&&e.scroll(...t),o(...t)},t.viewportResizeCb=(...t)=>{e.viewportResize&&e.viewportResize(...t),a(...t)},t.inputCb=(...t)=>{e.input&&e.input(...t),s(...t)},t.mediaInteractionCb=(...t)=>{e.mediaInteaction&&e.mediaInteaction(...t),u(...t)},t.styleSheetRuleCb=(...t)=>{e.styleSheetRule&&e.styleSheetRule(...t),c(...t)},t.styleDeclarationCb=(...t)=>{e.styleDeclaration&&e.styleDeclaration(...t),l(...t)},t.canvasMutationCb=(...t)=>{e.canvasMutation&&e.canvasMutation(...t),d(...t)},t.fontCb=(...t)=>{e.font&&e.font(...t),f(...t)},t.selectionCb=(...t)=>{e.selection&&e.selection(...t),p(...t)}}(t,e),t.recordDOM&&(r=Lr(t,t.doc));const i=function({mousemoveCb:t,sampling:e,doc:n,mirror:r}){if(!1===e.mousemove)return()=>{};const i="number"===typeof e.mousemove?e.mousemove:50,o="number"===typeof e.mousemoveCallback?e.mousemoveCallback:500;let a,s=[];const u=Xn(br((e=>{const n=Date.now()-a;t(s.map((t=>(t.timeOffset-=n,t))),e),s=[],a=null})),o),c=br(Xn(br((t=>{const e=Nr(t),{clientX:n,clientY:i}=cr(t)?t.changedTouches[0]:t;a||(a=er()),s.push({x:n,y:i,id:r.getId(e),timeOffset:er()-a}),u("undefined"!==typeof DragEvent&&t instanceof DragEvent?Gn.Drag:t instanceof MouseEvent?Gn.MouseMove:Gn.TouchMove)})),i,{trailing:!1})),l=[Wn("mousemove",c,n),Wn("touchmove",c,n),Wn("drag",c,n)];return br((()=>{l.forEach((t=>t()))}))}(t),o=Dr(t),a=Pr(t),s=function({viewportResizeCb:t},{win:e}){let n=-1,r=-1;return Wn("resize",br(Xn(br((()=>{const e=rr(),i=ir();n===e&&r===i||(t({width:Number(i),height:Number(e)}),n=e,r=i)})),200)),e)}(t,{win:n}),u=function({inputCb:t,doc:e,mirror:n,blockClass:r,blockSelector:i,ignoreClass:o,ignoreSelector:a,maskInputOptions:s,maskInputFn:u,sampling:c,userTriggeredOnInput:l}){function d(t){let n=Nr(t);const c=t.isTrusted,d=n&&n.tagName;if(n&&"OPTION"===d&&(n=n.parentElement),!n||!d||Fr.indexOf(d)<0||ar(n,r,i,!0))return;if(n.classList.contains(o)||a&&n.matches(a))return;let p=n.value,h=!1;const v=yn(n)||"";"radio"===v||"checkbox"===v?h=n.checked:(s[d.toLowerCase()]||s[v])&&(p=vn({element:n,maskInputOptions:s,tagName:d,type:v,value:p,maskInputFn:u})),f(n,br(jr)({text:p,isChecked:h,userTriggered:c},l));const m=n.name;"radio"===v&&m&&h&&e.querySelectorAll(`input[type="radio"][name="${m}"]`).forEach((t=>{t!==n&&f(t,br(jr)({text:t.value,isChecked:!h,userTriggered:!1},l))}))}function f(e,r){const i=Ur.get(e);if(!i||i.text!==r.text||i.isChecked!==r.isChecked){Ur.set(e,r);const i=n.getId(e);br(t)(Object.assign(Object.assign({},r),{id:i}))}}const p=("last"===c.input?["change"]:["input","change"]).map((t=>Wn(t,br(d),e))),h=e.defaultView;if(!h)return()=>{p.forEach((t=>t()))};const v=h.Object.getOwnPropertyDescriptor(h.HTMLInputElement.prototype,"value"),m=[[h.HTMLInputElement.prototype,"value"],[h.HTMLInputElement.prototype,"checked"],[h.HTMLSelectElement.prototype,"value"],[h.HTMLTextAreaElement.prototype,"value"],[h.HTMLSelectElement.prototype,"selectedIndex"],[h.HTMLOptionElement.prototype,"selected"]];return v&&v.set&&p.push(...m.map((t=>Yn(t[0],t[1],{set(){br(d)({target:this,isTrusted:!1})}},!1,h)))),br((()=>{p.forEach((t=>t()))}))}(t),c=function({mediaInteractionCb:t,blockClass:e,blockSelector:n,mirror:r,sampling:i,doc:o}){const a=br((o=>Xn(br((i=>{const a=Nr(i);if(!a||ar(a,e,n,!0))return;const{currentTime:s,volume:u,muted:c,playbackRate:l}=a;t({type:o,id:r.getId(a),currentTime:s,volume:u,muted:c,playbackRate:l})})),i.media||500))),s=[Wn("play",a(0),o),Wn("pause",a(1),o),Wn("seeked",a(2),o),Wn("volumechange",a(3),o),Wn("ratechange",a(4),o)];return br((()=>{s.forEach((t=>t()))}))}(t);let l=()=>{},d=()=>{},f=()=>{},p=()=>{};t.recordDOM&&(l=function({styleSheetRuleCb:t,mirror:e,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const i=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(i,{apply:br(((r,i,o)=>{const[a,s]=o,{id:u,styleId:c}=zr(i,e,n.styleMirror);return(u&&-1!==u||c&&-1!==c)&&t({id:u,styleId:c,adds:[{rule:a,index:s}]}),wr((()=>r.apply(i,o)))()}))});const o=r.CSSStyleSheet.prototype.deleteRule;let a,s;r.CSSStyleSheet.prototype.deleteRule=new Proxy(o,{apply:br(((r,i,o)=>{const[a]=o,{id:s,styleId:u}=zr(i,e,n.styleMirror);return(s&&-1!==s||u&&-1!==u)&&t({id:s,styleId:u,removes:[{index:a}]}),wr((()=>r.apply(i,o)))()}))}),r.CSSStyleSheet.prototype.replace&&(a=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(a,{apply:br(((r,i,o)=>{const[a]=o,{id:s,styleId:u}=zr(i,e,n.styleMirror);return(s&&-1!==s||u&&-1!==u)&&t({id:s,styleId:u,replace:a}),r.apply(i,o)}))})),r.CSSStyleSheet.prototype.replaceSync&&(s=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(s,{apply:br(((r,i,o)=>{const[a]=o,{id:s,styleId:u}=zr(i,e,n.styleMirror);return(s&&-1!==s||u&&-1!==u)&&t({id:s,styleId:u,replaceSync:a}),r.apply(i,o)}))}));const u={};Hr("CSSGroupingRule")?u.CSSGroupingRule=r.CSSGroupingRule:(Hr("CSSMediaRule")&&(u.CSSMediaRule=r.CSSMediaRule),Hr("CSSConditionRule")&&(u.CSSConditionRule=r.CSSConditionRule),Hr("CSSSupportsRule")&&(u.CSSSupportsRule=r.CSSSupportsRule));const c={};return Object.entries(u).forEach((([r,i])=>{c[r]={insertRule:i.prototype.insertRule,deleteRule:i.prototype.deleteRule},i.prototype.insertRule=new Proxy(c[r].insertRule,{apply:br(((r,i,o)=>{const[a,s]=o,{id:u,styleId:c}=zr(i.parentStyleSheet,e,n.styleMirror);return(u&&-1!==u||c&&-1!==c)&&t({id:u,styleId:c,adds:[{rule:a,index:[...Br(i),s||0]}]}),r.apply(i,o)}))}),i.prototype.deleteRule=new Proxy(c[r].deleteRule,{apply:br(((r,i,o)=>{const[a]=o,{id:s,styleId:u}=zr(i.parentStyleSheet,e,n.styleMirror);return(s&&-1!==s||u&&-1!==u)&&t({id:s,styleId:u,removes:[{index:[...Br(i),a]}]}),r.apply(i,o)}))})})),br((()=>{r.CSSStyleSheet.prototype.insertRule=i,r.CSSStyleSheet.prototype.deleteRule=o,a&&(r.CSSStyleSheet.prototype.replace=a),s&&(r.CSSStyleSheet.prototype.replaceSync=s),Object.entries(u).forEach((([t,e])=>{e.prototype.insertRule=c[t].insertRule,e.prototype.deleteRule=c[t].deleteRule}))}))}(t,{win:n}),d=Vr(t,t.doc),f=function({styleDeclarationCb:t,mirror:e,ignoreCSSAttributes:n,stylesheetManager:r},{win:i}){const o=i.CSSStyleDeclaration.prototype.setProperty;i.CSSStyleDeclaration.prototype.setProperty=new Proxy(o,{apply:br(((i,a,s)=>{var u;const[c,l,d]=s;if(n.has(c))return o.apply(a,[c,l,d]);const{id:f,styleId:p}=zr(null===(u=a.parentRule)||void 0===u?void 0:u.parentStyleSheet,e,r.styleMirror);return(f&&-1!==f||p&&-1!==p)&&t({id:f,styleId:p,set:{property:c,value:l,priority:d},index:Br(a.parentRule)}),i.apply(a,s)}))});const a=i.CSSStyleDeclaration.prototype.removeProperty;return i.CSSStyleDeclaration.prototype.removeProperty=new Proxy(a,{apply:br(((i,o,s)=>{var u;const[c]=s;if(n.has(c))return a.apply(o,[c]);const{id:l,styleId:d}=zr(null===(u=o.parentRule)||void 0===u?void 0:u.parentStyleSheet,e,r.styleMirror);return(l&&-1!==l||d&&-1!==d)&&t({id:l,styleId:d,remove:{property:c},index:Br(o.parentRule)}),i.apply(o,s)}))}),br((()=>{i.CSSStyleDeclaration.prototype.setProperty=o,i.CSSStyleDeclaration.prototype.removeProperty=a}))}(t,{win:n}),t.collectFonts&&(p=function({fontCb:t,doc:e}){const n=e.defaultView;if(!n)return()=>{};const r=[],i=new WeakMap,o=n.FontFace;n.FontFace=function(t,e,n){const r=new o(t,e,n);return i.set(r,{family:t,buffer:"string"!==typeof e,descriptors:n,fontSource:"string"===typeof e?e:JSON.stringify(Array.from(new Uint8Array(e)))}),r};const a=Qn(e.fonts,"add",(function(e){return function(n){return setTimeout(br((()=>{const e=i.get(n);e&&(t(e),i.delete(n))})),0),e.apply(this,[n])}}));return r.push((()=>{n.FontFace=o})),r.push(a),br((()=>{r.forEach((t=>t()))}))}(t)));const h=function(t){const{doc:e,mirror:n,blockClass:r,blockSelector:i,selectionCb:o}=t;let a=!0;const s=br((()=>{const t=e.getSelection();if(!t||a&&(null===t||void 0===t?void 0:t.isCollapsed))return;a=t.isCollapsed||!1;const s=[],u=t.rangeCount||0;for(let e=0;e<u;e++){const o=t.getRangeAt(e),{startContainer:a,startOffset:u,endContainer:c,endOffset:l}=o;ar(a,r,i,!0)||ar(c,r,i,!0)||s.push({start:n.getId(a),startOffset:u,end:n.getId(c),endOffset:l})}o({ranges:s})}));return s(),Wn("selectionchange",s)}(t),v=[];for(const m of t.plugins)v.push(m.observer(m.callback,n,m.options));return br((()=>{Mr.forEach((t=>t.reset())),null===r||void 0===r||r.disconnect(),i(),o(),a(),s(),u(),c(),l(),d(),f(),p(),h(),v.forEach((t=>t()))}))}function Gr(t){return"undefined"!==typeof window[t]}function Hr(t){return Boolean("undefined"!==typeof window[t]&&window[t].prototype&&"insertRule"in window[t].prototype&&"deleteRule"in window[t].prototype)}function Jr(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}for(var Kr=function(t,e){var n;return function(r){return n=n||function(t,e){var n=function(t,e){var n=void 0===e?null:e,r=t.toString().split("\n");r.pop(),r.shift();for(var i=r[0].search(/\S/),o=/(['"])__worker_loader_strict__(['"])/g,a=0,s=r.length;a<s;++a)r[a]=r[a].substring(i).replace(o,"$1use strict$2")+"\n";return n&&r.push("//# sourceMappingURL="+n+"\n"),r}(t,e),r=new Blob(n,{type:"application/javascript"});return URL.createObjectURL(r)}(t,e),new Worker(n,r)}}((function(){!function(){function t(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="undefined"===typeof Uint8Array?[]:new Uint8Array(256),r=0;r<e.length;r++)n[e.charCodeAt(r)]=r;var i=function(t){var n,r=new Uint8Array(t),i=r.length,o="";for(n=0;n<i;n+=3)o+=e[r[n]>>2],o+=e[(3&r[n])<<4|r[n+1]>>4],o+=e[(15&r[n+1])<<2|r[n+2]>>6],o+=e[63&r[n+2]];return i%3===2?o=o.substring(0,o.length-1)+"=":i%3===1&&(o=o.substring(0,o.length-2)+"=="),o};const o=new Map,a=new Map;const s=self;s.onmessage=function(e){return t(this,void 0,void 0,(function*(){if(!("OffscreenCanvas"in globalThis))return s.postMessage({id:e.data.id});{const{id:n,bitmap:r,width:u,height:c,dataURLOptions:l}=e.data,d=function(e,n,r){return t(this,void 0,void 0,(function*(){const t=`${e}-${n}`;if("OffscreenCanvas"in globalThis){if(a.has(t))return a.get(t);const o=new OffscreenCanvas(e,n);o.getContext("2d");const s=yield o.convertToBlob(r),u=yield s.arrayBuffer(),c=i(u);return a.set(t,c),c}return""}))}(u,c,l),f=new OffscreenCanvas(u,c);f.getContext("2d").drawImage(r,0,0),r.close();const p=yield f.convertToBlob(l),h=p.type,v=yield p.arrayBuffer(),m=i(v);if(!o.has(n)&&(yield d)===m)return o.set(n,m),s.postMessage({id:n});if(o.get(n)===m)return s.postMessage({id:n});s.postMessage({id:n,type:h,base64:m,width:u,height:c}),o.set(n,m)}}))}}()}),null),Wr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Zr="undefined"===typeof Uint8Array?[]:new Uint8Array(256),$r=0;$r<Wr.length;$r++)Zr[Wr.charCodeAt($r)]=$r;const Xr=new Map;const Yr=(t,e,n)=>{if(!t||!ei(t,e)&&"object"!==typeof t)return;const r=function(t,e){let n=Xr.get(t);return n||(n=new Map,Xr.set(t,n)),n.has(e)||n.set(e,[]),n.get(e)}(n,t.constructor.name);let i=r.indexOf(t);return-1===i&&(i=r.length,r.push(t)),i};function Qr(t,e,n){if(t instanceof Array)return t.map((t=>Qr(t,e,n)));if(null===t)return t;if(t instanceof Float32Array||t instanceof Float64Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Int16Array||t instanceof Int8Array||t instanceof Uint8ClampedArray){return{rr_type:t.constructor.name,args:[Object.values(t)]}}if(t instanceof ArrayBuffer){const e=t.constructor.name,n=function(t){var e,n=new Uint8Array(t),r=n.length,i="";for(e=0;e<r;e+=3)i+=Wr[n[e]>>2],i+=Wr[(3&n[e])<<4|n[e+1]>>4],i+=Wr[(15&n[e+1])<<2|n[e+2]>>6],i+=Wr[63&n[e+2]];return r%3===2?i=i.substring(0,i.length-1)+"=":r%3===1&&(i=i.substring(0,i.length-2)+"=="),i}(t);return{rr_type:e,base64:n}}if(t instanceof DataView){return{rr_type:t.constructor.name,args:[Qr(t.buffer,e,n),t.byteOffset,t.byteLength]}}if(t instanceof HTMLImageElement){const e=t.constructor.name,{src:n}=t;return{rr_type:e,src:n}}if(t instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:t.toDataURL()}}if(t instanceof ImageData){return{rr_type:t.constructor.name,args:[Qr(t.data,e,n),t.width,t.height]}}if(ei(t,e)||"object"===typeof t){return{rr_type:t.constructor.name,index:Yr(t,e,n)}}return t}const ti=(t,e,n)=>[...t].map((t=>Qr(t,e,n))),ei=(t,e)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((t=>"function"===typeof e[t]));return Boolean(n.find((n=>t instanceof e[n])))};function ni(t,e,n,r){const i=[];try{const o=Qn(t.HTMLCanvasElement.prototype,"getContext",(function(t){return function(i,...o){if(!ar(this,e,n,!0)){const t=function(t){return"experimental-webgl"===t?"webgl":t}(i);if("__context"in this||(this.__context=t),r&&["webgl","webgl2"].includes(t))if(o[0]&&"object"===typeof o[0]){const t=o[0];t.preserveDrawingBuffer||(t.preserveDrawingBuffer=!0)}else o.splice(0,1,{preserveDrawingBuffer:!0})}return t.apply(this,[i,...o])}}));i.push(o)}catch(Yt){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach((t=>t()))}}function ri(t,e,n,r,i,o,a){const s=[],u=Object.getOwnPropertyNames(t);for(const c of u)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(c))try{if("function"!==typeof t[c])continue;const o=Qn(t,c,(function(t){return function(...o){const s=t.apply(this,o);if(Yr(s,a,this),"tagName"in this.canvas&&!ar(this.canvas,r,i,!0)){const t=ti([...o],a,this),r={type:e,property:c,args:t};n(this.canvas,r)}return s}}));s.push(o)}catch(Yt){const i=Yn(t,c,{set(t){n(this.canvas,{type:e,property:c,args:[t],setter:!0})}});s.push(i)}return s}class ii{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(t,e)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(t)||this.pendingCanvasMutations.set(t,[]),this.pendingCanvasMutations.get(t).push(e)};const{sampling:e="all",win:n,blockClass:r,blockSelector:i,recordCanvas:o,dataURLOptions:a}=t;this.mutationCb=t.mutationCb,this.mirror=t.mirror,o&&"all"===e&&this.initCanvasMutationObserver(n,r,i),o&&"number"===typeof e&&this.initCanvasFPSObserver(e,n,r,i,{dataURLOptions:a})}initCanvasFPSObserver(t,e,n,r,i){const o=ni(e,n,r,!0),a=new Map,s=new Kr;s.onmessage=t=>{const{id:e}=t.data;if(a.set(e,!1),!("base64"in t.data))return;const{base64:n,type:r,width:i,height:o}=t.data;this.mutationCb({id:e,type:Kn["2D"],commands:[{property:"clearRect",args:[0,0,i,o]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:n}],type:r}]},0,0]}]})};const u=1e3/t;let c,l=0;const d=t=>{l&&t-l<u||(l=t,(()=>{const t=[];return e.document.querySelectorAll("canvas").forEach((e=>{ar(e,n,r,!0)||t.push(e)})),t})().forEach((t=>Jr(this,void 0,void 0,(function*(){var e;const n=this.mirror.getId(t);if(a.get(n))return;if(a.set(n,!0),["webgl","webgl2"].includes(t.__context)){const n=t.getContext(t.__context);!1===(null===(e=null===n||void 0===n?void 0:n.getContextAttributes())||void 0===e?void 0:e.preserveDrawingBuffer)&&n.clear(n.COLOR_BUFFER_BIT)}const r=yield createImageBitmap(t);s.postMessage({id:n,bitmap:r,width:t.width,height:t.height,dataURLOptions:i.dataURLOptions},[r])}))))),c=requestAnimationFrame(d)};c=requestAnimationFrame(d),this.resetObservers=()=>{o(),cancelAnimationFrame(c)}}initCanvasMutationObserver(t,e,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const r=ni(t,e,n,!1),i=function(t,e,n,r){const i=[],o=Object.getOwnPropertyNames(e.CanvasRenderingContext2D.prototype);for(const a of o)try{if("function"!==typeof e.CanvasRenderingContext2D.prototype[a])continue;const o=Qn(e.CanvasRenderingContext2D.prototype,a,(function(i){return function(...o){return ar(this.canvas,n,r,!0)||setTimeout((()=>{const n=ti([...o],e,this);t(this.canvas,{type:Kn["2D"],property:a,args:n})}),0),i.apply(this,o)}}));i.push(o)}catch(Yt){const r=Yn(e.CanvasRenderingContext2D.prototype,a,{set(e){t(this.canvas,{type:Kn["2D"],property:a,args:[e],setter:!0})}});i.push(r)}return()=>{i.forEach((t=>t()))}}(this.processMutation.bind(this),t,e,n),o=function(t,e,n,r,i){const o=[];return o.push(...ri(e.WebGLRenderingContext.prototype,Kn.WebGL,t,n,r,0,e)),"undefined"!==typeof e.WebGL2RenderingContext&&o.push(...ri(e.WebGL2RenderingContext.prototype,Kn.WebGL2,t,n,r,0,e)),()=>{o.forEach((t=>t()))}}(this.processMutation.bind(this),t,e,n,this.mirror);this.resetObservers=()=>{r(),i(),o()}}startPendingCanvasMutationFlusher(){requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const t=e=>{this.rafStamps.latestId=e,requestAnimationFrame(t)};requestAnimationFrame(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((t,e)=>{const n=this.mirror.getId(e);this.flushPendingCanvasMutationFor(e,n)})),requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(t,e){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(t);if(!n||-1===e)return;const r=n.map((t=>{const e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["type"]);return e})),{type:i}=n[0];this.mutationCb({id:e,type:i,commands:r}),this.pendingCanvasMutations.delete(t)}}class oi{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){requestAnimationFrame((()=>{this.clear(),this.loop&&this.periodicallyClear()}))}inOtherBuffer(t,e){const n=this.nodeMap.get(t);return n&&Array.from(n).some((t=>t!==e))}add(t,e){this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(e))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}class ai{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,e){if(!dn(t))return;if(this.shadowDoms.has(t))return;this.shadowDoms.add(t);const n=Lr(Object.assign(Object.assign({},this.bypassOptions),{doc:e,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),t);this.restoreHandlers.push((()=>n.disconnect())),this.restoreHandlers.push(Pr(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:t,mirror:this.mirror}))),setTimeout((()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(Vr({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))}),0)}observeAttachShadow(t){t.contentWindow&&t.contentDocument&&this.patchAttachShadow(t.contentWindow.Element,t.contentDocument)}patchAttachShadow(t,e){const n=this;this.restoreHandlers.push(Qn(t.prototype,"attachShadow",(function(t){return function(r){const i=t.call(this,r);return this.shadowRoot&&mr(this)&&n.addShadowRoot(this.shadowRoot,e),i}})))}reset(){this.restoreHandlers.forEach((t=>{try{t()}catch(e){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}class si{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new pr,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,e){"_cssText"in e.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:e.id,attributes:e.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,e){if(0===t.length)return;const n={id:e,styleIds:[]},r=[];for(const i of t){let t;this.styleMirror.has(i)?t=this.styleMirror.getId(i):(t=this.styleMirror.add(i),r.push({styleId:t,rules:Array.from(i.rules||CSSRule,((t,e)=>({rule:pn(t),index:e})))})),n.styleIds.push(t)}r.length>0&&(n.styles=r),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}function ui(t){return Object.assign(Object.assign({},t),{timestamp:er()})}let ci,li,di,fi=!1;const pi=new hn;function hi(t={}){const{emit:e,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:i="rr-block",blockSelector:o=null,ignoreClass:a="rr-ignore",ignoreSelector:s=null,maskTextClass:u="rr-mask",maskTextSelector:c=null,inlineStylesheet:l=!0,maskAllInputs:d,maskInputOptions:f,slimDOMOptions:p,maskInputFn:h,maskTextFn:v,hooks:m,packFn:g,sampling:y={},dataURLOptions:b={},mousemoveWait:w,recordDOM:_=!0,recordCanvas:S=!1,recordCrossOriginIframes:k=!1,recordAfter:x=("DOMContentLoaded"===t.recordAfter?t.recordAfter:"load"),userTriggeredOnInput:E=!1,collectFonts:I=!1,inlineImages:C=!1,plugins:O,keepIframeSrcFn:T=(()=>!1),ignoreCSSAttributes:A=new Set([]),errorHandler:R}=t;gr(R);const M=!k||window.parent===window;let N=!1;if(!M)try{window.parent.document&&(N=!1)}catch(J){N=!0}if(M&&!e)throw new Error("emit function is required");void 0!==w&&void 0===y.mousemove&&(y.mousemove=w),pi.reset();const L=!0===d?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==f?f:{password:!0},D=!0===p||"all"===p?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===p,headMetaDescKeywords:"all"===p}:p||{};let P;!function(t=window){"NodeList"in t&&!t.NodeList.prototype.forEach&&(t.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in t&&!t.DOMTokenList.prototype.forEach&&(t.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let e=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do{if(this===e)return!0}while(e=e&&e.parentNode);return!1})}();let j=0;const F=t=>{for(const e of O||[])e.eventProcessor&&(t=e.eventProcessor(t));return g&&!N&&(t=g(t)),t};ci=(t,i)=>{var o;if(!(null===(o=Mr[0])||void 0===o?void 0:o.isFrozen())||t.type===qn.FullSnapshot||t.type===qn.IncrementalSnapshot&&t.data.source===Gn.Mutation||Mr.forEach((t=>t.unfreeze())),M)null===e||void 0===e||e(F(t),i);else if(N){const e={type:"rrweb",event:F(t),origin:window.location.origin,isCheckout:i};window.parent.postMessage(e,"*")}if(t.type===qn.FullSnapshot)P=t,j=0;else if(t.type===qn.IncrementalSnapshot){if(t.data.source===Gn.Mutation&&t.data.isAttachIframe)return;j++;const e=r&&j>=r,i=n&&t.timestamp-P.timestamp>n;(e||i)&&li(!0)}};const U=t=>{ci(ui({type:qn.IncrementalSnapshot,data:Object.assign({source:Gn.Mutation},t)}))},B=t=>ci(ui({type:qn.IncrementalSnapshot,data:Object.assign({source:Gn.Scroll},t)})),z=t=>ci(ui({type:qn.IncrementalSnapshot,data:Object.assign({source:Gn.CanvasMutation},t)})),V=new si({mutationCb:U,adoptedStyleSheetCb:t=>ci(ui({type:qn.IncrementalSnapshot,data:Object.assign({source:Gn.AdoptedStyleSheet},t)}))}),q=new Sr({mirror:pi,mutationCb:U,stylesheetManager:V,recordCrossOriginIframes:k,wrappedEmit:ci});for(const W of O||[])W.getMirror&&W.getMirror({nodeMirror:pi,crossOriginIframeMirror:q.crossOriginIframeMirror,crossOriginIframeStyleMirror:q.crossOriginIframeStyleMirror});const G=new oi;di=new ii({recordCanvas:S,mutationCb:z,win:window,blockClass:i,blockSelector:o,mirror:pi,sampling:y.canvas,dataURLOptions:b});const H=new ai({mutationCb:U,scrollCb:B,bypassOptions:{blockClass:i,blockSelector:o,maskTextClass:u,maskTextSelector:c,inlineStylesheet:l,maskInputOptions:L,dataURLOptions:b,maskTextFn:v,maskInputFn:h,recordCanvas:S,inlineImages:C,sampling:y,slimDOMOptions:D,iframeManager:q,stylesheetManager:V,canvasManager:di,keepIframeSrcFn:T,processedNodeManager:G},mirror:pi});li=(t=!1)=>{if(!_)return;ci(ui({type:qn.Meta,data:{href:window.location.href,width:ir(),height:rr()}}),t),V.reset(),H.init(),Mr.forEach((t=>t.lock()));const e=function(t,e){const{mirror:n=new hn,blockClass:r="rr-block",blockSelector:i=null,maskTextClass:o="rr-mask",maskTextSelector:a=null,inlineStylesheet:s=!0,inlineImages:u=!1,recordCanvas:c=!1,maskAllInputs:l=!1,maskTextFn:d,maskInputFn:f,slimDOM:p=!1,dataURLOptions:h,preserveWhiteSpace:v,onSerialize:m,onIframeLoad:g,iframeLoadTimeout:y,onStylesheetLoad:b,stylesheetLoadTimeout:w,keepIframeSrcFn:_=(()=>!1)}=e||{};return Bn(t,{doc:t,mirror:n,blockClass:r,blockSelector:i,maskTextClass:o,maskTextSelector:a,skipChild:!1,inlineStylesheet:s,maskInputOptions:!0===l?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===l?{password:!0}:l,maskTextFn:d,maskInputFn:f,slimDOMOptions:!0===p||"all"===p?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===p,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===p?{}:p,dataURLOptions:h,inlineImages:u,recordCanvas:c,preserveWhiteSpace:v,onSerialize:m,onIframeLoad:g,iframeLoadTimeout:y,onStylesheetLoad:b,stylesheetLoadTimeout:w,keepIframeSrcFn:_,newlyAddedElement:!1})}(document,{mirror:pi,blockClass:i,blockSelector:o,maskTextClass:u,maskTextSelector:c,inlineStylesheet:l,maskAllInputs:L,maskTextFn:v,maskInputFn:h,slimDOM:D,dataURLOptions:b,recordCanvas:S,inlineImages:C,onSerialize:t=>{lr(t,pi)&&q.addIframe(t),dr(t,pi)&&V.trackLinkElement(t),fr(t)&&H.addShadowRoot(t.shadowRoot,document)},onIframeLoad:(t,e)=>{q.attachIframe(t,e),H.observeAttachShadow(t)},onStylesheetLoad:(t,e)=>{V.attachLinkElement(t,e)},keepIframeSrcFn:T});if(!e)return console.warn("Failed to snapshot the document");ci(ui({type:qn.FullSnapshot,data:{node:e,initialOffset:nr(window)}}),t),Mr.forEach((t=>t.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&V.adoptStyleSheets(document.adoptedStyleSheets,pi.getId(document))};try{const t=[],e=t=>{var e;return br(qr)({mutationCb:U,mousemoveCb:(t,e)=>ci(ui({type:qn.IncrementalSnapshot,data:{source:e,positions:t}})),mouseInteractionCb:t=>ci(ui({type:qn.IncrementalSnapshot,data:Object.assign({source:Gn.MouseInteraction},t)})),scrollCb:B,viewportResizeCb:t=>ci(ui({type:qn.IncrementalSnapshot,data:Object.assign({source:Gn.ViewportResize},t)})),inputCb:t=>ci(ui({type:qn.IncrementalSnapshot,data:Object.assign({source:Gn.Input},t)})),mediaInteractionCb:t=>ci(ui({type:qn.IncrementalSnapshot,data:Object.assign({source:Gn.MediaInteraction},t)})),styleSheetRuleCb:t=>ci(ui({type:qn.IncrementalSnapshot,data:Object.assign({source:Gn.StyleSheetRule},t)})),styleDeclarationCb:t=>ci(ui({type:qn.IncrementalSnapshot,data:Object.assign({source:Gn.StyleDeclaration},t)})),canvasMutationCb:z,fontCb:t=>ci(ui({type:qn.IncrementalSnapshot,data:Object.assign({source:Gn.Font},t)})),selectionCb:t=>{ci(ui({type:qn.IncrementalSnapshot,data:Object.assign({source:Gn.Selection},t)}))},blockClass:i,ignoreClass:a,ignoreSelector:s,maskTextClass:u,maskTextSelector:c,maskInputOptions:L,inlineStylesheet:l,sampling:y,recordDOM:_,recordCanvas:S,inlineImages:C,userTriggeredOnInput:E,collectFonts:I,doc:t,maskInputFn:h,maskTextFn:v,keepIframeSrcFn:T,blockSelector:o,slimDOMOptions:D,dataURLOptions:b,mirror:pi,iframeManager:q,stylesheetManager:V,shadowDomManager:H,processedNodeManager:G,canvasManager:di,ignoreCSSAttributes:A,plugins:(null===(e=null===O||void 0===O?void 0:O.filter((t=>t.observer)))||void 0===e?void 0:e.map((t=>({observer:t.observer,options:t.options,callback:e=>ci(ui({type:qn.Plugin,data:{plugin:t.name,payload:e}}))}))))||[]},m)};q.addLoadListener((n=>{try{t.push(e(n.contentDocument))}catch(r){console.warn(r)}}));const n=()=>{li(),t.push(e(document)),fi=!0};return"interactive"===document.readyState||"complete"===document.readyState?n():(t.push(Wn("DOMContentLoaded",(()=>{ci(ui({type:qn.DomContentLoaded,data:{}})),"DOMContentLoaded"===x&&n()}))),t.push(Wn("load",(()=>{ci(ui({type:qn.Load,data:{}})),"load"===x&&n()}),window))),()=>{t.forEach((t=>t())),G.destroy(),fi=!1,yr()}}catch(K){console.warn(K)}}hi.addCustomEvent=(t,e)=>{if(!fi)throw new Error("please add custom event after start recording");ci(ui({type:qn.Custom,data:{tag:t,payload:e}}))},hi.freezePage=()=>{Mr.forEach((t=>t.freeze()))},hi.takeFullSnapshot=t=>{if(!fi)throw new Error("please take full snapshot after start recording");li(t)},hi.mirror=pi;var vi=Uint8Array,mi=Uint16Array,gi=Uint32Array,yi=new vi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),bi=new vi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),wi=new vi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),_i=function(t,e){for(var n=new mi(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];var i=new gi(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return[n,i]},Si=_i(yi,2),ki=Si[0],xi=Si[1];ki[28]=258,xi[258]=28;for(var Ei=_i(bi,0),Ii=(Ei[0],Ei[1]),Ci=new mi(32768),Oi=0;Oi<32768;++Oi){var Ti=(43690&Oi)>>>1|(21845&Oi)<<1;Ti=(61680&(Ti=(52428&Ti)>>>2|(13107&Ti)<<2))>>>4|(3855&Ti)<<4,Ci[Oi]=((65280&Ti)>>>8|(255&Ti)<<8)>>>1}var Ai=function(t,e,n){for(var r=t.length,i=0,o=new mi(e);i<r;++i)++o[t[i]-1];var a,s=new mi(e);for(i=0;i<e;++i)s[i]=s[i-1]+o[i-1]<<1;if(n){a=new mi(1<<e);var u=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],l=e-t[i],d=s[t[i]-1]++<<l,f=d|(1<<l)-1;d<=f;++d)a[Ci[d]>>>u]=c}else for(a=new mi(r),i=0;i<r;++i)a[i]=Ci[s[t[i]-1]++]>>>15-t[i];return a},Ri=new vi(288);for(Oi=0;Oi<144;++Oi)Ri[Oi]=8;for(Oi=144;Oi<256;++Oi)Ri[Oi]=9;for(Oi=256;Oi<280;++Oi)Ri[Oi]=7;for(Oi=280;Oi<288;++Oi)Ri[Oi]=8;var Mi=new vi(32);for(Oi=0;Oi<32;++Oi)Mi[Oi]=5;var Ni=Ai(Ri,9,0),Li=Ai(Mi,5,0),Di=function(t){return(t/8>>0)+(7&t&&1)},Pi=function(t,e,n){(null==e||e<0)&&(e=0),(null==n||n>t.length)&&(n=t.length);var r=new(t instanceof mi?mi:t instanceof gi?gi:vi)(n-e);return r.set(t.subarray(e,n)),r},ji=function(t,e,n){n<<=7&e;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8},Fi=function(t,e,n){n<<=7&e;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8,t[r+2]|=n>>>16},Ui=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,o=n.slice();if(!i)return[new vi(0),0];if(1==i){var a=new vi(n[0].s+1);return a[n[0].s]=1,[a,1]}n.sort((function(t,e){return t.f-e.f})),n.push({s:-1,f:25001});var s=n[0],u=n[1],c=0,l=1,d=2;for(n[0]={s:-1,f:s.f+u.f,l:s,r:u};l!=i-1;)s=n[n[c].f<n[d].f?c++:d++],u=n[c!=l&&n[c].f<n[d].f?c++:d++],n[l++]={s:-1,f:s.f+u.f,l:s,r:u};var f=o[0].s;for(r=1;r<i;++r)o[r].s>f&&(f=o[r].s);var p=new mi(f+1),h=Bi(n[l-1],p,0);if(h>e){r=0;var v=0,m=h-e,g=1<<m;for(o.sort((function(t,e){return p[e.s]-p[t.s]||t.f-e.f}));r<i;++r){var y=o[r].s;if(!(p[y]>e))break;v+=g-(1<<h-p[y]),p[y]=e}for(v>>>=m;v>0;){var b=o[r].s;p[b]<e?v-=1<<e-p[b]++-1:++r}for(;r>=0&&v;--r){var w=o[r].s;p[w]==e&&(--p[w],++v)}h=e}return[new vi(p),h]},Bi=function(t,e,n){return-1==t.s?Math.max(Bi(t.l,e,n+1),Bi(t.r,e,n+1)):e[t.s]=n},zi=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new mi(++e),r=0,i=t[0],o=1,a=function(t){n[r++]=t},s=1;s<=e;++s)if(t[s]==i&&s!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)a(32754);o>2&&(a(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(a(i),--o;o>6;o-=6)a(8304);o>2&&(a(o-3<<5|8208),o=0)}for(;o--;)a(i);o=1,i=t[s]}return[n.subarray(0,r),e]},Vi=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},qi=function(t,e,n){var r=n.length,i=Di(e+2);t[i]=255&r,t[i+1]=r>>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var o=0;o<r;++o)t[i+o+4]=n[o];return 8*(i+4+r)},Gi=function(t,e,n,r,i,o,a,s,u,c,l){ji(e,l++,n),++i[256];for(var d=Ui(i,15),f=d[0],p=d[1],h=Ui(o,15),v=h[0],m=h[1],g=zi(f),y=g[0],b=g[1],w=zi(v),_=w[0],S=w[1],k=new mi(19),x=0;x<y.length;++x)k[31&y[x]]++;for(x=0;x<_.length;++x)k[31&_[x]]++;for(var E=Ui(k,7),I=E[0],C=E[1],O=19;O>4&&!I[wi[O-1]];--O);var T,A,R,M,N=c+5<<3,L=Vi(i,Ri)+Vi(o,Mi)+a,D=Vi(i,f)+Vi(o,v)+a+14+3*O+Vi(k,I)+(2*k[16]+3*k[17]+7*k[18]);if(N<=L&&N<=D)return qi(e,l,t.subarray(u,u+c));if(ji(e,l,1+(D<L)),l+=2,D<L){T=Ai(f,p,0),A=f,R=Ai(v,m,0),M=v;var P=Ai(I,C,0);ji(e,l,b-257),ji(e,l+5,S-1),ji(e,l+10,O-4),l+=14;for(x=0;x<O;++x)ji(e,l+3*x,I[wi[x]]);l+=3*O;for(var j=[y,_],F=0;F<2;++F){var U=j[F];for(x=0;x<U.length;++x){var B=31&U[x];ji(e,l,P[B]),l+=I[B],B>15&&(ji(e,l,U[x]>>>5&127),l+=U[x]>>>12)}}}else T=Ni,A=Ri,R=Li,M=Mi;for(x=0;x<s;++x)if(r[x]>255){B=r[x]>>>18&31;Fi(e,l,T[B+257]),l+=A[B+257],B>7&&(ji(e,l,r[x]>>>23&31),l+=yi[B]);var z=31&r[x];Fi(e,l,R[z]),l+=M[z],z>3&&(Fi(e,l,r[x]>>>5&8191),l+=bi[z])}else Fi(e,l,T[r[x]]),l+=A[r[x]];return Fi(e,l,T[256]),l+A[256]},Hi=new gi([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ji=new vi(0),Ki=function(t,e,n,r,i){return function(t,e,n,r,i,o){var a=t.length,s=new vi(r+a+5*(1+Math.floor(a/7e3))+i),u=s.subarray(r,s.length-i),c=0;if(!e||a<8)for(var l=0;l<=a;l+=65535){var d=l+65535;d<a?c=qi(u,c,t.subarray(l,d)):(u[l]=o,c=qi(u,c,t.subarray(l,a)))}else{for(var f=Hi[e-1],p=f>>>13,h=8191&f,v=(1<<n)-1,m=new mi(32768),g=new mi(v+1),y=Math.ceil(n/3),b=2*y,w=function(e){return(t[e]^t[e+1]<<y^t[e+2]<<b)&v},_=new gi(25e3),S=new mi(288),k=new mi(32),x=0,E=0,I=(l=0,0),C=0,O=0;l<a;++l){var T=w(l),A=32767&l,R=g[T];if(m[A]=R,g[T]=A,C<=l){var M=a-l;if((x>7e3||I>24576)&&M>423){c=Gi(t,u,0,_,S,k,E,I,O,l-O,c),I=x=E=0,O=l;for(var N=0;N<286;++N)S[N]=0;for(N=0;N<30;++N)k[N]=0}var L=2,D=0,P=h,j=A-R&32767;if(M>2&&T==w(l-j))for(var F=Math.min(p,M)-1,U=Math.min(32767,l),B=Math.min(258,M);j<=U&&--P&&A!=R;){if(t[l+L]==t[l+L-j]){for(var z=0;z<B&&t[l+z]==t[l+z-j];++z);if(z>L){if(L=z,D=j,z>F)break;var V=Math.min(j,z-2),q=0;for(N=0;N<V;++N){var G=l-j+N+32768&32767,H=G-m[G]+32768&32767;H>q&&(q=H,R=G)}}}j+=(A=R)-(R=m[A])+32768&32767}if(D){_[I++]=268435456|xi[L]<<18|Ii[D];var J=31&xi[L],K=31&Ii[D];E+=yi[J]+bi[K],++S[257+J],++k[K],C=l+L,++x}else _[I++]=t[l],++S[t[l]]}}c=Gi(t,u,o,_,S,k,E,I,O,l-O,c),o||(c=qi(u,c,Ji))}return Pi(s,0,r+Di(c)+i)}(t,null==e.level?6:e.level,null==e.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,r,!i)};function Wi(t,e){void 0===e&&(e={});var n=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,o=n.length,a=0;a!=o;){for(var s=Math.min(a+5552,o);a<s;++a)i+=r+=n[a];r%=65521,i%=65521}t=r,e=i},d:function(){return(t>>>8<<16|(255&e)<<8|e>>>8)+2*((255&t)<<23)}}}();n.p(t);var r=Ki(t,e,2,4);return function(t,e){var n=e.level,r=0==n?0:n<6?1:9==n?3:2;t[0]=120,t[1]=r<<6|(r?32-2*r:1)}(r,e),function(t,e,n){for(;n;++e)t[e]=n,n>>>=8}(r,r.length-4,n.d()),r}const Zi=t=>{const e=Object.assign(Object.assign({},t),{v:"v1"});return function(t,e){var n="";if(!e&&"undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var r=0;r<t.length;){var i=t[r++];i<128||e?n+=String.fromCharCode(i):i<224?n+=String.fromCharCode((31&i)<<6|63&t[r++]):i<240?n+=String.fromCharCode((15&i)<<12|(63&t[r++])<<6|63&t[r++]):(i=((15&i)<<18|(63&t[r++])<<12|(63&t[r++])<<6|63&t[r++])-65536,n+=String.fromCharCode(55296|i>>10,56320|1023&i))}return n}(Wi(function(t,e){var n=t.length;if(!e&&"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(t);for(var r=new vi(t.length+(t.length>>>1)),i=0,o=function(t){r[i++]=t},a=0;a<n;++a){if(i+5>r.length){var s=new vi(i+8+(n-a<<1));s.set(r),r=s}var u=t.charCodeAt(a);u<128||e?o(u):u<2048?(o(192|u>>>6),o(128|63&u)):u>55295&&u<57344?(o(240|(u=65536+(1047552&u)|1023&t.charCodeAt(++a))>>>18),o(128|u>>>12&63),o(128|u>>>6&63),o(128|63&u)):(o(224|u>>>12),o(128|u>>>6&63),o(128|63&u))}return Pi(r,0,i)}(JSON.stringify(e))),!0)},$i=(t,e)=>e.some((e=>t instanceof e));let Xi,Yi;const Qi=new WeakMap,to=new WeakMap,eo=new WeakMap;let no={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return Qi.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ao(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function ro(t){no=t(no)}function io(t){return(Yi||(Yi=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(so(this),e),ao(this.request)}:function(...e){return ao(t.apply(so(this),e))}}function oo(t){return"function"===typeof t?io(t):(t instanceof IDBTransaction&&function(t){if(Qi.has(t))return;const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{e(),r()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)}));Qi.set(t,e)}(t),$i(t,Xi||(Xi=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,no):t)}function ao(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{e(ao(t.result)),r()},o=()=>{n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)}));return eo.set(e,t),e}(t);if(to.has(t))return to.get(t);const e=oo(t);return e!==t&&(to.set(t,e),eo.set(e,t)),e}const so=t=>eo.get(t);function uo(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const a=indexedDB.open(t,e),s=ao(a);return r&&a.addEventListener("upgradeneeded",(t=>{r(ao(a.result),t.oldVersion,t.newVersion,ao(a.transaction),t)})),n&&a.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),s.then((t=>{o&&t.addEventListener("close",(()=>o())),i&&t.addEventListener("versionchange",(t=>i(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),s}function co(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",(t=>e(t.oldVersion,t))),ao(n).then((()=>{}))}const lo=["get","getKey","getAll","getAllKeys","count"],fo=["put","add","delete","clear"],po=new Map;function ho(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!==typeof e)return;if(po.get(e))return po.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=fo.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!lo.includes(n))return;const o=async function(t,...e){const o=this.transaction(t,i?"readwrite":"readonly");let a=o.store;return r&&(a=a.index(e.shift())),(await Promise.all([a[n](...e),i&&o.done]))[0]};return po.set(e,o),o}ro((t=>({...t,get:(e,n,r)=>ho(e,n)||t.get(e,n,r),has:(e,n)=>!!ho(e,n)||t.has(e,n)})));const vo=["continue","continuePrimaryKey","advance"],mo={},go=new WeakMap,yo=new WeakMap,bo={get(t,e){if(!vo.includes(e))return t[e];let n=mo[e];return n||(n=mo[e]=function(...t){go.set(this,yo.get(this)[e](...t))}),n}};async function*wo(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const n=new Proxy(e,bo);for(yo.set(n,e),eo.set(n,so(e));e;)yield n,e=await(go.get(n)||e.continue()),go.delete(n)}function _o(t,e){return e===Symbol.asyncIterator&&$i(t,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===e&&$i(t,[IDBIndex,IDBObjectStore])}ro((t=>({...t,get:(e,n,r)=>_o(e,n)?wo:t.get(e,n,r),has:(e,n)=>_o(e,n)||t.has(e,n)})));var So,ko=function(t,e){return(0,u.mG)(void 0,void 0,void 0,(function(){return(0,u.Jh)(this,(function(n){switch(n.label){case 0:return[4,uo(t,1,{upgrade:function(t){e.forEach((function(e){t.objectStoreNames.contains(e)||t.createObjectStore(e)}))}})];case 1:return[2,n.sent()]}}))}))},xo=function(t){var e=t.loggerProvider,n=t.apiKey,r=t.configKeys;return(0,u.mG)(void 0,void 0,void 0,(function(){var t,i,o,a,s,c,l,d,f,p;return(0,u.Jh)(this,(function(h){switch(h.label){case 0:return t="".concat(n.substring(0,10),"_amp_config"),[4,ko(t,r)];case 1:return i=h.sent(),o="".concat(n.substring(0,10),"_amp_config_meta"),[4,(v=o,(0,u.mG)(void 0,void 0,void 0,(function(){return(0,u.Jh)(this,(function(t){switch(t.label){case 0:return[4,uo(v,1,{upgrade:function(t){t.objectStoreNames.contains("lastFetchedSessionId")||t.createObjectStore("lastFetchedSessionId")}})];case 1:return[2,t.sent()]}}))})))];case 2:a=h.sent(),h.label=3;case 3:return h.trys.push([3,8,,9]),[4,a.get("lastFetchedSessionId","sessionId")];case 4:return(s=h.sent())&&Date.now()-s>=2592e5?(i.close(),[4,co(t)]):[3,7];case 5:return h.sent(),[4,ko(n,r)];case 6:i=h.sent(),h.label=7;case 7:return[3,9];case 8:return c=h.sent(),e.warn("Failed to reset store: ".concat(c)),[3,9];case 9:return l=function(t,n){return(0,u.mG)(void 0,void 0,void 0,(function(){var r,o,s,c,l,d;return(0,u.Jh)(this,(function(f){switch(f.label){case 0:return f.trys.push([0,7,,8]),n?[4,a.put("lastFetchedSessionId",n,"sessionId")]:[3,2];case 1:f.sent(),f.label=2;case 2:for(c in r=function(e){var n,r;return(0,u.Jh)(this,(function(o){switch(o.label){case 0:return n=t.configs[e],r=i.transaction(e,"readwrite"),[4,Promise.all((0,u.ev)((0,u.ev)([],(0,u.CR)(Object.keys(n).map((function(t){return r.store.put((0,u.pi)({},n[t]),t)}))),!1),[r.done],!1))];case 1:return o.sent(),[2]}}))},o=t.configs,s=[],o)s.push(c);l=0,f.label=3;case 3:return l<s.length?(c=s[l])in o?[5,r(c)]:[3,5]:[3,6];case 4:f.sent(),f.label=5;case 5:return l++,[3,3];case 6:return[3,8];case 7:return d=f.sent(),e.warn("Failed to store remote config: ".concat(d)),[3,8];case 8:return[2]}}))}))},d=function(){return(0,u.mG)(void 0,void 0,void 0,(function(){var t;return(0,u.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,a.get("lastFetchedSessionId","sessionId")];case 1:return[2,n.sent()];case 2:return t=n.sent(),e.warn("Failed to fetch lastFetchedSessionId: ".concat(t)),[3,3];case 3:return[2,void 0]}}))}))},f=function(t,n){return(0,u.mG)(void 0,void 0,void 0,(function(){var r;return(0,u.Jh)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,i.get(t,n)];case 1:return[2,o.sent()];case 2:return r=o.sent(),e.warn("Failed to fetch remote config: ".concat(r)),[3,3];case 3:return[2,void 0]}}))}))},p=function(t){return(0,u.mG)(void 0,void 0,void 0,(function(){var n;return(0,u.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,i.getAll(t)];case 1:return[2,!!r.sent().length];case 2:return n=r.sent(),e.warn("Failed to fetch remote config: ".concat(n)),[3,3];case 3:return[2,!1]}}))}))},[2,{storeRemoteConfig:l,getRemoteConfig:f,getLastFetchedSessionId:d,remoteConfigHasValues:p}]}var v}))}))},Eo="Remote config fetch rejected due to timeout after 5 seconds",Io=function(){function t(t){var e=t.localConfig,n=t.configKeys,r=this;this.retryTimeout=1e3,this.attempts=0,this.sessionTargetingMatch=!1,this.fetchTime=0,this.getRemoteConfig=function(t,e,n){return(0,u.mG)(r,void 0,void 0,(function(){var r,i,o,a,s,c;return(0,u.Jh)(this,(function(u){switch(u.label){case 0:return r=Date.now(),this.remoteConfigIDBStore?[4,this.remoteConfigIDBStore.remoteConfigHasValues(t)]:[3,4];case 1:return i=u.sent(),[4,this.remoteConfigIDBStore.getLastFetchedSessionId()];case 2:return o=u.sent(),i&&o===n?[4,this.remoteConfigIDBStore.getRemoteConfig(t,e)]:[3,4];case 3:return a=u.sent(),this.fetchTime=Date.now()-r,[2,a];case 4:return[4,this.fetchWithTimeout(n)];case 5:return(s=u.sent())&&(c=s.configs&&s.configs[t])?(this.fetchTime=Date.now()-r,[2,c[e]]):(this.fetchTime=Date.now()-r,[2,void 0])}}))}))},this.fetchWithTimeout=function(t){return(0,u.mG)(r,void 0,void 0,(function(){var e,n,r;return(0,u.Jh)(this,(function(i){switch(i.label){case 0:return e=new AbortController,n=setTimeout((function(){return e.abort()}),5e3),[4,this.fetchRemoteConfig(e.signal,t)];case 1:return r=i.sent(),clearTimeout(n),[2,r]}}))}))},this.fetchRemoteConfig=function(t,e){return(0,u.mG)(r,void 0,void 0,(function(){var n,r,i,o,a,s;return(0,u.Jh)(this,(function(c){switch(c.label){case 0:if(e===this.lastFetchedSessionId&&this.attempts>=this.localConfig.flushMaxRetries)return[2,this.completeRequest({err:"Remote config fetch rejected due to exceeded retry count"})];if(t.aborted)return[2,this.completeRequest({err:Eo})];e!==this.lastFetchedSessionId&&(this.lastFetchedSessionId=e,this.attempts=0),c.label=1;case 1:return c.trys.push([1,3,,4]),n=new URLSearchParams({api_key:this.localConfig.apiKey,config_keys:this.configKeys.join(",")}),r={headers:{"Content-Type":"application/json",Accept:"*/*"},method:"GET"},i="".concat(this.getServerUrl(),"?").concat(n.toString()),this.attempts+=1,[4,fetch(i,(0,u.pi)((0,u.pi)({},r),{signal:t}))];case 2:if(null===(o=c.sent()))return[2,this.completeRequest({err:"Unexpected error occurred"})];switch((new Ne).buildStatus(o.status)){case Te.Success:return[2,this.parseAndStoreConfig(o,e)];case Te.Failed:return[2,this.retryFetch(t,e)];default:return[2,this.completeRequest({err:"Network error occurred, remote config fetch failed"})]}return[3,4];case 3:return a=c.sent(),s=a,t.aborted?[2,this.completeRequest({err:Eo})]:[2,this.completeRequest({err:s.message})];case 4:return[2]}}))}))},this.retryFetch=function(t,e){return(0,u.mG)(r,void 0,void 0,(function(){var n=this;return(0,u.Jh)(this,(function(r){switch(r.label){case 0:return[4,new Promise((function(t){return setTimeout(t,n.attempts*n.retryTimeout)}))];case 1:return r.sent(),[2,this.fetchRemoteConfig(t,e)]}}))}))},this.parseAndStoreConfig=function(t,e){return(0,u.mG)(r,void 0,void 0,(function(){var n;return(0,u.Jh)(this,(function(r){switch(r.label){case 0:return[4,t.json()];case 1:return n=r.sent(),this.remoteConfigIDBStore?[4,this.remoteConfigIDBStore.storeRemoteConfig(n,e)]:[3,3];case 2:r.sent(),r.label=3;case 3:return this.completeRequest({success:"Remote config successfully fetched"}),[2,n]}}))}))},this.localConfig=e,this.configKeys=n}return t.prototype.initialize=function(){return(0,u.mG)(this,void 0,void 0,(function(){var t;return(0,u.Jh)(this,(function(e){switch(e.label){case 0:return t=this,[4,xo({apiKey:this.localConfig.apiKey,loggerProvider:this.localConfig.loggerProvider,configKeys:this.configKeys})];case 1:return t.remoteConfigIDBStore=e.sent(),[2]}}))}))},t.prototype.getServerUrl=function(){return this.localConfig.serverZone===Me.STAGING?"https://sr-client-cfg.stag2.amplitude.com/config":this.localConfig.serverZone===Me.EU?"https://sr-client-cfg.eu.amplitude.com/config":"https://sr-client-cfg.amplitude.com/config"},t.prototype.completeRequest=function(t){var e=t.err,n=t.success;if(e)throw new Error(e);n&&this.localConfig.loggerProvider.log(n)},t}(),Co=function(t){var e=t.localConfig,n=t.configKeys;return(0,u.mG)(void 0,void 0,void 0,(function(){var t;return(0,u.Jh)(this,(function(r){switch(r.label){case 0:return[4,(t=new Io({localConfig:e,configKeys:n})).initialize()];case 1:return r.sent(),[2,t]}}))}))},Oo=function(){function t(t,e){this.localConfig=new Ze(t,e)}return t.prototype.initialize=function(){return(0,u.mG)(this,void 0,void 0,(function(){var t;return(0,u.Jh)(this,(function(e){switch(e.label){case 0:return t=this,[4,Co({localConfig:this.localConfig,configKeys:["sessionReplay"]})];case 1:return t.remoteConfigFetch=e.sent(),[2]}}))}))},t.prototype.generateJoinedConfig=function(t){var e,n,r;return(0,u.mG)(this,void 0,void 0,(function(){var i,o,a,s,c,l,d,f,p,h,v,m,g,y,b,w,_,S,k,x;return(0,u.Jh)(this,(function(E){switch(E.label){case 0:(i=(0,u.pi)({},this.localConfig)).optOut=this.localConfig.optOut,i.captureEnabled=!0,E.label=1;case 1:return E.trys.push([1,5,,6]),this.remoteConfigFetch?[4,this.remoteConfigFetch.getRemoteConfig("sessionReplay","sr_sampling_config",t)]:[2,i];case 2:return a=E.sent(),[4,this.remoteConfigFetch.getRemoteConfig("sessionReplay","sr_privacy_config",t)];case 3:return s=E.sent(),c=i,[4,this.remoteConfigFetch.getRemoteConfig("sessionReplay","sr_interaction_config",t)];case 4:return c.interactionConfig=E.sent(),(a||s)&&(o={},a&&(o.sr_sampling_config=a),s&&(o.sr_privacy_config=s)),[3,6];case 5:return l=E.sent(),d=l,this.localConfig.loggerProvider.warn(d.message),i.captureEnabled=!0,[3,6];case 6:if(!o)return[2,i];if(f=o.sr_sampling_config,p=o.sr_privacy_config,f&&Object.keys(f).length>0?(Object.prototype.hasOwnProperty.call(f,"capture_enabled")?i.captureEnabled=f.capture_enabled:i.captureEnabled=!1,f.sample_rate&&(i.sampleRate=f.sample_rate)):(i.captureEnabled=!0,this.localConfig.loggerProvider.debug("Remote config successfully fetched, but no values set for project, Session Replay capture enabled.")),p){h=null!==(e=i.privacyConfig)&&void 0!==e?e:{},v={defaultMaskLevel:null!==(r=null!==(n=p.defaultMaskLevel)&&void 0!==n?n:h.defaultMaskLevel)&&void 0!==r?r:"medium",blockSelector:[],maskSelector:[],unmaskSelector:[]},m=function(t){var e,n,r,i,o,a,s,c,l,d={};"string"===typeof t.blockSelector&&(t.blockSelector=[t.blockSelector]);try{for(var f=(0,u.XA)(null!==(s=t.blockSelector)&&void 0!==s?s:[]),p=f.next();!p.done;p=f.next()){d[p.value]="block"}}catch(y){e={error:y}}finally{try{p&&!p.done&&(n=f.return)&&n.call(f)}finally{if(e)throw e.error}}try{for(var h=(0,u.XA)(null!==(c=t.maskSelector)&&void 0!==c?c:[]),v=h.next();!v.done;v=h.next()){d[v.value]="mask"}}catch(b){r={error:b}}finally{try{v&&!v.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}try{for(var m=(0,u.XA)(null!==(l=t.unmaskSelector)&&void 0!==l?l:[]),g=m.next();!g.done;g=m.next()){d[g.value]="unmask"}}catch(w){o={error:w}}finally{try{g&&!g.done&&(a=m.return)&&a.call(m)}finally{if(o)throw o.error}}return d},g=(0,u.pi)((0,u.pi)({},m(h)),m(p));try{for(y=(0,u.XA)(Object.entries(g)),b=y.next();!b.done;b=y.next())w=(0,u.CR)(b.value,2),_=w[0],"mask"===(S=w[1])?v.maskSelector.push(_):"block"===S?v.blockSelector.push(_):"unmask"===S&&v.unmaskSelector.push(_)}catch(I){k={error:I}}finally{try{b&&!b.done&&(x=y.return)&&x.call(y)}finally{if(k)throw k.error}}i.privacyConfig=v}return[2,i]}}))}))},t}(),To=function(t,e){return(0,u.mG)(void 0,void 0,void 0,(function(){var n;return(0,u.Jh)(this,(function(r){switch(r.label){case 0:return[4,(n=new Oo(t,e)).initialize()];case 1:return r.sent(),[2,n]}}))}))},Ao="Session replay event batch rejected due to exceeded retry count",Ro="Failed to store session replay events in IndexedDB";!function(t){t.RECORDING="recording",t.SENT="sent"}(So||(So={}));var Mo,No="sessionCurrentSequence",Lo="sequencesToSend",Do=function(){var t=$e();return new Promise((function(e,n){if(!t)return n(new Error("Global scope not found"));if(!t.indexedDB)return n(new Error("Session Replay: cannot find indexedDB"));try{var r=t.indexedDB.open("keyval-store");r.onupgradeneeded=function(){1===r.result.version&&(r.result.close(),r.transaction&&r.transaction.abort(),t.indexedDB.deleteDatabase("keyval-store"),e())},r.onsuccess=function(){e(r.result)}}catch(i){n(i)}}))},Po=function(t){return(0,u.mG)(void 0,void 0,void 0,(function(){var e;return(0,u.Jh)(this,(function(n){switch(n.label){case 0:return t.length>0?(10,e=t.splice(0,10),[4,Promise.all(e)]):[3,2];case 1:return n.sent(),[3,0];case 2:return[2]}}))}))},jo=function(t){var e,n;return t.objectStoreNames.contains(No)||(n=t.createObjectStore(No,{keyPath:"sessionId"})),t.objectStoreNames.contains(Lo)||(e=t.createObjectStore(Lo,{keyPath:"sequenceId",autoIncrement:!0})).createIndex("sessionId","sessionId"),{sequencesStore:e,currentSequenceStore:n}},Fo=function(t){return(0,u.mG)(void 0,void 0,void 0,(function(){return(0,u.Jh)(this,(function(e){switch(e.label){case 0:return[4,uo(t,1,{upgrade:jo})];case 1:return[2,e.sent()]}}))}))},Uo=function(){function t(t){var e=t.loggerProvider,n=t.apiKey,r=t.minInterval,i=t.maxInterval,o=this;this.storageKey="",this.maxPersistedEventsSize=1e6,this.timeAtLastSplit=null,this.shouldSplitEventsList=function(t,e){var n=new Blob([e]).size;return new Blob(t).size+n>=o.maxPersistedEventsSize||!!(null!==o.timeAtLastSplit&&o.interval&&Date.now()-o.timeAtLastSplit>o.interval&&t.length)&&(o.interval=Math.min(o.maxInterval,o.interval+o.minInterval),o.timeAtLastSplit=Date.now(),!0)},this.getSequencesToSend=function(){return(0,u.mG)(o,void 0,void 0,(function(){var t,e;return(0,u.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,null===(e=this.db)||void 0===e?void 0:e.getAll(Lo)];case 1:return[2,n.sent()];case 2:return t=n.sent(),this.loggerProvider.warn("".concat(Ro,": ").concat(t)),[3,3];case 3:return[2,void 0]}}))}))},this.storeCurrentSequence=function(t){return(0,u.mG)(o,void 0,void 0,(function(){var e,n,r;return(0,u.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),this.db?[4,this.db.get(No,t)]:[2,void 0];case 1:return(e=i.sent())?[4,this.db.put(Lo,{sessionId:t,events:e.events})]:[2,void 0];case 2:return n=i.sent(),[4,this.db.put(No,{sessionId:t,events:[]})];case 3:return i.sent(),[2,(0,u.pi)((0,u.pi)({},e),{sessionId:t,sequenceId:n})];case 4:return r=i.sent(),this.loggerProvider.warn("".concat(Ro,": ").concat(r)),[3,5];case 5:return[2,void 0]}}))}))},this.addEventToCurrentSequence=function(t,e){return(0,u.mG)(o,void 0,void 0,(function(){var n,r,i,o,a,s,c;return(0,u.Jh)(this,(function(u){switch(u.label){case 0:0===this.interval&&(this.interval=this.minInterval),u.label=1;case 1:return u.trys.push([1,11,,12]),(n=null===(c=this.db)||void 0===c?void 0:c.transaction(No,"readwrite"))?[4,n.store.get(t)]:[2];case 2:return(r=u.sent())?[3,4]:[4,n.store.put({sessionId:t,events:[e]})];case 3:return u.sent(),[2];case 4:return i=void 0,this.shouldSplitEventsList(r.events,e)?(i=r.events,[4,n.store.put({sessionId:t,events:[e]})]):[3,6];case 5:return u.sent(),[3,8];case 6:return o=r.events.concat(e),[4,n.store.put({sessionId:t,events:o})];case 7:u.sent(),u.label=8;case 8:return[4,n.done];case 9:return u.sent(),i?[4,this.storeSendingEvents(t,i)]:[2,void 0];case 10:return(a=u.sent())?[2,{events:i,sessionId:t,sequenceId:a}]:[2,void 0];case 11:return s=u.sent(),this.loggerProvider.warn("".concat(Ro,": ").concat(s)),[3,12];case 12:return[2,void 0]}}))}))},this.storeSendingEvents=function(t,e){return(0,u.mG)(o,void 0,void 0,(function(){var n,r;return(0,u.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,null===(r=this.db)||void 0===r?void 0:r.put(Lo,{sessionId:t,events:e})];case 1:return[2,i.sent()];case 2:return n=i.sent(),this.loggerProvider.warn("".concat(Ro,": ").concat(n)),[3,3];case 3:return[2,void 0]}}))}))},this.cleanUpSessionEventsStore=function(t){return(0,u.mG)(o,void 0,void 0,(function(){var e,n;return(0,u.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,null===(n=this.db)||void 0===n?void 0:n.delete(Lo,t)];case 1:return r.sent(),[3,3];case 2:return e=r.sent(),this.loggerProvider.warn("".concat(Ro,": ").concat(e)),[3,3];case 3:return[2]}}))}))},this.transitionFromKeyValStore=function(t){return(0,u.mG)(o,void 0,void 0,(function(){var e,n,r,i,o,a,s,c,l=this;return(0,u.Jh)(this,(function(d){switch(d.label){case 0:return d.trys.push([0,6,,7]),[4,Do()];case 1:if(!(e=d.sent()))return[2];n=function(t,e){return(0,u.mG)(l,void 0,void 0,(function(){var n,r,i=this;return(0,u.Jh)(this,(function(o){switch(o.label){case 0:return n=e.sessionSequences,r=[],Object.keys(n).forEach((function(o){var a=parseInt(o,10),s=n[a];if(a===e.currentSequenceId){var c=s.events.map((function(e){return(0,u.mG)(i,void 0,void 0,(function(){return(0,u.Jh)(this,(function(n){return[2,this.addEventToCurrentSequence(t,e)]}))}))}));r.concat(c)}else s.status!==So.SENT&&r.push(i.storeSendingEvents(t,s.events))})),[4,Po(r)];case 1:return o.sent(),[2]}}))}))},r="".concat(je,"_").concat(this.apiKey.substring(0,10)),d.label=2;case 2:return d.trys.push([2,4,,5]),i=e.transaction("keyval").objectStore("keyval").getAll(r),o=new Promise((function(e){i.onsuccess=function(r){return(0,u.mG)(l,void 0,void 0,(function(){var i,o,a,s=this;return(0,u.Jh)(this,(function(u){switch(u.label){case 0:return i=r&&r.target.result,(o=i&&i[0])?(a=[],Object.keys(o).forEach((function(e){var r=parseInt(e,10),i=o[r];if(t===r)a.push(n(r,i));else{var u=i.sessionSequences;Object.keys(u).forEach((function(t){var e=parseInt(t,10);u[e].status!==So.SENT&&a.push(s.storeSendingEvents(r,u[e].events))}))}})),[4,Po(a)]):[3,2];case 1:u.sent(),u.label=2;case 2:return e(),[2]}}))}))}})),[4,o];case 3:return d.sent(),(a=$e())&&a.indexedDB.deleteDatabase("keyval-store"),[3,5];case 4:return s=d.sent(),this.loggerProvider.warn("Failed to transition session replay events from keyval to new store: ".concat(s)),[3,5];case 5:return[3,7];case 6:return c=d.sent(),this.loggerProvider.warn("Failed to access keyval store: ".concat(c,". For more information, visit: https://www.docs.developers.amplitude.com/session-replay/sdks/standalone/#indexeddb-best-practices")),[3,7];case 7:return[2]}}))}))},this.loggerProvider=e,this.apiKey=n,this.maxInterval=null!==i&&void 0!==i?i:1e4,this.minInterval=null!==r&&void 0!==r?r:500,this.interval=0}return t.prototype.initialize=function(t,e){return(0,u.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,u.Jh)(this,(function(o){switch(o.label){case 0:return n="replay"===t?"":"_".concat(t),r="".concat(this.apiKey.substring(0,10),"_amp_session_replay_events").concat(n),i=this,[4,Fo(r)];case 1:return i.db=o.sent(),this.timeAtLastSplit=Date.now(),[4,this.transitionFromKeyValStore(e)];case 2:return o.sent(),[2]}}))}))},t}(),Bo=function(t){var e=t.loggerProvider,n=t.apiKey,r=t.sessionId,i=t.type,o=t.minInterval,a=t.maxInterval;return(0,u.mG)(void 0,void 0,void 0,(function(){var t;return(0,u.Jh)(this,(function(s){switch(s.label){case 0:return[4,(t=new Uo({loggerProvider:e,apiKey:n,minInterval:o,maxInterval:a})).initialize(i,r)];case 1:return s.sent(),[2,t]}}))}))},zo="medium";!function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"}(Mo||(Mo={}));function Vo(t){return t.toLowerCase()}function qo(t){const e=t.type;return t.hasAttribute("data-rr-is-password")?"password":e?Vo(e):null}const Go=/(max|min)-device-(width|height)/,Ho=(new RegExp(Go.source,"g"),/([^\\]):hover/);new RegExp(Ho.source,"g");var Jo,Ko,Wo,Zo=function(t,e,n){switch(e){case"light":if("input"!==t)return!0;var r=n?qo(n):"";return!!r&&(!!["password","hidden","email","tel"].includes(r)||!!n.autocomplete.startsWith("cc-"));case"medium":case"conservative":return!0;default:return Zo(t,zo,n)}},$o=function(t,e){return function(n,r){return function(t,e,n){var r,i,o;if(void 0===e&&(e={defaultMaskLevel:zo}),n){if(n.closest(".amp-mask"))return!0;var a=(null!==(r=e.maskSelector)&&void 0!==r?r:[]).some((function(t){return n.closest(t)}));if(a)return!0;if(n.closest(".amp-unmask"))return!1;var s=(null!==(i=e.unmaskSelector)&&void 0!==i?i:[]).some((function(t){return n.closest(t)}));if(s)return!1}return Zo(t,null!==(o=e.defaultMaskLevel)&&void 0!==o?o:zo,n)}(t,e,r)?n.replace(/[^\s]/g,"*"):n}},Xo=function(t){var e=0;if(0===t.length)return e;for(var n=0;n<t.length;n++){e=(e<<5)-e+t.charCodeAt(n),e|=0}return e},Yo=function(){function t(t){var e=t.loggerProvider,n=t.payloadBatcher;this.storageKey="",this.retryTimeout=1e3,this.scheduled=null,this.queue=[],this.loggerProvider=e,this.payloadBatcher=n||function(t){return t}}return t.prototype.sendEventsList=function(t){this.addToQueue((0,u.pi)((0,u.pi)({},t),{attempts:0,timeout:0}))},t.prototype.getServerUrl=function(t){return t===Me.STAGING?"https://api-sr.stag2.amplitude.com/sessions/v2/track":t===Me.EU?"https://api-sr.eu.amplitude.com/sessions/v2/track":"https://api-sr.amplitude.com/sessions/v2/track"},t.prototype.addToQueue=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.filter((function(e){return e.attempts<(e.flushMaxRetries||0)?(e.attempts+=1,!0):(t.completeRequest({context:e,err:"".concat(Ao,", batch sequence id, ").concat(e.sequenceId)}),!1)}));r.forEach((function(e){t.queue=t.queue.concat(e),0!==e.timeout?setTimeout((function(){e.timeout=0,t.schedule(0)}),e.timeout):t.schedule(0)}))},t.prototype.schedule=function(t){var e=this;this.scheduled||(this.scheduled=setTimeout((function(){e.flush(!0).then((function(){e.queue.length>0&&e.schedule(t)}))}),t))},t.prototype.flush=function(t){return void 0===t&&(t=!1),(0,u.mG)(this,void 0,void 0,(function(){var e,n,r=this;return(0,u.Jh)(this,(function(i){switch(i.label){case 0:return e=[],n=[],this.queue.forEach((function(t){return 0===t.timeout?e.push(t):n.push(t)})),this.queue=n,this.scheduled&&(clearTimeout(this.scheduled),this.scheduled=null),[4,Promise.all(e.map((function(e){return r.send(e,t)})))];case 1:return i.sent(),[2]}}))}))},t.prototype.send=function(t,e){return void 0===e&&(e=!0),(0,u.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,s,c,l,d,f,p,h;return(0,u.Jh)(this,(function(u){switch(u.label){case 0:if(!(n=t.apiKey))return[2,this.completeRequest({context:t,err:"Session replay event batch not sent due to missing api key"})];if(!(r=t.deviceId))return[2,this.completeRequest({context:t,err:"Session replay event batch not sent due to missing device ID"})];if(i=function(){var t=$e();return(null===t||void 0===t?void 0:t.location)?t.location.href:""}(),o="0.2.5",a=t.sampleRate,s=new URLSearchParams({device_id:r,session_id:"".concat(t.sessionId),seq_number:"".concat(t.sequenceId),type:"".concat(t.type)}),0===(c=this.payloadBatcher({version:1,events:t.events})).events.length)return this.completeRequest({context:t}),[2];u.label=1;case 1:return u.trys.push([1,3,,4]),l={headers:{"Content-Type":"application/json",Accept:"*/*",Authorization:"Bearer ".concat(n),"X-Client-Version":o,"X-Client-Url":i,"X-Client-Sample-Rate":"".concat(a)},body:JSON.stringify(c),method:"POST"},d="".concat(this.getServerUrl(t.serverZone),"?").concat(s.toString()),[4,fetch(d,l)];case 2:if(null===(f=u.sent()))return this.completeRequest({context:t,err:"Unexpected error occurred"}),[2];if(e)this.handleReponse(f.status,t);else{p="";try{p=JSON.stringify(f.body,null,2)}catch(Qt){}this.completeRequest({context:t,success:"".concat(f.status,": ").concat(p)})}return[3,4];case 3:return h=u.sent(),this.completeRequest({context:t,err:h}),[3,4];case 4:return[2]}}))}))},t.prototype.handleReponse=function(t,e){switch((new Ne).buildStatus(t)){case Te.Success:this.handleSuccessResponse(e);break;case Te.Failed:this.handleOtherResponse(e);break;default:this.completeRequest({context:e,err:"Network error occurred, event batch rejected"})}},t.prototype.handleSuccessResponse=function(t){var e;this.completeRequest({context:t,success:(e=t.sessionId,"Session replay event batch tracked successfully for session id ".concat(e))})},t.prototype.handleOtherResponse=function(t){this.addToQueue((0,u.pi)((0,u.pi)({},t),{timeout:t.attempts*this.retryTimeout}))},t.prototype.completeRequest=function(t){var e=t.context,n=t.err,r=t.success;e.onComplete(e.sequenceId),n?this.loggerProvider.warn(n):r&&this.loggerProvider.log(r)},t}(),Qo=function(t){var e=t.config,n=t.sessionId,r=t.minInterval,i=t.maxInterval,o=t.type,a=t.payloadBatcher;return(0,u.mG)(void 0,void 0,void 0,(function(){function t(t){return void 0===t&&(t=!1),(0,u.mG)(this,void 0,void 0,(function(){return(0,u.Jh)(this,(function(e){return[2,s.flush(t)]}))}))}var s,c,l,d,f,p;return(0,u.Jh)(this,(function(h){switch(h.label){case 0:return s=new Yo({loggerProvider:e.loggerProvider,payloadBatcher:a}),[4,Bo({loggerProvider:e.loggerProvider,apiKey:e.apiKey,sessionId:n,minInterval:r,maxInterval:i,type:o})];case 1:return c=h.sent(),l=function(t){var n=t.events,r=t.sessionId,i=t.deviceId,a=t.sequenceId;s.sendEventsList({events:n,sequenceId:a,sessionId:r,flushMaxRetries:e.flushMaxRetries,apiKey:e.apiKey,deviceId:i,sampleRate:e.sampleRate,serverZone:e.serverZone,type:o,onComplete:c.cleanUpSessionEventsStore.bind(c)})},d=function(t){var n=t.sessionId,r=t.deviceId;c.storeCurrentSequence(n).then((function(t){t&&l({sequenceId:t.sequenceId,events:t.events,sessionId:t.sessionId,deviceId:r})})).catch((function(t){e.loggerProvider.warn("Failed to get current sequence of session replay events for session:",t)}))},f=function(t){var e=t.deviceId;return(0,u.mG)(void 0,void 0,void 0,(function(){var t;return(0,u.Jh)(this,(function(n){switch(n.label){case 0:return[4,c.getSequencesToSend()];case 1:return(t=n.sent())&&t.forEach((function(t){l({sequenceId:t.sequenceId,events:t.events,sessionId:t.sessionId,deviceId:e})})),[2]}}))}))},p=function(t){var n=t.event,r=t.sessionId,i=t.deviceId;c.addEventToCurrentSequence(r,n.data).then((function(t){return t&&l({sequenceId:t.sequenceId,events:t.events,sessionId:t.sessionId,deviceId:i})})).catch((function(t){e.loggerProvider.warn("Failed to add event to session replay capture:",t)}))},[2,{sendCurrentSequenceEvents:d,addEvent:p,sendStoredEvents:f,flush:t}]}}))}))},ta=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=new Map;t.forEach((function(t){n.set(t.name,t.manager)})),this.managers=n}return t.prototype.sendStoredEvents=function(t){return(0,u.mG)(this,void 0,void 0,(function(){var e;return(0,u.Jh)(this,(function(n){switch(n.label){case 0:return e=[],this.managers.forEach((function(n){e.push(n.sendStoredEvents(t))})),[4,Promise.all(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.addEvent=function(t){var e,n=t.sessionId,r=t.event,i=t.deviceId;null===(e=this.managers.get(r.type))||void 0===e||e.addEvent({sessionId:n,event:r,deviceId:i})},t.prototype.sendCurrentSequenceEvents=function(t){var e=t.sessionId,n=t.deviceId;this.managers.forEach((function(t){t.sendCurrentSequenceEvents({sessionId:e,deviceId:n})}))},t.prototype.flush=function(t){return(0,u.mG)(this,void 0,void 0,(function(){var e;return(0,u.Jh)(this,(function(n){switch(n.label){case 0:return e=[],this.managers.forEach((function(n){e.push(n.flush(t))})),[4,Promise.all(e)];case 1:return n.sent(),[2]}}))}))},t}(),ea=(t=>(t[t.MouseUp=0]="MouseUp",t[t.MouseDown=1]="MouseDown",t[t.Click=2]="Click",t[t.ContextMenu=3]="ContextMenu",t[t.DblClick=4]="DblClick",t[t.Focus=5]="Focus",t[t.Blur=6]="Blur",t[t.TouchStart=7]="TouchStart",t[t.TouchMove_Departed=8]="TouchMove_Departed",t[t.TouchEnd=9]="TouchEnd",t[t.TouchCancel=10]="TouchCancel",t))(ea||{});function na(t,e){if(Wo=new Date,t.nodeType!==Node.ELEMENT_NODE)throw new Error("Can't generate CSS selector for non-element node type.");if("html"===t.tagName.toLowerCase())return"html";var n={root:document.body,idName:function(t){return!0},className:function(t){return!0},tagName:function(t){return!0},attr:function(t,e){return!1},seedMinLength:1,optimizedMinLength:2,threshold:1e3,maxNumberOfTries:1e4,timeoutMs:void 0};Jo=(0,u.pi)((0,u.pi)({},n),e),Ko=function(t,e){if(t.nodeType===Node.DOCUMENT_NODE)return t;if(t===e.root)return t.ownerDocument;return t}(Jo.root,n);var r=ra(t,"all",(function(){return ra(t,"two",(function(){return ra(t,"one",(function(){return ra(t,"none")}))}))}));if(r){var i=pa(ha(r,t));return i.length>0&&(r=i[0]),oa(r)}throw new Error("Selector was not found.")}function ra(t,e,n){for(var r=null,i=[],o=t,a=0,s=function(){var t,s,c=(new Date).getTime()-Wo.getTime();if(void 0!==Jo.timeoutMs&&c>Jo.timeoutMs)throw new Error("Timeout: Can't find a unique selector after ".concat(c,"ms"));var l=la(function(t){var e=t.getAttribute("id");if(e&&Jo.idName(e))return{name:"#"+CSS.escape(e),penalty:0};return null}(o))||la.apply(void 0,(0,u.ev)([],(0,u.CR)(function(t){var e=Array.from(t.attributes).filter((function(t){return Jo.attr(t.name,t.value)}));return e.map((function(t){return{name:"[".concat(CSS.escape(t.name),'="').concat(CSS.escape(t.value),'"]'),penalty:.5}}))}(o)),!1))||la.apply(void 0,(0,u.ev)([],(0,u.CR)(function(t){return Array.from(t.classList).filter(Jo.className).map((function(t){return{name:"."+CSS.escape(t),penalty:1}}))}(o)),!1))||la(function(t){var e=t.tagName.toLowerCase();if(Jo.tagName(e))return{name:e,penalty:2};return null}(o))||[{name:"*",penalty:3}],d=function(t){var e=t.parentNode;if(!e)return null;var n=e.firstChild;if(!n)return null;var r=0;for(;n&&(n.nodeType===Node.ELEMENT_NODE&&r++,n!==t);)n=n.nextSibling;return r}(o);if("all"==e)d&&(l=l.concat(l.filter(ca).map((function(t){return ua(t,d)}))));else if("two"==e)l=l.slice(0,1),d&&(l=l.concat(l.filter(ca).map((function(t){return ua(t,d)}))));else if("one"==e){var f=(0,u.CR)(l=l.slice(0,1),1)[0];d&&ca(f)&&(l=[ua(f,d)])}else"none"==e&&(l=[{name:"*",penalty:3}],d&&(l=[ua(l[0],d)]));try{for(var p=(t=void 0,(0,u.XA)(l)),h=p.next();!h.done;h=p.next()){(f=h.value).level=a}}catch(v){t={error:v}}finally{try{h&&!h.done&&(s=p.return)&&s.call(p)}finally{if(t)throw t.error}}if(i.push(l),i.length>=Jo.seedMinLength&&(r=ia(i,n)))return"break";o=o.parentElement,a++};o;){if("break"===s())break}return r||(r=ia(i,n)),!r&&n?n():r}function ia(t,e){var n,r,i=pa(fa(t));if(i.length>Jo.threshold)return e?e():null;try{for(var o=(0,u.XA)(i),a=o.next();!a.done;a=o.next()){var s=a.value;if(sa(s))return s}}catch(c){n={error:c}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return null}function oa(t){for(var e=t[0],n=e.name,r=1;r<t.length;r++){var i=t[r].level||0;n=e.level===i-1?"".concat(t[r].name," > ").concat(n):"".concat(t[r].name," ").concat(n),e=t[r]}return n}function aa(t){return t.map((function(t){return t.penalty})).reduce((function(t,e){return t+e}),0)}function sa(t){var e=oa(t);switch(Ko.querySelectorAll(e).length){case 0:throw new Error("Can't select any node with this selector: ".concat(e));case 1:return!0;default:return!1}}function ua(t,e){return{name:t.name+":nth-child(".concat(e,")"),penalty:t.penalty+1}}function ca(t){return"html"!==t.name&&!t.name.startsWith("#")}function la(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.filter(da);return n.length>0?n:null}function da(t){return null!==t&&void 0!==t}function fa(t,e){var n,r,i,o,a,s;return void 0===e&&(e=[]),(0,u.Jh)(this,(function(c){switch(c.label){case 0:if(!(t.length>0))return[3,9];c.label=1;case 1:c.trys.push([1,6,7,8]),n=(0,u.XA)(t[0]),r=n.next(),c.label=2;case 2:return r.done?[3,5]:(i=r.value,[5,(0,u.XA)(fa(t.slice(1,t.length),e.concat(i)))]);case 3:c.sent(),c.label=4;case 4:return r=n.next(),[3,2];case 5:return[3,8];case 6:return o=c.sent(),a={error:o},[3,8];case 7:try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}return[7];case 8:return[3,11];case 9:return[4,e];case 10:c.sent(),c.label=11;case 11:return[2]}}))}function pa(t){return(0,u.ev)([],(0,u.CR)(t),!1).sort((function(t,e){return aa(t)-aa(e)}))}function ha(t,e,n){var r,i,o;return void 0===n&&(n={counter:0,visited:new Map}),(0,u.Jh)(this,(function(a){switch(a.label){case 0:if(!(t.length>2&&t.length>Jo.optimizedMinLength))return[3,5];r=1,a.label=1;case 1:return r<t.length-1?n.counter>Jo.maxNumberOfTries?[2]:(n.counter+=1,(i=(0,u.ev)([],(0,u.CR)(t),!1)).splice(r,1),o=oa(i),n.visited.has(o)?[2]:sa(i)&&function(t,e){return Ko.querySelector(oa(t))===e}(i,e)?[4,i]:[3,4]):[3,5];case 2:return a.sent(),n.visited.set(o,!0),[5,(0,u.XA)(ha(i,e,n))];case 3:a.sent(),a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}var va=function(t){var e=t.version,n=t.events,r=[];n.forEach((function(t){var e=JSON.parse(t);"click"===e.type&&r.push(e)}));var i=r.reduce((function(t,e){var n=e.x,r=e.y,i=e.selector,o=e.timestamp,a=o-o%36e5,s="".concat(n,":").concat(r,":").concat(null!==i&&void 0!==i?i:"",":").concat(a);return t[s]?t[s].count+=1:t[s]=(0,u.pi)((0,u.pi)({},e),{timestamp:a,count:1}),t}),{});return{version:e,events:Object.values(i)}},ma=function(t){var e=t.eventsManager,n=t.sessionId,r=t.deviceIdFn;return function(t){if(t.type===ea.Click){var i=$e();if(i){var o=i.location,a=i.innerHeight,s=i.innerWidth;if(o){var u,c=t.x,l=t.y,d=hi.mirror.getNode(t.id);d&&(u=na(d));var f=nr(i),p={x:c+f.left,y:l+f.top,selector:u,viewportHeight:a,viewportWidth:s,pageUrl:o.href,timestamp:Date.now(),type:"click"},h=r();h&&e.addEvent({sessionId:n,event:{type:"interaction",data:JSON.stringify(p)},deviceId:h})}}}}},ga=function(t){var e=t.sessionId,n=t.deviceId;this.deviceId=n,this.sessionId=e,e&&n&&(this.sessionReplayId=function(t,e){return"".concat(e,"/").concat(t)}(e,n))},ya=function(){function t(){var t=this;this.name="@amplitude/session-replay-browser",this.recordCancelCallback=null,this.blurListener=function(){t.stopRecordingAndSendEvents()},this.focusListener=function(){t.initialize()},this.stopRecordingEvents=function(){try{t.recordCancelCallback&&t.recordCancelCallback(),t.recordCancelCallback=null}catch(n){var e=n;t.loggerProvider.warn("Error occurred while stopping recording: ".concat(e.toString()))}},this.loggerProvider=new Pe}return t.prototype.init=function(t,e){return un(this._init(t,e))},t.prototype.removeInvalidSelectors=function(){var t,e=this;if(null===(t=this.config)||void 0===t?void 0:t.privacyConfig){var n=document.createDocumentFragment(),r=function(r){if(void 0===r&&(r=[]),"string"===typeof r&&(r=[r]),r=r.filter((function(r){try{n.querySelector(r)}catch(t){return e.loggerProvider.warn('[session-replay-browser] omitting selector "'.concat(r,'" because it is invalid')),!1}return!0})),0!==r.length)return r};this.config.privacyConfig.blockSelector=r(this.config.privacyConfig.blockSelector),this.config.privacyConfig.maskSelector=r(this.config.privacyConfig.maskSelector),this.config.privacyConfig.unmaskSelector=r(this.config.privacyConfig.unmaskSelector)}},t.prototype._init=function(t,e){var n,r;return(0,u.mG)(this,void 0,void 0,(function(){var i,o,a,s,c,l;return(0,u.Jh)(this,(function(d){switch(d.label){case 0:return this.loggerProvider=e.loggerProvider||new Pe,Object.prototype.hasOwnProperty.call(e,"logLevel")&&this.loggerProvider.enable(e.logLevel),this.identifiers=new ga({sessionId:e.sessionId,deviceId:e.deviceId}),i=this,[4,To(t,e)];case 1:return i.joinedConfigGenerator=d.sent(),o=this,[4,this.joinedConfigGenerator.generateJoinedConfig(this.identifiers.sessionId)];case 2:return o.config=d.sent(),this.loggerProvider.debug(JSON.stringify({name:"session replay joined privacy config",privacyConfig:this.config.privacyConfig},null,2)),this.removeInvalidSelectors(),a=[],[4,Qo({config:this.config,sessionId:this.identifiers.sessionId,type:"replay"})];case 3:return s=d.sent(),a.push({name:"replay",manager:s}),(null===(n=this.config.interactionConfig)||void 0===n?void 0:n.enabled)?[4,Qo({config:this.config,sessionId:this.identifiers.sessionId,type:"interaction",minInterval:null!==(r=this.config.interactionConfig.trackEveryNms)&&void 0!==r?r:3e4,maxInterval:6e4,payloadBatcher:va})]:[3,5];case 4:c=d.sent(),a.push({name:"interaction",manager:c}),d.label=5;case 5:return this.eventsManager=new(ta.bind.apply(ta,(0,u.ev)([void 0],(0,u.CR)(a),!1))),this.loggerProvider.log("Installing @amplitude/session-replay-browser."),(l=$e())&&(l.removeEventListener("blur",this.blurListener),l.removeEventListener("focus",this.focusListener),l.addEventListener("blur",this.blurListener),l.addEventListener("focus",this.focusListener)),l&&l.document&&l.document.hasFocus()&&this.initialize(!0),[2]}}))}))},t.prototype.setSessionId=function(t,e){return un(this.asyncSetSessionId(t,e))},t.prototype.asyncSetSessionId=function(t,e){return(0,u.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,u.Jh)(this,(function(o){switch(o.label){case 0:return(n=this.identifiers&&this.identifiers.sessionId)&&this.stopRecordingAndSendEvents(n),r=e||this.getDeviceId(),this.identifiers=new ga({sessionId:t,deviceId:r}),this.joinedConfigGenerator&&n?(i=this,[4,this.joinedConfigGenerator.generateJoinedConfig(this.identifiers.sessionId)]):[3,2];case 1:i.config=o.sent(),o.label=2;case 2:return this.recordEvents(),[2]}}))}))},t.prototype.getSessionReplayDebugPropertyValue=function(){var t="";return this.config&&(t=Xo(this.config.apiKey).toString()),JSON.stringify({appHash:t})},t.prototype.getSessionReplayProperties=function(){var t;if(!this.config||!this.identifiers)return this.loggerProvider.error("Session replay init has not been called, cannot get session recording properties."),{};var e=!!this.config.debugMode;if(this.getShouldRecord(e)){var n=((t={})[Ge]=this.identifiers.sessionReplayId?this.identifiers.sessionReplayId:null,t);return this.config.debugMode&&(n[Je]=this.getSessionReplayDebugPropertyValue()),n}return{}},t.prototype.stopRecordingAndSendEvents=function(t){var e;this.stopRecordingEvents();var n=t||(null===(e=this.identifiers)||void 0===e?void 0:e.sessionId),r=this.getDeviceId();this.eventsManager&&n&&r&&this.eventsManager.sendCurrentSequenceEvents({sessionId:n,deviceId:r})},t.prototype.initialize=function(t){var e;if(void 0===t&&(t=!1),null===(e=this.identifiers)||void 0===e?void 0:e.sessionId){var n=this.getDeviceId();n?(this.eventsManager&&t&&this.eventsManager.sendStoredEvents({deviceId:n}),this.recordEvents()):this.loggerProvider.log("Session is not being recorded due to lack of device id.")}else this.loggerProvider.log("Session is not being recorded due to lack of session id.")},t.prototype.shouldOptOut=function(){var t,e,n;(null===(t=this.config)||void 0===t?void 0:t.instanceName)&&(n=sn(this.config.instanceName).identityStore.getIdentity().optOut);return void 0!==n?n:null===(e=this.config)||void 0===e?void 0:e.optOut},t.prototype.getShouldRecord=function(t){if(void 0===t&&(t=!1),!this.identifiers||!this.config||!this.identifiers.sessionId)return this.loggerProvider.warn("Session is not being recorded due to lack of config, please call sessionReplay.init."),!1;if(!this.config.captureEnabled)return this.loggerProvider.log("Session ".concat(this.identifiers.sessionId," not being captured due to capture being disabled for project.")),!1;var e=$e();if(!t&&e&&e.document&&!e.document.hasFocus())return this.loggerProvider.log("Session ".concat(this.identifiers.sessionId," temporarily not recording due to lack of browser focus.")),!1;if(this.shouldOptOut())return this.loggerProvider.log("Opting session ".concat(this.identifiers.sessionId," out of recording due to optOut config.")),!1;var n=function(t,e){var n=Xo(t.toString());return 31*Math.abs(n)%100/100<e}(this.identifiers.sessionId,this.config.sampleRate);return n||this.loggerProvider.log("Opting session ".concat(this.identifiers.sessionId," out of recording due to sample rate.")),n},t.prototype.getBlockSelectors=function(){var t,e,n,r=null!==(n=null===(e=null===(t=this.config)||void 0===t?void 0:t.privacyConfig)||void 0===e?void 0:e.blockSelector)&&void 0!==n?n:[];if(0!==r.length)return r},t.prototype.getMaskTextSelectors=function(){var t,e,n,r;if("conservative"===(null===(e=null===(t=this.config)||void 0===t?void 0:t.privacyConfig)||void 0===e?void 0:e.defaultMaskLevel))return"*";var i=null===(r=null===(n=this.config)||void 0===n?void 0:n.privacyConfig)||void 0===r?void 0:r.maskSelector;return i||void 0},t.prototype.recordEvents=function(){var t,e=this,n=this.getShouldRecord(),r=null===(t=this.identifiers)||void 0===t?void 0:t.sessionId;if(n&&r&&this.config){this.stopRecordingEvents();var i=this.config.privacyConfig;this.recordCancelCallback=hi({emit:function(t){var n=$e();if(n&&n.document&&!n.document.hasFocus()||!e.getShouldRecord())e.stopRecordingAndSendEvents();else{var i=JSON.stringify(t),o=e.getDeviceId();e.eventsManager&&o&&e.eventsManager.addEvent({event:{type:"replay",data:i},sessionId:r,deviceId:o})}},packFn:Zi,inlineStylesheet:this.config.shouldInlineStylesheet,hooks:{mouseInteraction:this.eventsManager&&ma({eventsManager:this.eventsManager,sessionId:r,deviceIdFn:this.getDeviceId.bind(this)})},maskAllInputs:!0,maskTextClass:Ke,blockClass:"amp-block",blockSelector:this.getBlockSelectors(),maskInputFn:$o("input",i),maskTextFn:$o("text",i),maskTextSelector:this.getMaskTextSelectors(),recordCanvas:!1,errorHandler:function(t){var n=t;if(n.message.includes("insertRule")&&n.message.includes("CSSStyleSheet"))throw n;if(n._external_)throw n;return e.loggerProvider.warn("Error while recording: ",n.toString()),!0}})}},t.prototype.getDeviceId=function(){var t,e,n;(null===(t=this.config)||void 0===t?void 0:t.instanceName)&&(n=sn(this.config.instanceName).identityStore.getIdentity().deviceId);return n||(null===(e=this.identifiers)||void 0===e?void 0:e.deviceId)},t.prototype.getSessionId=function(){var t;return null===(t=this.identifiers)||void 0===t?void 0:t.sessionId},t.prototype.flush=function(t){var e;return void 0===t&&(t=!1),(0,u.mG)(this,void 0,void 0,(function(){return(0,u.Jh)(this,(function(n){return[2,null===(e=this.eventsManager)||void 0===e?void 0:e.flush(t)]}))}))},t.prototype.shutdown=function(){var t=$e();t&&(t.removeEventListener("blur",this.blurListener),t.removeEventListener("focus",this.focusListener)),this.stopRecordingAndSendEvents()},t}(),ba=function(t){return function(){var e=t.config||We();return{logger:e.loggerProvider,logLevel:e.logLevel}}},wa=function(){var t=new ya;return{init:Re(t.init.bind(t),"init",ba(t)),setSessionId:Re(t.setSessionId.bind(t),"setSessionId",ba(t)),getSessionId:Re(t.getSessionId.bind(t),"getSessionId",ba(t)),getSessionReplayProperties:Re(t.getSessionReplayProperties.bind(t),"getSessionReplayProperties",ba(t)),flush:Re(t.flush.bind(t),"flush",ba(t)),shutdown:Re(t.shutdown.bind(t),"shutdown",ba(t))}}(),_a=wa.init,Sa=wa.setSessionId,ka=wa.getSessionId,xa=wa.getSessionReplayProperties;wa.flush,wa.shutdown;function Ea(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}var Ia=function t(e,n){function r(t,r,i){if("undefined"!==typeof document){"number"===typeof(i=Ea({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var a in i)i[a]&&(o+="; "+a,!0!==i[a]&&(o+="="+i[a].split(";")[0]));return document.cookie=t+"="+e.write(r,t)+o}}return Object.create({set:r,get:function(t){if("undefined"!==typeof document&&(!arguments.length||t)){for(var n=document.cookie?document.cookie.split("; "):[],r={},i=0;i<n.length;i++){var o=n[i].split("="),a=o.slice(1).join("=");try{var s=decodeURIComponent(o[0]);if(r[s]=e.read(a,s),t===s)break}catch(u){}}return t?r[t]:r}},remove:function(t,e){r(t,"",Ea({},e,{expires:-1}))},withAttributes:function(e){return t(this.converter,Ea({},this.attributes,e))},withConverter:function(e){return t(Ea({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(e)}})}({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),Ca=function(){var t=Ia.get("amp_session_id");if(t)return parseInt(t,10)},Oa=function(t){return t.event.userId||t.event.anonymousId},Ta=function(t){return(0,u.mG)(void 0,void 0,void 0,(function(){var e,n,r,i,o,a;return(0,u.Jh)(this,(function(s){switch(s.label){case 0:return e=Ca()||0,n=t.event.integrations&&t.event.integrations["Actions Amplitude"],(r=null===n||void 0===n?void 0:n.session_id)&&e<r?(Ia.set("amp_session_id",r.toString()),i=Oa(t),[4,Sa(r,i).promise]):[3,2];case 1:s.sent(),s.label=2;case 2:return o=xa(),a=(0,u.pi)((0,u.pi)({},t.event.properties),o),t.updateEvent("properties",a),[2,t]}}))}))},Aa=function(t){return function(t){return(0,u.mG)(void 0,[t],void 0,(function(t){var e,n,r=t.amplitudeApiKey,i=t.sessionReplayOptions,o=t.segmentInstance;return(0,u.Jh)(this,(function(t){switch(t.label){case 0:return n={name:"Session Replay Events",type:"enrichment",version:"1.0.0",isLoaded:function(){return!0},load:function(t,n){return(0,u.mG)(void 0,void 0,void 0,(function(){var t,o,a;return(0,u.Jh)(this,(function(s){return t=n.user(),o=t.anonymousId(),a=Ca(),e=_a(r,(0,u.pi)((0,u.pi)({},i),{sessionId:a,deviceId:o||void 0})).promise,[2]}))}))},track:function(t){return(0,u.mG)(void 0,void 0,void 0,(function(){return(0,u.Jh)(this,(function(n){switch(n.label){case 0:return[4,e];case 1:return n.sent(),[4,Ta(t)];case 2:return[2,n.sent()]}}))}))},page:function(t){return(0,u.mG)(void 0,void 0,void 0,(function(){return(0,u.Jh)(this,(function(n){switch(n.label){case 0:return[4,e];case 1:return n.sent(),[4,Ta(t)];case 2:return[2,n.sent()]}}))}))},identify:function(t){return(0,u.mG)(void 0,void 0,void 0,(function(){var n,r;return(0,u.Jh)(this,(function(i){switch(i.label){case 0:return[4,e];case 1:return i.sent(),n=Oa(t),(r=ka())?[4,Sa(r,n).promise]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2,t]}}))}))}},[4,o.register(n)];case 1:return t.sent(),[2]}}))}))}(t)};function Ra(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ma(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function Na(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Ma(o,r,i,a,s,"next",t)}function s(t){Ma(o,r,i,a,s,"throw",t)}a(void 0)}))}}function La(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Da(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){La(t,e,n[e])}))}return t}function Pa(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ja(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return Ra(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ra(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Fa=function(t){var e=t.AnalyticsBrowser,n=void 0===e?ue:e,r=t.children,u=Pa(t,["AnalyticsBrowser","children"]),c=(0,le.Kw)(Da({AnalyticsBrowser:n},u)),l=c.analytics,d=c.analytics,f=d.identify,p=d.page,h=d.track,v=c.gtag,m=(0,ce.NQ)();return(0,s.qR)((function(){if(!fe.Cg){if((0,ye.f)("CuAnalytics:window.analytics::".concat(Boolean(window.analytics))),(0,ge.B)()){var t=window.sessionStorage.getItem("journey");(!t||t&&!t.endsWith(window.location.pathname.split("?")[0]))&&window.sessionStorage.setItem("journey","".concat(t?t+",":"").concat(window.location.pathname.split("?")[0]))}var e=function(){var t=Na(i().mark((function t(e){var n,r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===window||void 0===window?void 0:window.analytics){t.next=14;break}return t.prev=1,t.t0=ja,t.next=5,e;case 5:t.t1=t.sent,n=(0,t.t0)(t.t1,1),r=n[0],window.analytics=r,t.next=14;break;case 11:t.prev=11,t.t2=t.catch(1),console.error(t.t2);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}();e(l).then((function(){var t=window.location,e=t.protocol,n=t.host,r=t.pathname,i=t.href;if(null===m||void 0===m||m.setAttributes(Da({id:_e(),user_id:(0,Se.F)(),browser:xe(window.navigator.userAgent.toLowerCase()),isDesktopSize:window.matchMedia("(min-width: 1200px)").matches,isTabletSize:window.matchMedia("(min-width: 800px) and (max-width: 1199px)").matches,isPhoneSize:window.matchMedia("(max-width: 799px)").matches,url:e+"//"+n+r,pathName:window.location.pathname.split("?")[0],referrer:document.referrer,isModernBrowser:Oe()},pe(i))),(0,me.ej)("cuGBId")){var o=(0,me.Do)("cuGBId"),a=(0,me.Do)("cuGBVariant");if(!o||!a)return;var s=sessionStorage.getItem("growthbookRedirects");if(s&&s.includes(o))return;try{(null===window||void 0===window?void 0:window.analytics)&&window.analytics.track("view growthbook experiment",{experimentId:o,variationId:a},(function(){s?sessionStorage.setItem("growthbookRedirects","".concat(s,", ").concat(o)):sessionStorage.setItem("growthbookRedirects","".concat(o)),(0,me.kT)("cuGBId"),(0,me.kT)("cuGBVariant")}))}catch(u){console.error("Error in GB trackingCallback:",u)}}})).catch(console.error),Na(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Aa({segmentInstance:l,amplitudeApiKey:fe.n1,sessionReplayOptions:{logLevel:4,sampleRate:fe.F_,debugMode:!0}});case 1:case"end":return t.stop()}}),t)})))()}})),function(){var t=(0,de.useRouter)(),e=(0,ce.NQ)(),n=(0,a.useRef)();(0,a.useEffect)((function(){if(e){void 0===n.current&&((0,ye.f)("SEGMENT_JOURNEY::checking session storage",n.current),n.current=(0,ge.B)(),(0,ye.f)("SEGMENT_JOURNEY::setting session storage: "+n.current));var r=function(t){var n=window.location,r=n.protocol,i=n.host,o=n.href,a=we({url:r+"//"+i+t,pathName:window.location.pathname.split("?")[0]},pe(o));e.setURL(r+"//"+i+t),e.setAttributes(we({},e.getAttributes(),a))};if(e.setURL(window.location.href),n.current){(0,ye.f)("SEGMENT_JOURNEY::has session storage: "+n.current);var i=window.sessionStorage.getItem("journey");(!i||i&&!i.endsWith(window.location.pathname.split("?")[0]))&&window.sessionStorage.setItem("journey","".concat(i?i+",":"").concat(window.location.pathname.split("?")[0]))}return t.events.on("routeChangeComplete",r),function(){return t.events.off("routeChangeComplete",r)}}}),[t,e])}(),ke("redirect-flag-for-next"),(0,o.tZ)(Ua.Provider,{value:{identify:f,gtag:v},children:(0,o.tZ)(Ba.Provider,{value:{page:p,gtag:v},children:(0,o.tZ)(za.Z.Provider,{value:{track:h,gtag:v},children:r})})})},Ua=(0,a.createContext)(null),Ba=(0,a.createContext)(null),za=n(39242)},51663:function(t,e,n){"use strict";n.d(e,{Kw:function(){return h},fx:function(){return S},Bu:function(){return k.Z}});var r=n(11720),i=n(14181),o=function(t){return"object"===typeof t&&null!==t},a=function(t,e){return t.toString().localeCompare(e.toString())};function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var c=n(30619);function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function p(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var h=function(t){var e=t.AnalyticsBrowser,n=f(t,["AnalyticsBrowser"]),s=function t(e,n,r){var i=Object.keys(e);i.sort(a);var s=[],c=!0,l=!1,d=void 0;try{for(var f,p=i[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var h=f.value,v=h.toString();s.push("".concat(r,".").concat(n,".").concat(v));var m=e[h];if(o(m)){var g,y=t(m,n+1,"".concat(r,".").concat(n,".").concat(v));(g=s).push.apply(g,u(y))}else s.push(m)}}catch(b){l=!0,d=b}finally{try{c||null==p.return||p.return()}finally{if(l)throw d}}return s}(n,1,"root"),l=(0,r.useMemo)((function(){var t=n.cdnSettings,r=n.cdnURL,i=n.plugins,o=n.writeKey,a=f(n,["cdnSettings","cdnURL","plugins","writeKey"]),s={cdnSettings:t,cdnURL:r,plugins:i,writeKey:o};return e.load(s,a)}),[e].concat(p(s))),h=(0,r.useMemo)((function(){return(0,c.G)(i.Qg)}),[]);return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){d(t,e,n[e])}))}return t}({analytics:l},h&&{gtag:h})},v=n(34051),m=n.n(v),g=n(46763),y=n(27218),b=n(96552);function w(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var S=function(){var t,e,n=(0,r.useContext)(g.FU),o=i.Qg?globalThis:null;if(null===n)throw new Error("".concat(i.wC,": identify"));var a=function(){var t;if(i.Qg)return(0,b.f)("useSegmentIdentify::getOneTrustConsentStatus::OptanonActiveGroups","log",{activegroups:null===o||void 0===o?void 0:o.OptanonActiveGroups}),null===o||void 0===o||null===(t=o.OptanonActiveGroups)||void 0===t?void 0:t.includes("C0002")},s=function(){var t,e=(t=m().mark((function t(){return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.resolve({}));case 1:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){w(o,r,i,a,s,"next",t)}function s(t){w(o,r,i,a,s,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}(),u=(null===(t=(0,y.b)())||void 0===t?void 0:t.location)||"",c=(null===(e=(0,y.b)())||void 0===e?void 0:e.pathname)||"",l=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){_(t,e,n[e])}))}return t}({},n.gtag,{actual_url:u,actual_path:c});return(0,b.f)("getOneTrustConsentStatus()","log",{getOneTrustConsentStatus:a()}),a()?[n.identify,l]:[s,{}]};var k=n(28153)},28153:function(t,e,n){"use strict";var r=n(34051),i=n.n(r),o=n(11720),a=n(39242),s=n(14181),u=n(27218),c=n(91486),l=n(96552);function d(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){f(t,e,n[e])}))}return t}e.Z=function(t){var e,n,r=(0,o.useContext)(a.Z),f=s.Qg?globalThis:null;if(null===r)throw new Error("".concat(s.wC,": track"));var h=function(){var t,e=(t=i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.resolve({}));case 1:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){d(o,r,i,a,s,"next",t)}function s(t){d(o,r,i,a,s,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}(),v=(null===(e=(0,u.b)())||void 0===e?void 0:e.location)||"",m=(null===(n=(0,u.b)())||void 0===n?void 0:n.pathname)||"",g=(0,c.AJ)(p({},t)),y=p({},r.gtag,g,{actual_url:v,actual_path:m});return function(){var t;if(s.Qg)return(0,l.f)("useSegmentTrack::getOneTrustConsentStatus::OptanonActiveGroups","log",{activegroups:null===f||void 0===f?void 0:f.OptanonActiveGroups}),null===f||void 0===f||null===(t=f.OptanonActiveGroups)||void 0===t?void 0:t.includes("C0002")}()?[r.track,y]:[h,{}]}},21355:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return oc}});var r=n(97997),i=(n(1720),{log:"log",debug:"debug",info:"info",warn:"warn",error:"error"}),o=console,a={};Object.keys(i).forEach((function(t){a[t]=o[t]}));var s="Datadog Browser SDK:",u={debug:a.debug.bind(o,s),log:a.log.bind(o,s),info:a.info.bind(o,s),warn:a.warn.bind(o,s),error:a.error.bind(o,s)},c="https://docs.datadoghq.com",l="".concat(c,"/real_user_monitoring/browser/troubleshooting"),d="More details:";function f(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return t.apply(void 0,n)}catch(i){u.error(e,i)}}}var p,h=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},v=!1;function m(t){v=t}function g(t){return function(){return y(t,this,arguments)}}function y(t,e,n){try{return t.apply(e,n)}catch(r){if(b(r),p)try{p(r)}catch(r){b(r)}}}function b(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];v&&u.error.apply(u,h(["[MONITOR]"],t,!1))}function w(t,e){return-1!==t.indexOf(e)}function _(t){if(Array.from)return Array.from(t);var e=[];if(t instanceof Set)t.forEach((function(t){return e.push(t)}));else for(var n=0;n<t.length;n++)e.push(t[n]);return e}function S(t,e){for(var n=0;n<t.length;n+=1){var r=t[n];if(e(r,n))return r}}function k(t){return Object.keys(t).map((function(e){return t[e]}))}function x(t){return Object.keys(t).map((function(e){return[e,t[e]]}))}function E(t,e){return t.slice(0,e.length)===e}function I(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.forEach((function(e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})),t}function C(){if("object"===typeof globalThis)return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:!0});var t=_dd_temp_;return delete Object.prototype._dd_temp_,"object"!==typeof t&&(t="object"===typeof self?self:"object"===typeof window?window:{}),t}var O=1024,T=/[^\u0000-\u007F]/;function A(t){return T.test(t)?void 0!==window.TextEncoder?(new TextEncoder).encode(t).length:new Blob([t]).size:t.length}function R(t,e){var n,r=C();return r.Zone&&"function"===typeof r.Zone.__symbol__&&(n=t[r.Zone.__symbol__(e)]),n||(n=t[e]),n}function M(t,e){return R(C(),"setTimeout")(g(t),e)}function N(t){R(C(),"clearTimeout")(t)}function L(t,e){return R(C(),"setInterval")(g(t),e)}function D(t){R(C(),"clearInterval")(t)}function P(t,e,n){var r,i,o=!n||void 0===n.leading||n.leading,a=!n||void 0===n.trailing||n.trailing,s=!1;return{throttled:function(){for(var n=[],u=0;u<arguments.length;u++)n[u]=arguments[u];s?r=n:(o?t.apply(void 0,n):r=n,s=!0,i=M((function(){a&&r&&t.apply(void 0,r),s=!1,r=void 0}),e))},cancel:function(){N(i),s=!1,r=void 0}}}function j(){}function F(t,e,n){if("object"!==typeof t||null===t)return JSON.stringify(t);var r=U(Object.prototype),i=U(Array.prototype),o=U(Object.getPrototypeOf(t)),a=U(t);try{return JSON.stringify(t,e,n)}catch(_s){return"<error: unable to serialize object>"}finally{r(),i(),o(),a()}}function U(t){var e=t,n=e.toJSON;return n?(delete e.toJSON,function(){e.toJSON=n}):j}function B(t){return I({},t)}function z(t,e){return Object.keys(t).some((function(n){return t[n]===e}))}function V(t){return 0===Object.keys(t).length}function q(t){void 0===t&&(t=2);var e=new Map,n=!1;function r(r){if(void 0===r&&(r=0),!n&&0!==t){var i=2===t?3072:16384,o=r;e.forEach((function(t){o+=t.getBytesCount()})),o>i&&(!function(t){u.warn("Customer data exceeds the recommended ".concat(t/O,"KiB threshold. ").concat(d," ").concat(l,"/#customer-data-exceeds-the-recommended-threshold-warning"))}(i),n=!0)}}return{createDetachedTracker:function(){var t=G((function(){return r(t.getBytesCount())}));return t},getOrCreateTracker:function(t){return e.has(t)||e.set(t,G(r)),e.get(t)},setCompressionStatus:function(e){0===t&&(t=e,r())},getCompressionStatus:function(){return t},stop:function(){e.forEach((function(t){return t.stop()})),e.clear()}}}function G(t){var e=0,n=P((function(n){e=A(F(n)),t()}),200),r=n.throttled,i=n.cancel,o=function(){i(),e=0};return{updateCustomerData:function(t){V(t)?o():r(t)},resetCustomerData:o,getBytesCount:function(){return e},stop:function(){i()}}}function H(t){return null===t?"null":Array.isArray(t)?"array":typeof t}function J(t,e,n){if(void 0===n&&(n=function(){if("undefined"!==typeof WeakSet){var t=new WeakSet;return{hasAlreadyBeenSeen:function(e){var n=t.has(e);return n||t.add(e),n}}}var e=[];return{hasAlreadyBeenSeen:function(t){var n=e.indexOf(t)>=0;return n||e.push(t),n}}}()),void 0===e)return t;if("object"!==typeof e||null===e)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){var r=e.flags||[e.global?"g":"",e.ignoreCase?"i":"",e.multiline?"m":"",e.sticky?"y":"",e.unicode?"u":""].join("");return new RegExp(e.source,r)}if(!n.hasAlreadyBeenSeen(e)){if(Array.isArray(e)){for(var i=Array.isArray(t)?t:[],o=0;o<e.length;++o)i[o]=J(i[o],e[o],n);return i}var a="object"===H(t)?t:{};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(a[s]=J(a[s],e[s],n));return a}}function K(t){return J(void 0,t)}function W(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];void 0!==o&&null!==o&&(t=J(t,o))}return t}function Z(t,e){void 0===e&&(e=225280);var n=U(Object.prototype),r=U(Array.prototype),i=[],o=new WeakMap,a=$(t,"$",void 0,i,o),s=JSON.stringify(a),u=s?s.length:0;if(!(u>e)){for(;i.length>0&&u<e;){var c=i.shift(),l=0;if(Array.isArray(c.source))for(var d=0;d<c.source.length;d++){if(u+=void 0!==(f=$(c.source[d],c.path,d,i,o))?JSON.stringify(f).length:4,u+=l,l=1,u>e){X(e,"truncated",t);break}c.target[d]=f}else for(var d in c.source)if(Object.prototype.hasOwnProperty.call(c.source,d)){var f;if(void 0!==(f=$(c.source[d],c.path,d,i,o))&&(u+=JSON.stringify(f).length+l+d.length+3,l=1),u>e){X(e,"truncated",t);break}c.target[d]=f}}return n(),r(),a}X(e,"discarded",t)}function $(t,e,n,r,i){var o=function(t){var e=t;if(e&&"function"===typeof e.toJSON)try{return e.toJSON()}catch(_s){}return t}(t);if(!o||"object"!==typeof o)return function(t){if("bigint"===typeof t)return"[BigInt] ".concat(t.toString());if("function"===typeof t)return"[Function] ".concat(t.name||"unknown");if("symbol"===typeof t)return"[Symbol] ".concat(t.description||t.toString());return t}(o);var a=function(t){try{if(t instanceof Event)return{isTrusted:t.isTrusted};var e=Object.prototype.toString.call(t).match(/\[object (.*)\]/);if(e&&e[1])return"[".concat(e[1],"]")}catch(_s){}return"[Unserializable]"}(o);if("[Object]"!==a&&"[Array]"!==a&&"[Error]"!==a)return a;var s=t;if(i.has(s))return"[Reference seen at ".concat(i.get(s),"]");var u=void 0!==n?"".concat(e,".").concat(n):e,c=Array.isArray(o)?[]:{};return i.set(s,u),r.push({source:o,target:c,path:u}),c}function X(t,e,n){u.warn("The data provided has been ".concat(e," as it is over the limit of ").concat(t," characters:"),n)}var Y=function(){function t(t){this.onFirstSubscribe=t,this.observers=[]}return t.prototype.subscribe=function(t){var e=this;return this.observers.push(t),1===this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe(this)||void 0),{unsubscribe:function(){e.observers=e.observers.filter((function(e){return t!==e})),!e.observers.length&&e.onLastUnsubscribe&&e.onLastUnsubscribe()}}},t.prototype.notify=function(t){this.observers.forEach((function(e){return e(t)}))},t}();function Q(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Y((function(e){var n=t.map((function(t){return t.subscribe((function(t){return e.notify(t)}))}));return function(){return n.forEach((function(t){return t.unsubscribe()}))}}))}function tt(t){var e={},n=new Y,r={getContext:function(){return K(e)},setContext:function(i){"object"===H(i)?(e=Z(i),t&&t.updateCustomerData(e)):r.clearContext(),n.notify()},setContextProperty:function(r,i){e[r]=Z(i),t&&t.updateCustomerData(e),n.notify()},removeContextProperty:function(r){delete e[r],t&&t.updateCustomerData(e),n.notify()},clearContext:function(){e={},t&&t.resetCustomerData(),n.notify()},changeObservable:n};return r}var et={GRANTED:"granted",NOT_GRANTED:"not-granted"};function nt(t,e,n,r,i){return rt(t,e,[n],r,i)}function rt(t,e,n,r,i){var o=void 0===i?{}:i,a=o.once,s=o.capture,u=o.passive,c=g((function(e){(e.isTrusted||e.__ddIsTrusted||t.allowUntrustedEvents)&&(a&&f(),r(e))})),l=u?{capture:s,passive:u}:s,d=R(e,"addEventListener");function f(){var t=R(e,"removeEventListener");n.forEach((function(n){return t.call(e,n,c,l)}))}return n.forEach((function(t){return d.call(e,t,c,l)})),{stop:f}}var it="_dd_c",ot=[];function at(t,e,n,r){var i=function(t,e){return"".concat(it,"_").concat(t,"_").concat(e)}(n,r);function o(){var t=localStorage.getItem(i);return null!==t?JSON.parse(t):{}}ot.push(nt(t,window,"storage",(function(t){var n=t.key;i===n&&e.setContext(o())}))),e.changeObservable.subscribe((function(){localStorage.setItem(i,JSON.stringify(e.getContext()))})),e.setContext(W(o(),e.getContext()))}function st(){var t="",e=0;return{isAsync:!1,get isEmpty(){return!t},write:function(n,r){var i=A(n);e+=i,t+=n,r&&r(i)},finish:function(t){t(this.finishSync())},finishSync:function(){var n={output:t,outputBytesCount:e,rawBytesCount:e,pendingData:""};return t="",e=0,n},estimateEncodedBytesCount:function(t){return t.length}}}var ut="?";function ct(t){var e=[],n=yt(t,"stack"),r=String(t);return n&&E(n,r)&&(n=n.slice(r.length)),n&&n.split("\n").forEach((function(t){var n=function(t){var e=ft.exec(t);if(!e)return;var n=e[2]&&0===e[2].indexOf("native"),r=e[2]&&0===e[2].indexOf("eval"),i=pt.exec(e[2]);r&&i&&(e[2]=i[1],e[3]=i[2],e[4]=i[3]);return{args:n?[e[2]]:[],column:e[4]?+e[4]:void 0,func:e[1]||ut,line:e[3]?+e[3]:void 0,url:n?void 0:e[2]}}(t)||function(t){var e=ht.exec(t);if(!e)return;return{args:[],column:e[3]?+e[3]:void 0,func:ut,line:e[2]?+e[2]:void 0,url:e[1]}}(t)||function(t){var e=vt.exec(t);if(!e)return;return{args:[],column:e[4]?+e[4]:void 0,func:e[1]||ut,line:+e[3],url:e[2]}}(t)||function(t){var e=mt.exec(t);if(!e)return;var n=e[3]&&e[3].indexOf(" > eval")>-1,r=gt.exec(e[3]);n&&r&&(e[3]=r[1],e[4]=r[2],e[5]=void 0);return{args:e[2]?e[2].split(","):[],column:e[5]?+e[5]:void 0,func:e[1]||ut,line:e[4]?+e[4]:void 0,url:e[3]}}(t);n&&(!n.func&&n.line&&(n.func=ut),e.push(n))})),{message:yt(t,"message"),name:yt(t,"name"),stack:e}}var lt="((?:file|https?|blob|chrome-extension|native|eval|webpack|snippet|<anonymous>|\\w+\\.|\\/).*?)",dt="(?::(\\d+))",ft=new RegExp("^\\s*at (.*?) ?\\(".concat(lt).concat(dt,"?").concat(dt,"?\\)?\\s*$"),"i"),pt=new RegExp("\\((\\S*)".concat(dt).concat(dt,"\\)"));var ht=new RegExp("^\\s*at ?".concat(lt).concat(dt,"?").concat(dt,"??\\s*$"),"i");var vt=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;var mt=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,gt=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function yt(t,e){if("object"===typeof t&&t&&e in t){var n=t[e];return"string"===typeof n?n:void 0}}function bt(t,e,n,r){var i=[{url:e,column:r,line:n}],o=function(t){var e,n,r;"[object String]"==={}.toString.call(t)&&(n=(e=wt.exec(t))[1],r=e[2]);return{name:n,message:r}}(t);return{name:o.name,message:o.message,stack:i}}var wt=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?([\s\S]*)$/;function _t(){var t,e=new Error;if(!e.stack)try{throw e}catch(n){}return y((function(){var n=ct(e);n.stack=n.stack.slice(2),t=St(n)})),t}function St(t){var e=kt(t);return t.stack.forEach((function(t){var n="?"===t.func?"<anonymous>":t.func,r=t.args&&t.args.length>0?"(".concat(t.args.join(", "),")"):"",i=t.line?":".concat(t.line):"",o=t.line&&t.column?":".concat(t.column):"";e+="\n  at ".concat(n).concat(r," @ ").concat(t.url).concat(i).concat(o)})),e}function kt(t){return"".concat(t.name||"Error",": ").concat(t.message)}var xt,Et="No stack, consider using an instance of Error";function It(t){var e=t.stackTrace,n=t.originalError,r=t.handlingStack,i=t.startClocks,o=t.nonErrorPrefix,a=t.source,s=t.handling,u=n instanceof Error,c=function(t,e,n,r){return(null===t||void 0===t?void 0:t.message)&&(null===t||void 0===t?void 0:t.name)?t.message:e?"Empty message":"".concat(n," ").concat(F(Z(r)))}(e,u,o,n),l=function(t,e){if(void 0===e)return!1;if(t)return!0;return e.stack.length>0&&(e.stack.length>1||void 0!==e.stack[0].url)}(u,e)?St(e):Et,d=u?Ot(n,a):void 0;return{startClocks:i,source:a,handling:s,handlingStack:r,originalError:n,type:e?e.name:void 0,message:c,stack:l,causes:d,fingerprint:Ct(n)}}function Ct(t){return t instanceof Error&&"dd_fingerprint"in t?String(t.dd_fingerprint):void 0}function Ot(t,e){for(var n=t,r=[];(null===n||void 0===n?void 0:n.cause)instanceof Error&&r.length<10;){var i=ct(n.cause);r.push({message:n.cause.message,source:e,type:null===i||void 0===i?void 0:i.name,stack:i&&St(i)}),n=n.cause}return r.length?r:void 0}!function(t){t.WRITABLE_RESOURCE_GRAPHQL="writable_resource_graphql",t.REMOTE_CONFIGURATION="remote_configuration",t.UPDATE_VIEW_NAME="update_view_name",t.LONG_ANIMATION_FRAME="long_animation_frame"}(xt||(xt={}));var Tt=new Set;function At(t){Array.isArray(t)&&t.filter((function(t){return z(xt,t)})).forEach((function(t){Tt.add(t)}))}function Rt(t){return Tt.has(t)}function Mt(){return Tt}var Nt="datad0g.com",Lt="dd0g-gov.com",Dt="datadoghq.com",Pt="datadoghq.eu",jt="pci.browser-intake-datadoghq.com";function Ft(t){return 0!==t&&100*Math.random()<=t}function Ut(t,e){return+t.toFixed(e)}function Bt(t){return"number"===typeof t}var zt,Vt=1e3,qt=6e4;function Gt(t){return{relative:t,timeStamp:Ht(t)}}function Ht(t){var e=Kt()-performance.now();return e>ee()?Math.round(Qt(e,t)):function(t){return Math.round(Qt(ee(),t))}(t)}function Jt(t){return Bt(t)?Ut(1e6*t,0):t}function Kt(){return(new Date).getTime()}function Wt(){return Kt()}function Zt(){return performance.now()}function $t(){return{relative:Zt(),timeStamp:Wt()}}function Xt(){return{relative:0,timeStamp:ee()}}function Yt(t,e){return e-t}function Qt(t,e){return t+e}function te(t){return t-ee()}function ee(){return void 0===zt&&(zt=performance.timing.navigationStart),zt}function ne(t,e){var n=window.__ddBrowserSdkExtensionCallback;n&&n({type:t,payload:e})}function re(){var t,e=window.navigator;return{status:e.onLine?"connected":"not_connected",interfaces:e.connection&&e.connection.type?[e.connection.type]:void 0,effective_type:null===(t=e.connection)||void 0===t?void 0:t.effectiveType}}function ie(t,e){var n=t.indexOf(e);n>=0&&t.splice(n,1)}function oe(){var t=[];return{add:function(e){t.push(e)>500&&t.splice(0,1)},remove:function(e){ie(t,e)},drain:function(e){t.forEach((function(t){return t(e)})),t.length=0}}}var ae="log",se="configuration",ue="usage",ce=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","https://d3uc069fcn7uxw.cloudfront.net","https://d20xtzwzcl0ceb.cloudfront.net","http://localhost","<anonymous>"],le=["ddog-gov.com"],de=oe(),fe=function(t){de.add((function(){return fe(t)}))};function pe(t,e){var n,r,i=new Y,o=new Set,a=!w(le,e.site)&&Ft(e.telemetrySampleRate),s=((n={})[ae]=a,n[se]=a&&Ft(e.telemetryConfigurationSampleRate),n[ue]=a&&Ft(e.telemetryUsageSampleRate),n),u={is_local_file:"file:"===window.location.protocol,is_worker:"WorkerGlobalScope"in self};return fe=function(n){var a=F(n);if(s[n.type]&&o.size<e.maxTelemetryEventsPerPage&&!o.has(a)){var c=function(t,e,n){return W({type:"telemetry",date:Wt(),service:t,version:"5.28.0",source:"browser",_dd:{format_version:2},telemetry:W(e,{runtime_env:n,connectivity:re()}),experimental_features:_(Mt())},void 0!==r?r():{})}(t,n,u);i.notify(c),ne("telemetry",c),o.add(a)}},p=ve,{setContextProvider:function(t){r=t},observable:i,enabled:a}}function he(t,e){b(i.debug,t,e),fe(I({type:ae,message:t,status:"debug"},e))}function ve(t,e){fe(I({type:ae,status:"error"},function(t){if(t instanceof Error){var e=ct(t);return{error:{kind:e.name,stack:St(ge(e))},message:e.message}}return{error:{stack:Et},message:"".concat("Uncaught"," ").concat(F(t))}}(t),e))}function me(t){fe({type:ue,usage:t})}function ge(t){return t.stack=t.stack.filter((function(t){return!t.url||ce.some((function(e){return E(t.url,e)}))})),t}function ye(t){var e=I({},t);return["id","name","email"].forEach((function(t){t in e&&(e[t]=String(e[t]))})),e}function be(t,e){e.silentMultipleInit||u.error("".concat(t," is already initialized."))}function we(t){return t?(parseInt(t,10)^16*Math.random()>>parseInt(t,10)/4).toString(16):"".concat(1e7,"-").concat(1e3,"-").concat(4e3,"-").concat(8e3,"-").concat(1e11).replace(/[018]/g,we)}var _e=/([\w-]+)\s*=\s*([^;]+)/g;function Se(t,e){for(_e.lastIndex=0;;){var n=_e.exec(t);if(!n)break;if(n[1]===e)return n[2]}}function ke(t,e,n){void 0===n&&(n="");var r=t.charCodeAt(e-1),i=r>=55296&&r<=56319?e+1:e;return t.length<=i?t:"".concat(t.slice(0,i)).concat(n)}function xe(t,e,n){function r(n){(function(t){return!e.wasInPageStateDuringPeriod("frozen",t.startClocks.relative,t.duration)})(n)&&t.notify(11,function(t,e){var n={date:t.startClocks.timeStamp,vital:{id:we(),type:t.type,name:t.name,duration:Jt(t.duration),description:t.description},type:"vital"};e&&(n._dd={vital:{computed_value:!0}});return{rawRumEvent:n,startTime:t.startClocks.relative,customerContext:t.context,domainContext:{}}}(n,!0))}return{addDurationVital:r,startDurationVital:function(t,e){return void 0===e&&(e={}),Ee(n,t,e)},stopDurationVital:function(t,e){void 0===e&&(e={}),Ie(r,n,t,e)}}}function Ee(t,e,n){var r=t.vitalsByName,i=t.vitalsByReference;void 0===n&&(n={});var o={name:e,startClocks:$t(),context:n.context,description:n.description},a={__dd_vital_reference:!0};return r.set(e,o),i.set(a,o),a}function Ie(t,e,n,r){var i=e.vitalsByName,o=e.vitalsByReference;void 0===r&&(r={});var a="string"===typeof n?i.get(n):o.get(n);a&&(t(function(t,e,n,r){var i;return{name:t.name,type:"duration",startClocks:e,duration:Yt(e.timeStamp,r.timeStamp),context:W(t.context,n.context),description:null!==(i=n.description)&&void 0!==i?i:t.description}}(a,a.startClocks,r,$t())),"string"===typeof n?i.delete(n):o.delete(n))}function Ce(){var t=C().DatadogEventBridge;if(t)return{getCapabilities:function(){var e;return JSON.parse((null===(e=t.getCapabilities)||void 0===e?void 0:e.call(t))||"[]")},getPrivacyLevel:function(){var e;return null===(e=t.getPrivacyLevel)||void 0===e?void 0:e.call(t)},getAllowedWebViewHosts:function(){return JSON.parse(t.getAllowedWebViewHosts())},send:function(e,n,r){var i=r?{id:r}:void 0;t.send(JSON.stringify({eventType:e,event:n,view:i}))}}}function Oe(t){var e=Ce();return!!e&&w(e.getCapabilities(),t)}function Te(t){var e;void 0===t&&(t=null===(e=C().location)||void 0===e?void 0:e.hostname);var n=Ce();return!!n&&n.getAllowedWebViewHosts().some((function(e){return t===e||(n=t,r=".".concat(e),n.slice(-r.length)===r);var n,r}))}function Ae(t,e,n,r){var i=(void 0===r?{}:r).computeHandlingStack,o=t[e];if("function"!==typeof o){if(!(e in t)||!E(e,"on"))return{stop:j};o=j}var a=!1,s=function(){if(a)return o.apply(this,arguments);var t,e=_(arguments);y(n,null,[{target:this,parameters:e,onPostCall:function(e){t=e},handlingStack:i?_t():void 0}]);var r=o.apply(this,e);return t&&y(t,null,[r]),r};return t[e]=s,{stop:function(){a=!0,t[e]===s&&(t[e]=o)}}}function Re(t,e,n){var r=Object.getOwnPropertyDescriptor(t,e);if(!r||!r.set||!r.configurable)return{stop:j};var i=j,o=function(t,e){M((function(){o!==i&&n(t,e)}),0)},a=function(t){r.set.call(this,t),o(this,t)};return Object.defineProperty(t,e,{set:a}),{stop:function(){var n;(null===(n=Object.getOwnPropertyDescriptor(t,e))||void 0===n?void 0:n.set)===a&&Object.defineProperty(t,e,r),o=i}}}function Me(t){return Ne(t,location.href).href}function Ne(t,e){var n=function(){if(void 0===Le)try{var t=new Fe("http://test/path");Le="http://test/path"===t.href}catch(_s){Le=!1}return Le?Fe:void 0}();if(n)try{return void 0!==e?new n(t,e):new n(t)}catch(a){throw new Error("Failed to construct URL: ".concat(String(a)," ").concat(F({url:t,base:e})))}if(void 0===e&&!/:/.test(t))throw new Error("Invalid URL: '".concat(t,"'"));var r=document,i=r.createElement("a");if(void 0!==e){var o=(r=document.implementation.createHTMLDocument("")).createElement("base");o.href=e,r.head.appendChild(o),r.body.appendChild(i)}return i.href=t,i}var Le,De,Pe,je,Fe=URL;function Ue(){return De||(De=new Y((function(t){if(window.fetch){var e=Ae(window,"fetch",(function(e){return function(t,e){var n=t.parameters,r=t.onPostCall,i=t.handlingStack,o=n[0],a=n[1],s=a&&a.method;void 0===s&&o instanceof Request&&(s=o.method);var u=void 0!==s?String(s).toUpperCase():"GET",c=o instanceof Request?o.url:Me(String(o)),l=$t(),d={state:"start",init:a,input:o,method:u,startClocks:l,url:c,handlingStack:i};e.notify(d),n[0]=d.input,n[1]=d.init,r((function(t){return function(t,e,n){var r=n;function i(e){r.state="resolve",I(r,e),t.notify(r)}e.then(g((function(t){i({response:t,responseType:t.type,status:t.status,isAborted:!1})})),g((function(t){var e,n;i({status:0,isAborted:(null===(n=null===(e=r.init)||void 0===e?void 0:e.signal)||void 0===n?void 0:n.aborted)||t instanceof DOMException&&t.code===DOMException.ABORT_ERR,error:t})})))}(e,t,d)}))}(e,t)}),{computeHandlingStack:!0}).stop;return e}}))),De}function Be(t,e,n,r){var i=new Date;i.setTime(i.getTime()+n);var o="expires=".concat(i.toUTCString()),a=r&&r.crossSite?"none":"strict",s=r&&r.domain?";domain=".concat(r.domain):"",u=r&&r.secure?";secure":"",c=r&&r.partitioned?";partitioned":"";document.cookie="".concat(t,"=").concat(e,";").concat(o,";path=/;samesite=").concat(a).concat(s).concat(u).concat(c)}function ze(t){return Se(document.cookie,t)}function Ve(t){return Pe||(Pe=function(t){var e=new Map;for(_e.lastIndex=0;;){var n=_e.exec(t);if(!n)break;e.set(n[1],n[2])}return e}(document.cookie)),Pe.get(t)}function qe(t,e){Be(t,"",0,e)}var Ge;function He(){return Boolean(window._DATADOG_SYNTHETICS_INJECTS_RUM||Ve("datadog-synthetics-injects-rum"))}function Je(){return null!==Ge&&void 0!==Ge?Ge:Ge=function(t){var e;void 0===t&&(t=window);var n=t.navigator.userAgent;if(t.chrome||/HeadlessChrome/.test(n))return 1;if(0===(null===(e=t.navigator.vendor)||void 0===e?void 0:e.indexOf("Apple"))||/safari/i.test(n)&&!/chrome|android/i.test(n))return 2;if(t.document.documentMode)return 0;return 3}()}var Ke="_dd_s",We=144e5,Ze=9e5,$e=/^([a-zA-Z]+)=([a-z0-9-]+)$/,Xe="&";function Ye(t){return V(t)}function Qe(t){return!Ye(t)}function tn(t){return void 0!==t.isExpired||!((void 0===(e=t).created||Kt()-Number(e.created)<We)&&(void 0===e.expire||Kt()<Number(e.expire)));var e}function en(t){t.expire=String(Kt()+Ze)}function nn(t){return x(t).map((function(t){var e=t[0],n=t[1];return"".concat(e,"=").concat(n)})).join("&")}function rn(t){var e={};return function(t){return!!t&&(-1!==t.indexOf(Xe)||$e.test(t))}(t)&&t.split(Xe).forEach((function(t){var n=$e.exec(t);if(null!==n){var r=n[1],i=n[2];e[r]=i}})),e}function on(t){var e=function(t){var e={};e.secure=!!t.useSecureSessionCookie||!!t.usePartitionedCrossSiteSessionCookie||!!t.useCrossSiteSessionCookie,e.crossSite=!!t.usePartitionedCrossSiteSessionCookie||!!t.useCrossSiteSessionCookie,e.partitioned=!!t.usePartitionedCrossSiteSessionCookie,t.trackSessionAcrossSubdomains&&(e.domain=function(){if(void 0===je){for(var t="dd_site_test_".concat(we()),e=window.location.hostname.split("."),n=e.pop();e.length&&!ze(t);)n="".concat(e.pop(),".").concat(n),Be(t,"test",Vt,{domain:n});qe(t,{domain:n}),je=n}return je}());return e}(t);return function(t){if(void 0===document.cookie||null===document.cookie)return!1;try{var e="dd_cookie_test_".concat(we()),n="test";Be(e,n,qt,t);var r=ze(e)===n;return qe(e,t),r}catch(i){return u.error(i),!1}}(e)?{type:"Cookie",cookieOptions:e}:void 0}function an(t){var e,n={isLockEnabled:1===Je(),persistSession:(e=t,function(t){Be(Ke,nn(t),Ze,e)}),retrieveSession:sn,expireSession:function(){return function(t){Be(Ke,nn({isExpired:"1"}),We,t)}(t)}};return function(t){if(!Ve(Ke)){var e=Ve("_dd"),n=Ve("_dd_r"),r=Ve("_dd_l"),i={};e&&(i.id=e),r&&/^[01]$/.test(r)&&(i.logs=r),n&&/^[012]$/.test(n)&&(i.rum=n),Qe(i)&&(en(i),t.persistSession(i))}}(n),n}function sn(){return rn(ze(Ke))}function un(t){localStorage.setItem(Ke,nn(t))}function cn(){return rn(localStorage.getItem(Ke))}function ln(){un({isExpired:"1"})}var dn,fn=[];function pn(t,e,n){var r;void 0===n&&(n=0);var i=e.isLockEnabled,o=e.persistSession,a=e.expireSession,s=function(t){return o(I({},t,{lock:c}))},u=function(){var t=e.retrieveSession(),n=t.lock;return t.lock&&delete t.lock,{session:t,lock:n}};if(dn||(dn=t),t===dn)if(i&&n>=100)vn(e);else{var c,l=u();if(i){if(l.lock)return void hn(t,e,n);if(c=we(),s(l.session),(l=u()).lock!==c)return void hn(t,e,n)}var d=t.process(l.session);if(i&&(l=u()).lock!==c)hn(t,e,n);else{if(d&&(tn(d)?a():(en(d),i?s(d):o(d))),i&&(!d||!tn(d))){if((l=u()).lock!==c)return void hn(t,e,n);o(l.session),d=l.session}null===(r=t.after)||void 0===r||r.call(t,d||l.session),vn(e)}}else fn.push(t)}function hn(t,e,n){M((function(){pn(t,e,n+1)}),10)}function vn(t){dn=void 0;var e=fn.shift();e&&pn(e,t)}function mn(t){var e=on(t);return!e&&t.allowFallbackToLocalStorage&&(e=function(){try{var t=we(),e="".concat("_dd_test_").concat(t);localStorage.setItem(e,t);var n=localStorage.getItem(e);return localStorage.removeItem(e),t===n?{type:"LocalStorage"}:void 0}catch(r){return}}()),e}function gn(t,e,n){var r,i=new Y,o=new Y,a=new Y,s="Cookie"===t.type?an(t.cookieOptions):{isLockEnabled:!1,persistSession:un,retrieveSession:cn,expireSession:ln},u=s.expireSession,c=L((function(){pn({process:function(t){return tn(t)?{isExpired:"1"}:void 0},after:p},s)}),1e3);h();var l=P((function(){pn({process:function(t){if(!Ye(t)){var r=p(t);return function(t){if(Ye(t))return!1;var r=n(t[e]),i=r.trackingType,o=r.isTracked;t[e]=i,delete t.isExpired,o&&!t.id&&(t.id=we(),t.created=String(Kt()))}(r),r}},after:function(t){Qe(t)&&!v()&&function(t){r=t,i.notify()}(t),r=t}},s)}),1e3),d=l.throttled,f=l.cancel;function p(t){return tn(t)&&(t={isExpired:"1"}),v()&&(!function(t){return r.id!==t.id||r[e]!==t[e]}(t)?(a.notify({previousState:r,newState:t}),r=t):(r={isExpired:"1"},o.notify())),t}function h(){pn({process:function(t){if(Ye(t))return{isExpired:"1"}},after:function(t){r=t}},s)}function v(){return void 0!==r[e]}return{expandOrRenewSession:d,expandSession:function(){pn({process:function(t){return v()?p(t):void 0}},s)},getSession:function(){return r},renewObservable:i,expireObservable:o,sessionStateUpdateObservable:a,restartSession:h,expire:function(){f(),u(),p({isExpired:"1"})},stop:function(){D(c)},updateSessionState:function(t){pn({process:function(e){return I({},e,t)},after:p},s)}}}function yn(t,e,n){var r=function(t,e){var n="/api/v2/".concat(e),r=t.proxy;if("string"===typeof r){var i=Me(r);return function(t){return"".concat(i,"?ddforward=").concat(encodeURIComponent("".concat(n,"?").concat(t)))}}if("function"===typeof r)return function(t){return r({path:n,parameters:t})};var o=function(t,e){var n=e.site,r=void 0===n?Dt:n,i=e.internalAnalyticsSubdomain;if("logs"===t&&e.usePciIntake&&r===Dt)return jt;if(i&&r===Dt)return"".concat(i,".").concat(Dt);if(r===Lt)return"http-intake.logs.".concat(r);var o=r.split("."),a=o.pop();return"browser-intake-".concat(o.join("-"),".").concat(a)}(e,t);return function(t){return"https://".concat(o).concat(n,"?").concat(t)}}(t,e);return{build:function(i,o){var a=function(t,e,n,r,i){var o=t.clientToken,a=t.internalAnalyticsSubdomain,s=i.retry,u=i.encoding,c=["sdk_version:".concat("5.28.0"),"api:".concat(r)].concat(n);s&&c.push("retry_count:".concat(s.count),"retry_after:".concat(s.lastFailureStatus));var l=["ddsource=browser","ddtags=".concat(encodeURIComponent(c.join(","))),"dd-api-key=".concat(o),"dd-evp-origin-version=".concat(encodeURIComponent("5.28.0")),"dd-evp-origin=browser","dd-request-id=".concat(we())];u&&l.push("dd-evp-encoding=".concat(u));"rum"===e&&l.push("batch_time=".concat(Wt()));a&&l.reverse();return l.join("&")}(t,e,n,i,o);return r(a)},urlPrefix:r(""),trackType:e}}function bn(t,e){var n=200-t.length-1;(e.length>n||function(t){if(!function(){try{return new RegExp("[\\p{Ll}]","u"),!0}catch(_s){return!1}}())return!1;return new RegExp("[^\\p{Ll}\\p{Lo}0-9_:./-]","u").test(t)}(e))&&u.warn("".concat(t," value doesn't meet tag requirements and will be sanitized. ").concat(d," ").concat(c,"/getting_started/tagging/#defining-tags"));var r=e.replace(/,/g,"_");return"".concat(t,":").concat(r)}function wn(t){var e=t.site||Dt,n=function(t){var e=t.env,n=t.service,r=t.version,i=t.datacenter,o=[];return e&&o.push(bn("env",e)),n&&o.push(bn("service",n)),r&&o.push(bn("version",r)),i&&o.push(bn("datacenter",i)),o}(t),r=function(t,e){return{logsEndpointBuilder:yn(t,"logs",e),rumEndpointBuilder:yn(t,"rum",e),sessionReplayEndpointBuilder:yn(t,"replay",e)}}(t,n),i=function(t,e){var n=k(t).map((function(t){return t.urlPrefix}));e===Dt&&n.push("https://".concat(jt,"/"));return n}(r,e),o=function(t,e,n){if(!t.replica)return;var r=I({},t,{site:Dt,clientToken:t.replica.clientToken}),i={logsEndpointBuilder:yn(r,"logs",n),rumEndpointBuilder:yn(r,"rum",n)};return e.push.apply(e,k(i).map((function(t){return t.urlPrefix}))),I({applicationId:t.replica.applicationId},i)}(t,i,n);return I({isIntakeUrl:function(t){return i.some((function(e){return 0===t.indexOf(e)}))},replica:o,site:e},r)}var _n={ALLOW:"allow",MASK:"mask",MASK_USER_INPUT:"mask-user-input"},Sn={ALL:"all",SAMPLED:"sampled"};function kn(t,e){return void 0===t||null===t||"string"===typeof t||(u.error("".concat(e," must be defined as a string")),!1)}function xn(t,e){return!!(void 0===t||(n=t,Bt(n)&&n>=0&&n<=100))||(u.error("".concat(e," Sample Rate should be a number between 0 and 100")),!1);var n}function En(t){var e,n,r,i,o;if(t&&t.clientToken){if((!(a=t.site)||"string"!==typeof a||/(datadog|ddog|datad0g|dd0g)/.test(a)||(u.error("Site should be a valid Datadog site. ".concat(d," ").concat(c,"/getting_started/site/.")),0))&&xn(t.sessionSampleRate,"Session")&&xn(t.telemetrySampleRate,"Telemetry")&&xn(t.telemetryConfigurationSampleRate,"Telemetry Configuration")&&xn(t.telemetryUsageSampleRate,"Telemetry Usage")&&kn(t.version,"Version")&&kn(t.env,"Env")&&kn(t.service,"Service")){var a;if(void 0===t.trackingConsent||z(et,t.trackingConsent))return I({beforeSend:t.beforeSend&&f(t.beforeSend,"beforeSend threw an error:"),sessionStoreStrategyType:mn(t),sessionSampleRate:null!==(e=t.sessionSampleRate)&&void 0!==e?e:100,telemetrySampleRate:null!==(n=t.telemetrySampleRate)&&void 0!==n?n:20,telemetryConfigurationSampleRate:null!==(r=t.telemetryConfigurationSampleRate)&&void 0!==r?r:5,telemetryUsageSampleRate:null!==(i=t.telemetryUsageSampleRate)&&void 0!==i?i:5,service:t.service||void 0,silentMultipleInit:!!t.silentMultipleInit,allowUntrustedEvents:!!t.allowUntrustedEvents,trackingConsent:null!==(o=t.trackingConsent)&&void 0!==o?o:et.GRANTED,storeContextsAcrossPages:!!t.storeContextsAcrossPages,batchBytesLimit:16384,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:3e4,batchMessagesLimit:50,messageBytesLimit:262144},wn(t));u.error('Tracking Consent should be either "granted" or "not-granted"')}}else u.error("Client Token is not configured, we will not send any data.")}function In(t){var e=H(t);return"string"===e||"function"===e||t instanceof RegExp}function Cn(t,e,n){return void 0===n&&(n=!1),t.some((function(t){try{if("function"===typeof t)return t(e);if(t instanceof RegExp)return t.test(e);if("string"===typeof t)return n?E(e,t):t===e}catch(r){u.error(r)}return!1}))}function On(t){0!==t.status||t.isAborted||(t.traceId=void 0,t.spanId=void 0,t.traceSampled=void 0)}function Tn(t,e,n,r){if(void 0!==An()&&n.findTrackedSession()){var i=S(t.allowedTracingUrls,(function(t){return Cn([t.match],e.url,!0)}));i&&(e.traceSampled=!Bt(t.traceSampleRate)||Ft(t.traceSampleRate),(e.traceSampled||t.traceContextInjection===Sn.ALL)&&(e.traceId=Rn(),e.spanId=Rn(),r(function(t,e,n,r){var i={};return r.forEach((function(r){switch(r){case"datadog":I(i,{"x-datadog-origin":"rum","x-datadog-parent-id":e.toDecimalString(),"x-datadog-sampling-priority":n?"1":"0","x-datadog-trace-id":t.toDecimalString()});break;case"tracecontext":I(i,{traceparent:"00-0000000000000000".concat(t.toPaddedHexadecimalString(),"-").concat(e.toPaddedHexadecimalString(),"-0").concat(n?"1":"0")});break;case"b3":I(i,{b3:"".concat(t.toPaddedHexadecimalString(),"-").concat(e.toPaddedHexadecimalString(),"-").concat(n?"1":"0")});break;case"b3multi":I(i,{"X-B3-TraceId":t.toPaddedHexadecimalString(),"X-B3-SpanId":e.toPaddedHexadecimalString(),"X-B3-Sampled":n?"1":"0"})}})),i}(e.traceId,e.spanId,e.traceSampled,i.propagatorTypes))))}}function An(){return window.crypto||window.msCrypto}function Rn(){var t=new Uint8Array(8);function e(e){return 16777216*t[e]+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3]}function n(t){var n=e(0),r=e(4),i="";do{var o=n%t*4294967296+r;n=Math.floor(n/t),r=Math.floor(o/t),i=(o%t).toString(t)+i}while(n||r);return i}return An().getRandomValues(t),t[0]=127&t[0],{toDecimalString:function(){return n(10)},toPaddedHexadecimalString:function(){var t=n(16);return Array(17-t.length).join("0")+t}}}var Mn=["tracecontext","datadog"];function Nn(t){var e,n;if(t.applicationId){if(xn(t.sessionReplaySampleRate,"Session Replay")&&xn(t.traceSampleRate,"Trace"))if(void 0===t.excludedActivityUrls||Array.isArray(t.excludedActivityUrls)){var r=function(t){if(void 0===t.allowedTracingUrls)return[];if(!Array.isArray(t.allowedTracingUrls))return void u.error("Allowed Tracing URLs should be an array");if(0!==t.allowedTracingUrls.length&&void 0===t.service)return void u.error("Service needs to be configured when tracing is enabled");var e=[];return t.allowedTracingUrls.forEach((function(t){In(t)?e.push({match:t,propagatorTypes:Mn}):!function(t){var e=t;return"object"===H(e)&&In(e.match)&&Array.isArray(e.propagatorTypes)}(t)?u.warn("Allowed Tracing Urls parameters should be a string, RegExp, function, or an object. Ignoring parameter",t):e.push(t)})),e}(t);if(r){var i=En(t);if(i)return I({applicationId:t.applicationId,version:t.version||void 0,actionNameAttribute:t.actionNameAttribute,sessionReplaySampleRate:null!==(e=t.sessionReplaySampleRate)&&void 0!==e?e:0,startSessionReplayRecordingManually:!!t.startSessionReplayRecordingManually,traceSampleRate:t.traceSampleRate,allowedTracingUrls:r,excludedActivityUrls:null!==(n=t.excludedActivityUrls)&&void 0!==n?n:[],workerUrl:t.workerUrl,compressIntakeRequests:!!t.compressIntakeRequests,trackUserInteractions:!!t.trackUserInteractions,trackViewsManually:!!t.trackViewsManually,trackResources:!!t.trackResources,trackLongTasks:!!t.trackLongTasks,subdomain:t.subdomain,defaultPrivacyLevel:z(_n,t.defaultPrivacyLevel)?t.defaultPrivacyLevel:_n.MASK,enablePrivacyForActionName:!!t.enablePrivacyForActionName,customerDataTelemetrySampleRate:1,traceContextInjection:z(Sn,t.traceContextInjection)?t.traceContextInjection:Sn.ALL,plugins:t.betaPlugins||[]},i)}}else u.error("Excluded Activity Urls should be an array")}else u.error("Application ID is not configured, no RUM data will be collected.")}function Ln(t){var e=new Set;return Array.isArray(t.allowedTracingUrls)&&t.allowedTracingUrls.length>0&&t.allowedTracingUrls.forEach((function(t){In(t)?Mn.forEach((function(t){return e.add(t)})):"object"===H(t)&&Array.isArray(t.propagatorTypes)&&t.propagatorTypes.forEach((function(t){return e.add(t)}))})),_(e)}var Dn="https://d3uc069fcn7uxw.cloudfront.net/configuration";function Pn(t,e){!function(t,e){var n=new XMLHttpRequest;nt(t,n,"load",(function(){200===n.status?e(JSON.parse(n.responseText)):jn()})),nt(t,n,"error",(function(){jn()})),n.open("GET","".concat(Dn,"/").concat(encodeURIComponent(t.remoteConfigurationId),".json")),n.send()}(t,(function(n){e(function(t,e){return I({},t,e)}(t,n))}))}function jn(){u.error("Error fetching the remote configuration.")}function Fn(t,e,n,r,i){var o,a,s,c,l=t.ignoreInitIfSyntheticsWillInjectRum,d=t.startDeflateWorker,f=oe(),p=n.observable.subscribe(h);function h(){if(s&&c&&n.isGranted()){var t;if(p.unsubscribe(),c.trackViewsManually){if(!o)return;f.remove(o.callback),t=o.options}var e=i(c,a,t);f.drain(e)}}function v(t){var e=Te();if(e&&(t=function(t){var e,n;return I({},t,{applicationId:"00000000-aaaa-0000-aaaa-000000000000",clientToken:"empty",sessionSampleRate:100,defaultPrivacyLevel:null!==(e=t.defaultPrivacyLevel)&&void 0!==e?e:null===(n=Ce())||void 0===n?void 0:n.getPrivacyLevel()})}(t)),s=t,function(t){fe({type:se,configuration:t})}(function(t){var e,n,r={session_sample_rate:(n=t).sessionSampleRate,telemetry_sample_rate:n.telemetrySampleRate,telemetry_configuration_sample_rate:n.telemetryConfigurationSampleRate,telemetry_usage_sample_rate:n.telemetryUsageSampleRate,use_before_send:!!n.beforeSend,use_cross_site_session_cookie:n.useCrossSiteSessionCookie,use_partitioned_cross_site_session_cookie:n.usePartitionedCrossSiteSessionCookie,use_secure_session_cookie:n.useSecureSessionCookie,use_proxy:!!n.proxy,silent_multiple_init:n.silentMultipleInit,track_session_across_subdomains:n.trackSessionAcrossSubdomains,allow_fallback_to_local_storage:!!n.allowFallbackToLocalStorage,store_contexts_across_pages:!!n.storeContextsAcrossPages,allow_untrusted_events:!!n.allowUntrustedEvents,tracking_consent:n.trackingConsent};return I({session_replay_sample_rate:t.sessionReplaySampleRate,start_session_replay_recording_manually:t.startSessionReplayRecordingManually,trace_sample_rate:t.traceSampleRate,trace_context_injection:t.traceContextInjection,action_name_attribute:t.actionNameAttribute,use_allowed_tracing_urls:Array.isArray(t.allowedTracingUrls)&&t.allowedTracingUrls.length>0,selected_tracing_propagators:Ln(t),default_privacy_level:t.defaultPrivacyLevel,enable_privacy_for_action_name:t.enablePrivacyForActionName,use_excluded_activity_urls:Array.isArray(t.excludedActivityUrls)&&t.excludedActivityUrls.length>0,use_worker_url:!!t.workerUrl,compress_intake_requests:t.compressIntakeRequests,track_views_manually:t.trackViewsManually,track_user_interactions:t.trackUserInteractions,track_resources:t.trackResources,track_long_task:t.trackLongTasks,plugins:null===(e=t.betaPlugins)||void 0===e?void 0:e.map((function(t){var e;return I({name:t.name},null===(e=t.getConfigurationTelemetry)||void 0===e?void 0:e.call(t))}))},r)}(t)),c)be("DD_RUM",t);else{var r=Nn(t);r&&(e||r.sessionStoreStrategyType?r.compressIntakeRequests&&!e&&d&&!(a=d(r,"Datadog RUM",j))||(c=r,Ue().subscribe(j),n.tryToInit(r.trackingConsent),h()):u.warn("No storage available for session. We will not send any data."))}}var m=function(t){f.add((function(e){return e.addDurationVital(t)}))};return{init:function(t,e){t?(At(t.enableExperimentalFeatures),s=t,l&&He()||(!function(t,e,n){if(t)for(var r=0,i=t;r<i.length;r++){var o=i[r][e];o&&o(n)}}(t.betaPlugins,"onInit",{initConfiguration:t,publicApi:e}),t.remoteConfigurationId&&Rt(xt.REMOTE_CONFIGURATION)?Pn(t,v):v(t))):u.error("Missing configuration")},get initConfiguration(){return s},getInternalContext:j,stopSession:j,addTiming:function(t,e){void 0===e&&(e=Wt()),f.add((function(n){return n.addTiming(t,e)}))},startView:function(t,e){void 0===e&&(e=$t());var n=function(n){n.startView(t,e)};f.add(n),o||(o={options:t,callback:n},h())},updateViewName:function(t){f.add((function(e){return e.updateViewName(t)}))},setViewContext:function(t){f.add((function(e){return e.setViewContext(t)}))},setViewContextProperty:function(t,e){f.add((function(n){return n.setViewContextProperty(t,e)}))},addAction:function(t,n){void 0===n&&(n=e()),f.add((function(e){return e.addAction(t,n)}))},addError:function(t,n){void 0===n&&(n=e()),f.add((function(e){return e.addError(t,n)}))},addFeatureFlagEvaluation:function(t,e){f.add((function(n){return n.addFeatureFlagEvaluation(t,e)}))},startDurationVital:function(t,e){return Ee(r,t,e)},stopDurationVital:function(t,e){Ie(m,r,t,e)},addDurationVital:m}}var Un={HIDDEN:"visibility_hidden",UNLOADING:"before_unload",PAGEHIDE:"page_hide",FROZEN:"page_frozen"};function Bn(t){return w(k(Un),t)}function zn(){var t,e=window;if(e.Zone&&(t=R(e,"MutationObserver"),e.MutationObserver&&t===e.MutationObserver)){var n=R(new e.MutationObserver(j),"originalInstance");t=n&&n.constructor}return t||(t=e.MutationObserver),t}var Vn="agent",qn="console",Gn="custom",Hn="source",Jn="report";function Kn(t,e,n){var r=0,i=!1;return{isLimitReached:function(){if(0===r&&M((function(){r=0}),qt),(r+=1)<=e||i)return i=!1,!1;if(r===e+1){i=!0;try{n({message:"Reached max number of ".concat(t,"s by minute: ").concat(e),source:Vn,startClocks:$t()})}finally{i=!1}}return!0}}}function Wn(){var t=function(){var t=window._DATADOG_SYNTHETICS_PUBLIC_ID||Ve("datadog-synthetics-public-id");return"string"===typeof t?t:void 0}(),e=function(){var t=window._DATADOG_SYNTHETICS_RESULT_ID||Ve("datadog-synthetics-result-id");return"string"===typeof t?t:void 0}();if(t&&e)return{test_id:t,result_id:e,injected:He()}}function Zn(t,e,n){var r=K(t),i=n(r);return x(e).forEach((function(e){var n=e[0],i=e[1],o=function(t,e){for(var n=t,r=0,i=e.split(".");r<i.length;r++){var o=i[r];if(!Yn(n,o))return;n=n[o]}return n}(r,n),a=H(o);a===i?$n(t,n,Z(o)):"object"!==i||"undefined"!==a&&"null"!==a||$n(t,n,{})})),i}function $n(t,e,n){for(var r=t,i=e.split("."),o=0;o<i.length;o+=1){var a=i[o];if(!Xn(r))return;o!==i.length-1?r=r[a]:r[a]=n}}function Xn(t){return"object"===H(t)}function Yn(t,e){return Xn(t)&&Object.prototype.hasOwnProperty.call(t,e)}var Qn,tr={"view.name":"string","view.url":"string","view.referrer":"string"},er={context:"object"},nr={service:"string",version:"string"};function rr(t,e,n,r,i,o,a,s,c,l){var d,f;(d={}).view=I({},er,tr),d.error=I({"error.message":"string","error.stack":"string","error.resource.url":"string","error.fingerprint":"string"},er,tr,nr),d.resource=I({"resource.url":"string"},Rt(xt.WRITABLE_RESOURCE_GRAPHQL)?{"resource.graphql":"object"}:{},er,tr,nr),d.action=I({"action.target.name":"string"},er,tr,nr),d.long_task=I({},er,tr),d.vital=I({},er,tr),Qn=d;var p=((f={}).error=Kn("error",t.eventRateLimiterThreshold,l),f.action=Kn("action",t.eventRateLimiterThreshold,l),f.vital=Kn("vital",t.eventRateLimiterThreshold,l),f),h=Wn();e.subscribe(11,(function(l){var d,f=l.startTime,v=l.rawRumEvent,m=l.domainContext,g=l.savedCommonContext,y=l.customerContext,b=r.findView(f),w=i.findUrl(f),_=n.findTrackedSession(f);if(_&&b&&w){var S=g||c(),k=o.findActionId(f),x=W({_dd:{format_version:2,drift:Math.round(Kt()-Qt(ee(),performance.now())),configuration:{session_sample_rate:Ut(t.sessionSampleRate,3),session_replay_sample_rate:Ut(t.sessionReplaySampleRate,3)},browser_sdk_version:Te()?"5.28.0":void 0},application:{id:t.applicationId},date:Wt(),service:b.service||t.service,version:b.version||t.version,source:"browser",session:{id:_.id,type:h?"synthetics":s.get()?"ci_test":"user"},view:{id:b.id,name:b.name,url:w.url,referrer:w.referrer},action:(d=v,-1!==["error","resource","long_task"].indexOf(d.type)&&k?{id:k}:void 0),synthetics:h,ci_test:s.get(),display:a.get(),connectivity:re()},v);x.context=W(S.context,b.context,y),"has_replay"in x.session||(x.session.has_replay=S.hasReplay),"view"===x.type&&(x.session.sampled_for_replay=1===_.sessionReplay),V(S.user)||(x.usr=S.user),function(t,e,n,r){var i;if(e){var o=Zn(t,Qn[t.type],(function(t){return e(t,n)}));if(!1===o&&"view"!==t.type)return!1;!1===o&&u.warn("Can't dismiss view events using beforeSend!")}return!(null===(i=r[t.type])||void 0===i?void 0:i.isLimitReached())}(x,t.beforeSend,m,p)&&(V(x.context)&&delete x.context,e.notify(12,x))}}))}var ir=function(){function t(){this.callbacks={}}return t.prototype.notify=function(t,e){var n=this.callbacks[t];n&&n.forEach((function(t){return t(e)}))},t.prototype.subscribe=function(t,e){var n=this;return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),{unsubscribe:function(){n.callbacks[t]=n.callbacks[t].filter((function(t){return e!==t}))}}},t}(),or=1/0;function ar(t){var e=t.expireDelay,n=t.maxEntries,r=[],i=L((function(){return function(){var t=Zt()-e;for(;r.length>0&&r[r.length-1].endTime<t;)r.pop()}()}),6e4);return{add:function(t,e){var i={value:t,startTime:e,endTime:or,remove:function(){ie(r,i)},close:function(t){i.endTime=t}};return n&&r.length>=n&&r.pop(),r.unshift(i),i},find:function(t,e){void 0===t&&(t=or),void 0===e&&(e={returnInactive:!1});for(var n=0,i=r;n<i.length;n++){var o=i[n];if(o.startTime<=t){if(e.returnInactive||t<=o.endTime)return o.value;break}}},closeActive:function(t){var e=r[0];e&&e.endTime===or&&e.close(t)},findAll:function(t,e){void 0===t&&(t=or),void 0===e&&(e=0);var n=Qt(t,e);return r.filter((function(e){return e.startTime<=n&&t<=e.endTime})).map((function(t){return t.value}))},reset:function(){r=[]},stop:function(){D(i)}}}var sr;var ur=new WeakMap;function cr(t){return sr||(sr=function(t){return new Y((function(e){var n=Ae(XMLHttpRequest.prototype,"open",lr).stop,r=Ae(XMLHttpRequest.prototype,"send",(function(n){!function(t,e,n){var r=t.target,i=t.handlingStack,o=ur.get(r);if(!o)return;var a=o;a.state="start",a.startClocks=$t(),a.isAborted=!1,a.xhr=r,a.handlingStack=i;var s=!1,u=Ae(r,"onreadystatechange",(function(){r.readyState===XMLHttpRequest.DONE&&c()})).stop,c=function(){if(l(),u(),!s){s=!0;var t=o;t.state="complete",t.duration=Yt(a.startClocks.timeStamp,Wt()),t.status=r.status,n.notify(B(t))}},l=nt(e,r,"loadend",c).stop;n.notify(a)}(n,t,e)}),{computeHandlingStack:!0}).stop,i=Ae(XMLHttpRequest.prototype,"abort",dr).stop;return function(){n(),r(),i()}}))}(t)),sr}function lr(t){var e=t.target,n=t.parameters,r=n[0],i=n[1];ur.set(e,{state:"open",method:String(r).toUpperCase(),url:Me(String(i))})}function dr(t){var e=t.target,n=ur.get(e);n&&(n.isAborted=!0)}var fr="initial_document",pr=[["document",function(t){return fr===t}],["xhr",function(t){return"xmlhttprequest"===t}],["fetch",function(t){return"fetch"===t}],["beacon",function(t){return"beacon"===t}],["css",function(t,e){return/\.css$/i.test(e)}],["js",function(t,e){return/\.js$/i.test(e)}],["image",function(t,e){return w(["image","img","icon"],t)||null!==/\.(gif|jpg|jpeg|tiff|png|svg|ico)$/i.exec(e)}],["font",function(t,e){return null!==/\.(woff|eot|woff2|ttf)$/i.exec(e)}],["media",function(t,e){return w(["audio","video"],t)||null!==/\.(mp3|mp4)$/i.exec(e)}]];function hr(t){var e=t.name;if(!function(t){try{return!!Ne(t)}catch(o){return!1}}(e))return he('Failed to construct URL for "'.concat(t.name,'"')),"other";for(var n=function(t){var e=Ne(t).pathname;return"/"===e[0]?e:"/".concat(e)}(e),r=0,i=pr;r<i.length;r++){var o=i[r],a=o[0];if((0,o[1])(t.initiatorType,n))return a}return"other"}function vr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=1;n<t.length;n+=1)if(t[n-1]>t[n])return!1;return!0}function mr(t){return"xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType}function gr(t){var e=t.duration,n=t.startTime,r=t.responseEnd;return Jt(0===e&&n<r?Yt(n,r):e)}function yr(t){if(wr(t)){var e=t.startTime,n=t.fetchStart,r=t.redirectStart,i=t.redirectEnd,o=t.domainLookupStart,a=t.domainLookupEnd,s=t.connectStart,u=t.secureConnectionStart,c=t.connectEnd,l=t.requestStart,d=t.responseStart,f={download:_r(e,d,t.responseEnd),first_byte:_r(e,l,d)};return n<c&&(f.connect=_r(e,s,c),s<=u&&u<=c&&(f.ssl=_r(e,u,c))),n<a&&(f.dns=_r(e,o,a)),e<i&&(f.redirect=_r(e,r,i)),f}}function br(t){return t.duration>=0}function wr(t){var e=vr(t.startTime,t.fetchStart,t.domainLookupStart,t.domainLookupEnd,t.connectStart,t.connectEnd,t.requestStart,t.responseStart,t.responseEnd),n=!function(t){return t.redirectEnd>t.startTime}(t)||vr(t.startTime,t.redirectStart,t.redirectEnd,t.fetchStart);return e&&n}function _r(t,e,n){if(t<=e&&e<=n)return{duration:Jt(Yt(e,n)),start:Jt(Yt(t,e))}}function Sr(t){if(t.startTime<t.responseStart){var e=t.encodedBodySize,n=t.decodedBodySize;return{size:n,encoded_body_size:e,decoded_body_size:n,transfer_size:t.transferSize}}return{size:void 0,encoded_body_size:void 0,decoded_body_size:void 0,transfer_size:void 0}}function kr(t,e){return e&&!t.isIntakeUrl(e)}var xr=/data:(.+)?(;base64)?,/g;function Er(t){return!(t.length<=24e3)&&("data:"===t.substring(0,5)&&(t=t.substring(0,24e3),!0))}function Ir(t){return"".concat(t.match(xr)[0],"[...]")}var Cr,Or,Tr=1;function Ar(t,e,n){var r=function(t,e){return{clearTracingIfNeeded:On,traceFetch:function(n){return Tn(t,n,e,(function(t){var e;if(n.input instanceof Request&&!(null===(e=n.init)||void 0===e?void 0:e.headers))n.input=new Request(n.input),Object.keys(t).forEach((function(e){n.input.headers.append(e,t[e])}));else{n.init=B(n.init);var r=[];n.init.headers instanceof Headers?n.init.headers.forEach((function(t,e){r.push([e,t])})):Array.isArray(n.init.headers)?n.init.headers.forEach((function(t){r.push(t)})):n.init.headers&&Object.keys(n.init.headers).forEach((function(t){r.push([t,n.init.headers[t]])})),n.init.headers=r.concat(x(t))}}))},traceXhr:function(n,r){return Tn(t,n,e,(function(t){Object.keys(t).forEach((function(e){r.setRequestHeader(e,t[e])}))}))}}}(e,n);!function(t,e,n){var r=cr(e).subscribe((function(r){var i=r;if(kr(e,i.url))switch(i.state){case"start":n.traceXhr(i,i.xhr),i.requestIndex=Rr(),t.notify(6,{requestIndex:i.requestIndex,url:i.url});break;case"complete":n.clearTracingIfNeeded(i),t.notify(7,{duration:i.duration,method:i.method,requestIndex:i.requestIndex,spanId:i.spanId,startClocks:i.startClocks,status:i.status,traceId:i.traceId,traceSampled:i.traceSampled,type:"xhr",url:i.url,xhr:i.xhr,isAborted:i.isAborted,handlingStack:i.handlingStack})}}))}(t,e,r),function(t,e,n){var r=Ue().subscribe((function(r){var i=r;if(kr(e,i.url))switch(i.state){case"start":n.traceFetch(i),i.requestIndex=Rr(),t.notify(6,{requestIndex:i.requestIndex,url:i.url});break;case"resolve":!function(t,e){var n=t.response&&function(t){try{return t.clone()}catch(e){return}}(t.response);n&&n.body?function(t,e,n){var r=t.getReader(),i=[],o=0;function a(){var t,a;if(r.cancel().catch(j),n.collectStreamBody){var s;if(1===i.length)s=i[0];else{s=new Uint8Array(o);var u=0;i.forEach((function(t){s.set(t,u),u+=t.length}))}t=s.slice(0,n.bytesLimit),a=s.length>n.bytesLimit}e(void 0,t,a)}!function t(){r.read().then(g((function(e){e.done?a():(n.collectStreamBody&&i.push(e.value),(o+=e.value.length)>n.bytesLimit?a():t())})),g((function(t){return e(t)})))}()}(n.body,(function(){e(Yt(t.startClocks.timeStamp,Wt()))}),{bytesLimit:Number.POSITIVE_INFINITY,collectStreamBody:!1}):e(Yt(t.startClocks.timeStamp,Wt()))}(i,(function(e){n.clearTracingIfNeeded(i),t.notify(7,{duration:e,method:i.method,requestIndex:i.requestIndex,responseType:i.responseType,spanId:i.spanId,startClocks:i.startClocks,status:i.status,traceId:i.traceId,traceSampled:i.traceSampled,type:"fetch",url:i.url,response:i.response,init:i.init,input:i.input,isAborted:i.isAborted,handlingStack:i.handlingStack})}))}}))}(t,e,r)}function Rr(){var t=Tr;return Tr+=1,t}function Mr(t){return Bt(t)&&t<0?void 0:t}function Nr(t){var e=t.lifeCycle,n=t.isChildEvent,r=t.onChange,i=void 0===r?j:r,o={errorCount:0,longTaskCount:0,resourceCount:0,actionCount:0,frustrationCount:0},a=e.subscribe(12,(function(t){var e;if("view"!==t.type&&"vital"!==t.type&&n(t))switch(t.type){case"error":o.errorCount+=1,i();break;case"action":o.actionCount+=1,t.action.frustration&&(o.frustrationCount+=t.action.frustration.type.length),i();break;case"long_task":o.longTaskCount+=1,i();break;case"resource":(null===(e=t._dd)||void 0===e?void 0:e.discarded)||(o.resourceCount+=1,i())}}));return{stop:function(){a.unsubscribe()},eventCounts:o}}function Lr(t,e){var n=Kt(),r=!1,i=rt(t,window,["click","mousedown","keydown","touchstart","pointerdown"],(function(e){if(e.cancelable){var n={entryType:"first-input",processingStart:Zt(),processingEnd:Zt(),startTime:e.timeStamp,duration:0,name:"",cancelable:!1,target:null,toJSON:function(){return{}}};"pointerdown"===e.type?function(t,e){rt(t,window,["pointerup","pointercancel"],(function(t){"pointerup"===t.type&&o(e)}),{once:!0})}(t,n):o(n)}}),{passive:!0,capture:!0}).stop;return{stop:i};function o(t){if(!r){r=!0,i();var o=t.processingStart-t.startTime;o>=0&&o<Kt()-n&&e(t)}}}function Dr(t,e){return new Y((function(n){if(window.PerformanceObserver){var r,i,o=function(e){var r=function(t,e){return e.filter((function(e){return!function(t,e){return e.entryType===Cr.RESOURCE&&(!kr(t,e.name)||!br(e))}(t,e)}))}(t,e);r.length>0&&n.notify(r)},a=!0,s=new PerformanceObserver(g((function(t){a?r=M((function(){return o(t.getEntries())})):o(t.getEntries())})));try{s.observe(e)}catch(_s){if(w([Cr.RESOURCE,Cr.NAVIGATION,Cr.LONG_TASK,Cr.PAINT],e.type)){e.buffered&&(r=M((function(){return o(performance.getEntriesByType(e.type))})));try{s.observe({entryTypes:[e.type]})}catch(u){return}}}return a=!1,function(t){!Or&&void 0!==window.performance&&"getEntries"in performance&&"addEventListener"in performance&&(Or=nt(t,performance,"resourcetimingbufferfull",(function(){performance.clearResourceTimings()})))}(t),Pr(Cr.FIRST_INPUT)||e.type!==Cr.FIRST_INPUT||(i=Lr(t,(function(t){o([t])})).stop),function(){s.disconnect(),i&&i(),N(r)}}}))}function Pr(t){return window.PerformanceObserver&&void 0!==PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes(t)}!function(t){t.EVENT="event",t.FIRST_INPUT="first-input",t.LARGEST_CONTENTFUL_PAINT="largest-contentful-paint",t.LAYOUT_SHIFT="layout-shift",t.LONG_TASK="longtask",t.LONG_ANIMATION_FRAME="long-animation-frame",t.NAVIGATION="navigation",t.PAINT="paint",t.RESOURCE="resource"}(Cr||(Cr={}));var jr=100;function Fr(t,e,n,r,i){var o=function(t,e,n){return new Y((function(r){var i,o=[],a=0;o.push(e.subscribe(c),Dr(n,{type:Cr.RESOURCE}).subscribe((function(t){t.some((function(t){return!Ur(n,t.name)}))&&c()})),t.subscribe(6,(function(t){Ur(n,t.url)||(void 0===i&&(i=t.requestIndex),a+=1,c())})),t.subscribe(7,(function(t){Ur(n,t.url)||void 0===i||t.requestIndex<i||(a-=1,c())})));var s,u=(s=c,Ae(window,"open",s)).stop;return function(){u(),o.forEach((function(t){return t.unsubscribe()}))};function c(){r.notify({isBusy:a>0})}}))}(t,e,n);return function(t,e,n){var r,i=!1,o=M(g((function(){return c({hadActivity:!1})})),100),a=void 0!==n?M(g((function(){return c({hadActivity:!0,end:Wt()})})),n):void 0,s=t.subscribe((function(t){var e=t.isBusy;N(o),N(r);var n=Wt();e||(r=M(g((function(){return c({hadActivity:!0,end:n})})),100))})),u=function(){i=!0,N(o),N(r),N(a),s.unsubscribe()};function c(t){i||(u(),e(t))}return{stop:u}}(o,r,i)}function Ur(t,e){return Cn(t.excludedActivityUrls,e)}function Br(t){return window.CSS&&window.CSS.escape?window.CSS.escape(t):t.replace(/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,(function(t,e){return e?"\0"===t?"\ufffd":"".concat(t.slice(0,-1),"\\").concat(t.charCodeAt(t.length-1).toString(16)," "):"\\".concat(t)}))}function zr(t,e){return t.matches?t.matches(e):!!t.msMatchesSelector&&t.msMatchesSelector(e)}function Vr(t){if(t.parentElement)return t.parentElement;for(;t.parentNode;){if(t.parentNode.nodeType===Node.ELEMENT_NODE)return t.parentNode;t=t.parentNode}return null}var qr=function(){function t(t){var e=this;this.map=new WeakMap,t&&t.forEach((function(t){return e.map.set(t,1)}))}return t.prototype.add=function(t){return this.map.set(t,1),this},t.prototype.delete=function(t){return this.map.delete(t)},t.prototype.has=function(t){return this.map.has(t)},t}();function Gr(t){return t.nodeType===Node.TEXT_NODE}function Hr(t){return t.nodeType===Node.ELEMENT_NODE}function Jr(t){return Hr(t)&&Boolean(t.shadowRoot)}function Kr(t){var e=t;return!!e.host&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&Hr(e.host)}function Wr(t,e){for(var n=t.firstChild;n;)e(n),n=n.nextSibling;Jr(t)&&e(t.shadowRoot)}function Zr(t){return Kr(t)?t.host:t.parentNode}var $r={IGNORE:"ignore",HIDDEN:"hidden",ALLOW:_n.ALLOW,MASK:_n.MASK,MASK_USER_INPUT:_n.MASK_USER_INPUT},Xr="data-dd-privacy",Yr="hidden",Qr="***",ti="data:image/gif;base64,R0lGODlhAQABAIAAAMLCwgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==",ei={INPUT:!0,OUTPUT:!0,TEXTAREA:!0,SELECT:!0,OPTION:!0,DATALIST:!0,OPTGROUP:!0};function ni(t,e,n){if(n&&n.has(t))return n.get(t);var r=Zr(t),i=r?ni(r,e,n):e,o=ri(ii(t),i);return n&&n.set(t,o),o}function ri(t,e){switch(e){case $r.HIDDEN:case $r.IGNORE:return e}switch(t){case $r.ALLOW:case $r.MASK:case $r.MASK_USER_INPUT:case $r.HIDDEN:case $r.IGNORE:return t;default:return e}}function ii(t){if(Hr(t)){if("BASE"===t.tagName)return $r.ALLOW;if("INPUT"===t.tagName){var e=t;if("password"===e.type||"email"===e.type||"tel"===e.type)return $r.MASK;if("hidden"===e.type)return $r.MASK;var n=e.getAttribute("autocomplete");if(n&&0===n.indexOf("cc-"))return $r.MASK}return zr(t,ui($r.HIDDEN))?$r.HIDDEN:zr(t,ui($r.MASK))?$r.MASK:zr(t,ui($r.MASK_USER_INPUT))?$r.MASK_USER_INPUT:zr(t,ui($r.ALLOW))?$r.ALLOW:function(t){if("SCRIPT"===t.nodeName)return!0;if("LINK"===t.nodeName){var e=i("rel");return/preload|prefetch/i.test(e)&&"script"===i("as")||"shortcut icon"===e||"icon"===e}if("META"===t.nodeName){var n=i("name"),r=(e=i("rel"),i("property"));return/^msapplication-tile(image|color)$/.test(n)||"application-name"===n||"icon"===e||"apple-touch-icon"===e||"shortcut icon"===e||"keywords"===n||"description"===n||/^(og|twitter|fb):/.test(r)||/^(og|twitter):/.test(n)||"pinterest"===n||"robots"===n||"googlebot"===n||"bingbot"===n||t.hasAttribute("http-equiv")||"author"===n||"generator"===n||"framework"===n||"publisher"===n||"progid"===n||/^article:/.test(r)||/^product:/.test(r)||"google-site-verification"===n||"yandex-verification"===n||"csrf-token"===n||"p:domain_verify"===n||"verify-v1"===n||"verification"===n||"shopify-checkout-api-token"===n}function i(e){return(t.getAttribute(e)||"").toLowerCase()}return!1}(t)?$r.IGNORE:void 0}}function oi(t,e){switch(e){case $r.MASK:case $r.HIDDEN:case $r.IGNORE:return!0;case $r.MASK_USER_INPUT:return Gr(t)?ai(t.parentNode):ai(t);default:return!1}}function ai(t){if(!t||t.nodeType!==t.ELEMENT_NODE)return!1;var e=t;if("INPUT"===e.tagName)switch(e.type){case"button":case"color":case"reset":case"submit":return!1}return!!ei[e.tagName]}function si(t,e,n){var r,i=null===(r=t.parentElement)||void 0===r?void 0:r.tagName,o=t.textContent||"";if(!e||o.trim()){if("SCRIPT"===i)o=Qr;else if(n===$r.HIDDEN)o=Qr;else if(oi(t,n))if("DATALIST"===i||"SELECT"===i||"OPTGROUP"===i){if(!o.trim())return}else o="OPTION"===i?Qr:o.replace(/\S/g,"x");return o}}function ui(t){return"[".concat(Xr,'="').concat(t,'"], .').concat("dd-privacy-").concat(t)}var ci="data-dd-action-name";function li(t,e,n){var r=e.enablePrivacyForActionName,i=e.actionNameAttribute,o=di(t,ci)||i&&di(t,i);return n===$r.MASK?o||"Masked Element":o||mi(t,i,hi,r)||mi(t,i,vi,r)||""}function di(t,e){var n;if(function(){void 0===pi&&(pi="closest"in HTMLElement.prototype);return pi}())n=t.closest("[".concat(e,"]"));else for(var r=t;r;){if(r.hasAttribute(e)){n=r;break}r=Vr(r)}if(n)return yi(gi(n.getAttribute(e).trim()))}var fi,pi,hi=[function(t,e,n){if(function(){void 0===fi&&(fi="labels"in HTMLInputElement.prototype);return fi}()){if("labels"in t&&t.labels&&t.labels.length>0)return bi(t.labels[0],e)}else if(t.id){var r=t.ownerDocument&&S(t.ownerDocument.querySelectorAll("label"),(function(e){return e.htmlFor===t.id}));return r&&bi(r,e,n)}},function(t){if("INPUT"===t.nodeName){var e=t,n=e.getAttribute("type");if("button"===n||"submit"===n||"reset"===n)return e.value}},function(t,e,n){if("BUTTON"===t.nodeName||"LABEL"===t.nodeName||"button"===t.getAttribute("role"))return bi(t,e,n)},function(t){return t.getAttribute("aria-label")},function(t,e,n){var r=t.getAttribute("aria-labelledby");if(r)return r.split(/\s+/).map((function(e){return function(t,e){return t.ownerDocument?t.ownerDocument.getElementById(e):null}(t,e)})).filter((function(t){return Boolean(t)})).map((function(t){return bi(t,e,n)})).join(" ")},function(t){return t.getAttribute("alt")},function(t){return t.getAttribute("name")},function(t){return t.getAttribute("title")},function(t){return t.getAttribute("placeholder")},function(t,e){if("options"in t&&t.options.length>0)return bi(t.options[0],e)}],vi=[function(t,e,n){return bi(t,e,n)}];function mi(t,e,n,r){for(var i=t,o=0;o<=10&&i&&"BODY"!==i.nodeName&&"HTML"!==i.nodeName&&"HEAD"!==i.nodeName;){for(var a=0,s=n;a<s.length;a++){var u=(0,s[a])(i,e,r);if("string"===typeof u){var c=u.trim();if(c)return yi(gi(c))}}if("FORM"===i.nodeName)break;i=Vr(i),o+=1}}function gi(t){return t.replace(/\s+/g," ")}function yi(t){return t.length>100?"".concat(ke(t,100)," [...]"):t}function bi(t,e,n){if(!t.isContentEditable){if("innerText"in t){var r=t.innerText,i=function(e){for(var n=t.querySelectorAll(e),i=0;i<n.length;i+=1){var o=n[i];if("innerText"in o){var a=o.innerText;a&&a.trim().length>0&&(r=r.replace(a,""))}}};return 0===Je()&&i("script, style"),i("[".concat(ci,"]")),e&&i("[".concat(e,"]")),n&&i("".concat(ui($r.HIDDEN),", ").concat(ui($r.MASK))),r}return t.textContent}}var wi,_i=[ci,"data-testid","data-test","data-qa","data-cy","data-test-id","data-qa-id","data-testing","data-component","data-element","data-source-file"],Si=[Ii,function(t){if(t.id&&!Ei(t.id))return"#".concat(Br(t.id))}],ki=[Ii,function(t){if("BODY"===t.tagName)return;for(var e=function(t){if(t.classList)return t.classList;var e=(t.getAttribute("class")||"").trim();return e?e.split(/\s+/):[]}(t),n=0;n<e.length;n+=1){var r=e[n];if(!Ei(r))return"".concat(Br(t.tagName),".").concat(Br(r))}},function(t){return Br(t.tagName)}];function xi(t,e){if(function(t){if("isConnected"in t)return t.isConnected;return t.ownerDocument.documentElement.contains(t)}(t)){for(var n,r=t;r&&"HTML"!==r.nodeName;){var i=Oi(r,Si,Ti,e,n);if(i)return i;n=Oi(r,ki,Ai,e,n)||Ri(Ci(r),n),r=Vr(r)}return n}}function Ei(t){return/[0-9]/.test(t)}function Ii(t,e){if(e&&(i=o(e)))return i;for(var n=0,r=_i;n<r.length;n++){var i;if(i=o(r[n]))return i}function o(e){if(t.hasAttribute(e))return"".concat(Br(t.tagName),"[").concat(e,'="').concat(Br(t.getAttribute(e)),'"]')}}function Ci(t){for(var e=Vr(t).firstElementChild,n=1;e&&e!==t;)e.tagName===t.tagName&&(n+=1),e=e.nextElementSibling;return"".concat(Br(t.tagName),":nth-of-type(").concat(n,")")}function Oi(t,e,n,r,i){for(var o=0,a=e;o<a.length;o++){var s=(0,a[o])(t,r);if(s&&n(t,s,i))return Ri(s,i)}}function Ti(t,e,n){return 1===t.ownerDocument.querySelectorAll(Ri(e,n)).length}function Ai(t,e,n){var r;if(void 0===n)r=function(t){return zr(t,e)};else{var i=function(){if(void 0===wi)try{document.querySelector(":scope"),wi=!0}catch(_s){wi=!1}return wi}()?Ri("".concat(e,":scope"),n):Ri(e,n);r=function(t){return null!==t.querySelector(i)}}for(var o=Vr(t).firstElementChild;o;){if(o!==t&&r(o))return!1;o=o.nextElementSibling}return!0}function Ri(t,e){return e?"".concat(t,">").concat(e):t}var Mi=Vt;function Ni(t,e){var n,r=[],i=0;function o(t){t.stopObservable.subscribe(a),r.push(t),N(n),n=M(s,1e3)}function a(){1===i&&r.every((function(t){return t.isStopped()}))&&(i=2,e(r))}function s(){N(n),0===i&&(i=1,a())}return o(t),{tryAppend:function(t){return 0===i&&(r.length>0&&!function(t,e){return t.target===e.target&&(n=t,r=e,Math.sqrt(Math.pow(n.clientX-r.clientX,2)+Math.pow(n.clientY-r.clientY,2))<=100)&&t.timeStamp-e.timeStamp<=Mi;var n,r}(r[r.length-1].event,t.event)?(s(),!1):(o(t),!0))},stop:function(){s()}}}function Li(){var t=window.getSelection();return!t||t.isCollapsed}function Di(t){return t.target instanceof Element&&!1!==t.isPrimary}function Pi(t,e){if(function(t){if(t.some((function(t){return t.getUserActivity().selection||t.getUserActivity().scroll})))return!1;for(var e=0;e<t.length-2;e+=1)if(t[e+3-1].event.timeStamp-t[e].event.timeStamp<=Vt)return!0;return!1}(t))return e.addFrustration("rage_click"),t.some(ji)&&e.addFrustration("dead_click"),e.hasError&&e.addFrustration("error_click"),{isRage:!0};var n=t.some((function(t){return t.getUserActivity().selection}));return t.forEach((function(t){t.hasError&&t.addFrustration("error_click"),ji(t)&&!n&&t.addFrustration("dead_click")})),{isRage:!1}}function ji(t){return!(t.hasPageActivity||t.getUserActivity().input||t.getUserActivity().scroll)&&!zr(t.event.target,'input:not([type="checkbox"]):not([type="radio"]):not([type="button"]):not([type="submit"]):not([type="reset"]):not([type="range"]),textarea,select,[contenteditable],[contenteditable] *,canvas,a[href],a[href] *')}function Fi(t,e,n){var r,i=ar({expireDelay:3e5}),o=new Y;t.subscribe(9,(function(){i.reset()})),t.subscribe(4,u);var a=function(t,e){var n,r,i=e.onPointerDown,o=e.onPointerUp,a={selection:!1,input:!1,scroll:!1},s=[nt(t,window,"pointerdown",(function(t){Di(t)&&(n=Li(),a={selection:!1,input:!1,scroll:!1},r=i(t))}),{capture:!0}),nt(t,window,"selectionchange",(function(){n&&Li()||(a.selection=!0)}),{capture:!0}),nt(t,window,"scroll",(function(){a.scroll=!0}),{capture:!0,passive:!0}),nt(t,window,"pointerup",(function(t){if(Di(t)&&r){var e=a;o(r,t,(function(){return e})),r=void 0}}),{capture:!0}),nt(t,window,"input",(function(){a.input=!0}),{capture:!0})];return{stop:function(){s.forEach((function(t){return t.stop()}))}}}(n,{onPointerDown:function(r){return function(t,e,n,r){var i=t.enablePrivacyForActionName?ni(r.target,t.defaultPrivacyLevel):$r.ALLOW;if(i===$r.HIDDEN)return;var o=function(t,e,n){var r=t.target.getBoundingClientRect();return{type:"click",target:{width:Math.round(r.width),height:Math.round(r.height),selector:xi(t.target,n.actionNameAttribute)},position:{x:Math.round(t.clientX-r.left),y:Math.round(t.clientY-r.top)},name:li(t.target,n,e)}}(r,i,t),a=!1;return Fr(e,n,t,(function(t){a=t.hadActivity}),jr),{clickActionBase:o,hadActivityOnPointerDown:function(){return a}}}(n,t,e,r)},onPointerUp:function(r,a,u){var c=r.clickActionBase,l=r.hadActivityOnPointerDown;!function(t,e,n,r,i,o,a,s,u,c){var l=Ui(e,r,u,a,s);o(l);var d=Fr(e,n,t,(function(t){t.hadActivity&&t.end<l.startClocks.timeStamp?l.discard():t.hadActivity?l.stop(t.end):c()?l.stop(l.startClocks.timeStamp):l.stop()}),1e4).stop,f=e.subscribe(4,(function(t){var e=t.endClocks;l.stop(e.timeStamp)})),p=i.subscribe((function(){l.stop()}));l.stopObservable.subscribe((function(){f.unsubscribe(),d(),p.unsubscribe()}))}(n,t,e,i,o,s,c,a,u,l)}}).stop;return{stop:function(){u(),o.notify(),a()},actionContexts:{findActionId:function(t){return i.findAll(t)}}};function s(t){if(!r||!r.tryAppend(t)){var e=t.clone();r=Ni(t,(function(t){!function(t,e){Pi(t,e).isRage?(t.forEach((function(t){return t.discard()})),e.stop(Wt()),e.validate(t.map((function(t){return t.event})))):(e.discard(),t.forEach((function(t){return t.validate()})))}(t,e)}))}}function u(){r&&r.stop()}}function Ui(t,e,n,r,i){var o,a=we(),s=$t(),u=e.add(a,s.relative),c=Nr({lifeCycle:t,isChildEvent:function(t){return void 0!==t.action&&(Array.isArray(t.action.id)?w(t.action.id,a):t.action.id===a)}}),l=0,d=[],f=new Y;function p(t){0===l&&(l=1,(o=t)?u.close(te(o)):u.remove(),c.stop(),f.notify())}return{event:i,stop:p,stopObservable:f,get hasError(){return c.eventCounts.errorCount>0},get hasPageActivity(){return void 0!==o},getUserActivity:n,addFrustration:function(t){d.push(t)},startClocks:s,isStopped:function(){return 1===l||2===l},clone:function(){return Ui(t,e,n,r,i)},validate:function(e){if(p(),1===l){var n=c.eventCounts,u=n.resourceCount,f=n.errorCount,h=n.longTaskCount,v=I({type:"click",duration:o&&Yt(s.timeStamp,o),startClocks:s,id:a,frustrationTypes:d,counts:{resourceCount:u,errorCount:f,longTaskCount:h},events:null!==e&&void 0!==e?e:[i],event:i},r);t.notify(0,v),l=2}},discard:function(){p(),l=2}}}function Bi(t,e){var n=zi(t)?{action:{id:t.id,loading_time:Mr(Jt(t.duration)),frustration:{type:t.frustrationTypes},error:{count:t.counts.errorCount},long_task:{count:t.counts.longTaskCount},resource:{count:t.counts.resourceCount}},_dd:{action:{target:t.target,position:t.position}}}:void 0,r=zi(t)?void 0:t.context,i=W({action:{id:we(),target:{name:t.name},type:t.type},date:t.startClocks.timeStamp,type:"action",view:{in_foreground:e.wasInPageStateAt("active",t.startClocks.relative)}},n),o=zi(t)?{events:t.events}:{};return!zi(t)&&t.handlingStack&&(o.handlingStack=t.handlingStack),{customerContext:r,rawRumEvent:i,startTime:t.startClocks.relative,domainContext:o}}function zi(t){return"custom"!==t.type}function Vi(t){var e,n=function(e,n){var r=It({stackTrace:e,originalError:n,startClocks:$t(),nonErrorPrefix:"Uncaught",source:Hn,handling:"unhandled"});t.notify(r)},r=(e=n,Ae(window,"onerror",(function(t){var n,r=t.parameters,i=r[0],o=r[1],a=r[2],s=r[3],u=r[4];n=u instanceof Error?ct(u):bt(i,o,a,s),e(n,null!==u&&void 0!==u?u:i)}))).stop,i=function(t){return Ae(window,"onunhandledrejection",(function(e){var n=e.parameters[0].reason||"Empty reason",r=ct(n);t(r,n)}))}(n).stop;return{stop:function(){r(),i()}}}var qi={};function Gi(t){var e=t.map((function(t){return qi[t]||(qi[t]=function(t){return new Y((function(e){var n=o[t];return o[t]=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];n.apply(console,r);var o=_t();y((function(){e.notify(Hi(r,t,o))}))},function(){o[t]=n}}))}(t)),qi[t]}));return Q.apply(void 0,e)}function Hi(t,e,n){var r,o=t.map((function(t){return function(t){if("string"===typeof t)return Z(t);if(t instanceof Error)return kt(ct(t));return F(Z(t),void 0,2)}(t)})).join(" ");if(e===i.error){var a=S(t,(function(t){return t instanceof Error}));r={stack:a?St(ct(a)):void 0,fingerprint:Ct(a),causes:a?Ot(a,"console"):void 0,startClocks:$t(),message:o,source:qn,handling:"handled",handlingStack:n}}return{api:e,message:o,error:r,handlingStack:n}}var Ji="intervention",Ki="csp_violation";function Wi(t,e){var n=[];w(e,Ki)&&n.push(function(t){return new Y((function(e){return nt(t,document,"securitypolicyviolation",(function(t){e.notify(function(t){var e="'".concat(t.blockedURI,"' blocked by '").concat(t.effectiveDirective,"' directive");return Zi({type:t.effectiveDirective,message:"".concat(Ki,": ").concat(e),originalError:t,csp:{disposition:t.disposition},stack:$i(t.effectiveDirective,t.originalPolicy?"".concat(e,' of the policy "').concat(ke(t.originalPolicy,100,"..."),'"'):"no policy",t.sourceFile,t.lineNumber,t.columnNumber)})}(t))})).stop}))}(t));var r=e.filter((function(t){return t!==Ki}));return r.length&&n.push(function(t){return new Y((function(e){if(window.ReportingObserver){var n=g((function(t,n){return t.forEach((function(t){return e.notify(function(t){var e=t.type,n=t.body;return Zi({type:n.id,message:"".concat(e,": ").concat(n.message),originalError:t,stack:$i(n.id,n.message,n.sourceFile,n.lineNumber,n.columnNumber)})}(t))}))})),r=new window.ReportingObserver(n,{types:t,buffered:!0});return r.observe(),function(){r.disconnect()}}}))}(r)),Q.apply(void 0,n)}function Zi(t){return I({startClocks:$t(),source:Jn,handling:"unhandled"},t)}function $i(t,e,n,r,i){return n?St({name:t,message:e,stack:[{func:"?",url:n,line:null!==r&&void 0!==r?r:void 0,column:null!==i&&void 0!==i?i:void 0}]}):void 0}function Xi(t,e,n,r){var o=new Y;return function(t){var e=Gi([i.error]).subscribe((function(e){return t.notify(e.error)}))}(o),Vi(o),function(t,e){var n=Wi(t,[Ki,Ji]).subscribe((function(t){return e.notify(t)}))}(e,o),o.subscribe((function(e){return t.notify(13,{error:e})})),function(t,e,n){return t.subscribe(13,(function(r){var i=r.error,o=r.customerContext,a=r.savedCommonContext;t.notify(11,I({customerContext:o,savedCommonContext:a},function(t,e,n){var r={date:t.startClocks.timeStamp,error:{id:we(),message:t.message,source:t.source,stack:t.stack,handling_stack:t.handlingStack,type:t.type,handling:t.handling,causes:t.causes,source_type:"browser",fingerprint:t.fingerprint,csp:t.csp},type:"error",view:{in_foreground:e.wasInPageStateAt("active",t.startClocks.relative)}},i=n.findFeatureFlagEvaluations(t.startClocks.relative);i&&!V(i)&&(r.feature_flags=i);var o={error:t.originalError,handlingStack:t.handlingStack};return{rawRumEvent:r,startTime:t.startClocks.relative,domainContext:o}}(i,e,n)))})),{addError:function(e,n){var r=e.error,i=e.handlingStack,o=e.startClocks,a=e.context,s=It({stackTrace:r instanceof Error?ct(r):void 0,originalError:r,handlingStack:i,startClocks:o,nonErrorPrefix:"Provided",source:Gn,handling:"handled"});t.notify(13,{customerContext:a,savedCommonContext:n,error:s})}}}(t,n,r)}var Yi=new qr;function Qi(t){if(performance&&"getEntriesByName"in performance){var e=performance.getEntriesByName(t.url,"resource");if(e.length&&"toJSON"in e[0]){var n=e.filter((function(t){return!Yi.has(t)})).filter((function(t){return br(t)&&wr(t)})).filter((function(e){return function(t,e,n){var r=1;return t.startTime>=e-r&&to(t)<=Qt(n,r)}(e,t.startClocks.relative,to({startTime:t.startClocks.relative,duration:t.duration}))}));return 1===n.length?(Yi.add(n[0]),n[0].toJSON()):void 0}}}function to(t){return Qt(t.startTime,t.duration)}function eo(t,e,n){return document.readyState===e||"complete"===document.readyState?(n(),{stop:j}):nt(t,window,"complete"===e?"load":"DOMContentLoaded",n,{once:!0})}function no(t){var e=function(t){var e=t.querySelector("meta[name=dd-trace-id]"),n=t.querySelector("meta[name=dd-trace-time]");return ro(e&&e.content,n&&n.content)}(t)||function(t){var e=function(t){for(var e=0;e<t.childNodes.length;e+=1){if(n=io(t.childNodes[e]))return n}if(t.body)for(e=t.body.childNodes.length-1;e>=0;e-=1){var n,r=t.body.childNodes[e];if(n=io(r))return n;if(!Gr(r))break}}(t);if(!e)return;return ro(Se(e,"trace-id"),Se(e,"trace-time"))}(t);if(e&&!(e.traceTime<=Kt()-12e4))return e.traceId}function ro(t,e){var n=e&&Number(e);if(t&&n)return{traceId:t,traceTime:n}}function io(t){if(t&&function(t){return t.nodeType===Node.COMMENT_NODE}(t)){var e=/^\s*DATADOG;(.*?)\s*$/.exec(t.data);if(e)return e[1]}}function oo(){if(Pr(Cr.NAVIGATION)){var t=performance.getEntriesByType(Cr.NAVIGATION)[0];if(t)return t}var e=function(){var t={},e=performance.timing;for(var n in e)if(Bt(e[n])){var r=n,i=e[r];t[r]=0===i?0:te(i)}return t}(),n=I({entryType:Cr.NAVIGATION,initiatorType:"navigation",name:window.location.href,startTime:0,duration:e.responseEnd,decodedBodySize:0,encodedBodySize:0,transferSize:0,toJSON:function(){return I({},n,{toJSON:void 0})}},e);return n}function ao(t,e){eo(t,"interactive",(function(){var t=I(oo().toJSON(),{entryType:Cr.RESOURCE,initiatorType:fr,traceId:no(document),toJSON:function(){return I({},t,{toJSON:void 0})}});e(t)}))}function so(t,e,n,r){void 0===r&&(r=ao),t.subscribe(7,(function(r){var i=function(t,e,n){var r=Qi(t),i=r?Gt(r.startTime):t.startClocks,o=function(t,e){if(!(t.traceSampled&&t.traceId&&t.spanId))return;return{_dd:{span_id:t.spanId.toDecimalString(),trace_id:t.traceId.toDecimalString(),rule_psr:lo(e)}}}(t,e);if(!e.trackResources&&!o)return;var a="xhr"===t.type?"xhr":"fetch",s=r?co(r):void 0,u=function(t,e,n){return t.wasInPageStateDuringPeriod("frozen",e.relative,n)?void 0:Jt(n)}(n,i,t.duration),c=W({date:i.timeStamp,resource:{id:we(),type:a,duration:u,method:t.method,status_code:t.status,url:Er(t.url)?Ir(t.url):t.url},type:"resource",_dd:{discarded:!e.trackResources}},o,s);return{startTime:i.relative,rawRumEvent:c,domainContext:{performanceEntry:r,xhr:t.xhr,response:t.response,requestInput:t.input,requestInit:t.init,error:t.error,isAborted:t.isAborted,handlingStack:t.handlingStack}}}(r,e,n);i&&t.notify(11,i)}));var i=Dr(e,{type:Cr.RESOURCE,buffered:!0}).subscribe((function(n){for(var r=0,i=n;r<i.length;r++){var o=i[r];if(!mr(o)){var a=uo(o,e);a&&t.notify(11,a)}}}));return r(e,(function(n){var r=uo(n,e);r&&t.notify(11,r)})),{stop:function(){i.unsubscribe()}}}function uo(t,e){var n=Gt(t.startTime),r=function(t,e){if(!t.traceId)return;return{_dd:{trace_id:t.traceId,span_id:Rn().toDecimalString(),rule_psr:lo(e)}}}(t,e);if(e.trackResources||r){var i,o=hr(t),a=co(t),s=W({date:n.timeStamp,resource:{id:we(),type:o,url:t.name,status_code:(i=t.responseStatus,0===i?void 0:i)},type:"resource",_dd:{discarded:!e.trackResources}},r,a);return{startTime:n.relative,rawRumEvent:s,domainContext:{performanceEntry:t}}}}function co(t){var e=t.renderBlockingStatus;return{resource:I({duration:gr(t),render_blocking_status:e},Sr(t),yr(t))}}function lo(t){return Bt(t.traceSampleRate)?t.traceSampleRate/100:void 0}function fo(t,e,n){return void 0===n&&(n=oo),function(t,e){var n,r=eo(t,"complete",(function(){n=M((function(){return e()}))})).stop;return{stop:function(){r(),N(n)}}}(t,(function(){var t=n();(function(t){return t.loadEventEnd<=0})(t)||e(function(t){return{domComplete:t.domComplete,domContentLoaded:t.domContentLoadedEventEnd,domInteractive:t.domInteractive,loadEvent:t.loadEventEnd,firstByte:t.responseStart>=0&&t.responseStart<=Zt()?t.responseStart:void 0}}(t))}))}function po(t,e){var n,r;return void 0===e&&(e=window),"hidden"===document.visibilityState?n=0:(n=1/0,r=rt(t,e,["pagehide","visibilitychange"],(function(t){"pagehide"!==t.type&&"hidden"!==document.visibilityState||(n=t.timeStamp,r())}),{capture:!0}).stop),{get timeStamp(){return n},stop:function(){null===r||void 0===r||r()}}}function ho(t,e,n){var r={},i=fo(t,(function(t){e(t.loadEvent),r.navigationTimings=t,n()})).stop,o=po(t),a=function(t,e,n){return{stop:Dr(t,{type:Cr.PAINT,buffered:!0}).subscribe((function(t){var r=S(t,(function(t){return"first-contentful-paint"===t.name&&t.startTime<e.timeStamp&&t.startTime<6e5}));r&&n(r.startTime)})).unsubscribe}}(t,o,(function(t){r.firstContentfulPaint=t,n()})).stop,s=function(t,e,n,r){var i=1/0,o=rt(t,n,["pointerdown","keydown"],(function(t){i=t.timeStamp}),{capture:!0,once:!0}).stop,a=0,s=Dr(t,{type:Cr.LARGEST_CONTENTFUL_PAINT,buffered:!0}).subscribe((function(n){var o=function(t,e){for(var n=t.length-1;n>=0;n-=1){var r=t[n];if(e(r,n,t))return r}}(n,(function(t){return t.entryType===Cr.LARGEST_CONTENTFUL_PAINT&&t.startTime<i&&t.startTime<e.timeStamp&&t.startTime<6e5&&t.size>a}));if(o){var s=void 0;o.element&&(s=xi(o.element,t.actionNameAttribute)),r({value:o.startTime,targetSelector:s}),a=o.size}}));return{stop:function(){o(),s.unsubscribe()}}}(t,o,window,(function(t){r.largestContentfulPaint=t,n()})).stop,u=function(t,e,n){var r=Dr(t,{type:Cr.FIRST_INPUT,buffered:!0}).subscribe((function(r){var i=S(r,(function(t){return t.startTime<e.timeStamp}));if(i){var o=Yt(i.startTime,i.processingStart),a=void 0;i.target&&Hr(i.target)&&(a=xi(i.target,t.actionNameAttribute)),n({delay:o>=0?o:0,time:i.startTime,targetSelector:a})}}));return{stop:function(){r.unsubscribe()}}}(t,o,(function(t){r.firstInput=t,n()})).stop;return{stop:function(){i(),a(),s(),u(),o.stop()},initialViewMetrics:r}}function vo(t,e,n){if(!yo())return{stop:j};var r,i,o=0;n({value:0});var a=function(){var t,e,n=0,r=0;return{update:function(i){var o;return void 0===t||i.startTime-e>=1e3||i.startTime-t>=5e3?(t=e=i.startTime,r=n=i.value,o=!0):(n+=i.value,e=i.startTime,(o=i.value>r)&&(r=i.value)),{cumulatedValue:n,isMaxValue:o}}}}(),s=Dr(t,{type:Cr.LAYOUT_SHIFT,buffered:!0}).subscribe((function(s){for(var u=0,c=s;u<c.length;u++){var l=c[u];if(!l.hadRecentInput){var d=a.update(l),f=d.cumulatedValue;if(d.isMaxValue){var p=mo(l.sources);r=p?new WeakRef(p):void 0,i=Yt(e,l.startTime)}if(f>o){o=f;p=null===r||void 0===r?void 0:r.deref();n({value:Ut(o,4),targetSelector:p&&xi(p,t.actionNameAttribute),time:i})}}}}));return{stop:function(){s.unsubscribe()}}}function mo(t){var e;if(t)return null===(e=S(t,(function(t){return!!t.node&&Hr(t.node)})))||void 0===e?void 0:e.node}var go;function yo(){return Pr(Cr.LAYOUT_SHIFT)&&"WeakRef"in window}var bo=0,wo=1/0,_o=0;var So,ko=function(){return go?bo:window.performance.interactionCount||0};function xo(t,e,n){if(!(Pr(Cr.EVENT)&&window.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype))return{getInteractionToNextPaint:function(){},setViewEnd:j,stop:j};var r,i,o=function(t){"interactionCount"in performance||go||(go=new window.PerformanceObserver(g((function(t){t.getEntries().forEach((function(t){var e=t;e.interactionId&&(wo=Math.min(wo,e.interactionId),_o=Math.max(_o,e.interactionId),bo=(_o-wo)/7+1)}))})))).observe({type:"event",buffered:!0,durationThreshold:0});var e="initial_load"===t?0:ko(),n={stopped:!1};function r(){return ko()-e}return{getViewInteractionCount:function(){return n.stopped?n.interactionCount:r()},stopViewInteractionCount:function(){n={stopped:!0,interactionCount:r()}}}}(n),a=o.getViewInteractionCount,s=o.stopViewInteractionCount,u=1/0,c=function(t){var e=[];function n(){e.sort((function(t,e){return e.duration-t.duration})).splice(10)}return{process:function(t){var r=e.findIndex((function(e){return t.interactionId===e.interactionId})),i=e[e.length-1];-1!==r?t.duration>e[r].duration&&(e[r]=t,n()):(e.length<10||t.duration>i.duration)&&(e.push(t),n())},estimateP98Interaction:function(){var n=Math.min(e.length-1,Math.floor(t()/50));return e[n]}}}(a),l=-1;function d(n){for(var o=0,a=n;o<a.length;o++){var s=a[o];s.interactionId&&s.startTime>=e&&s.startTime<=u&&c.process(s)}var d=c.estimateP98Interaction();d&&d.duration!==l&&(l=d.duration,i=Yt(e,d.startTime),r=d.target&&Hr(d.target)?xi(d.target,t.actionNameAttribute):void 0)}var f=Dr(t,{type:Cr.FIRST_INPUT,buffered:!0}).subscribe(d),p=Dr(t,{type:Cr.EVENT,durationThreshold:40,buffered:!0}).subscribe(d);return{getInteractionToNextPaint:function(){return l>=0?{value:Math.min(l,6e4),targetSelector:r,time:i}:a()?{value:0}:void 0},setViewEnd:function(t){u=t,s()},stop:function(){p.unsubscribe(),f.unsubscribe()}}}function Eo(){var t,e=window.visualViewport;return t=e?e.pageLeft-e.offsetLeft:void 0!==window.scrollX?window.scrollX:window.pageXOffset||0,Math.round(t)}function Io(){var t,e=window.visualViewport;return t=e?e.pageTop-e.offsetTop:void 0!==window.scrollY?window.scrollY:window.pageYOffset||0,Math.round(t)}function Co(t){return So||(So=function(t){return new Y((function(e){var n=P((function(){e.notify(Oo())}),200).throttled;return nt(t,window,"resize",n,{capture:!0,passive:!0}).stop}))}(t)),So}function Oo(){var t=window.visualViewport;return t?{width:Number(t.width*t.scale),height:Number(t.height*t.scale)}:{width:Number(window.innerWidth||0),height:Number(window.innerHeight||0)}}function To(t,e,n,r){void 0===r&&(r=function(t,e){void 0===e&&(e=1e3);return new Y((function(n){function r(){n.notify(function(){var t=Io(),e=Oo().height,n=Math.round((document.scrollingElement||document.documentElement).scrollHeight),r=Math.round(e+t);return{scrollHeight:n,scrollDepth:r,scrollTop:t}}())}if(window.ResizeObserver){var i=P(r,e,{leading:!1,trailing:!0}),o=document.scrollingElement||document.documentElement,a=new ResizeObserver(g(i.throttled));a.observe(o);var s=nt(t,window,"scroll",i.throttled,{passive:!0});return function(){i.cancel(),a.unobserve(o),s.stop()}}}))}(t));var i=0,o=0,a=0,s=r.subscribe((function(t){var r=t.scrollDepth,s=t.scrollTop,u=t.scrollHeight,c=!1;if(r>i&&(i=r,c=!0),u>o){o=u;var l=Zt();a=Yt(e.relative,l),c=!0}c&&n({maxDepth:Math.min(i,o),maxDepthScrollTop:s,maxScrollHeight:o,maxScrollHeightTime:a})}));return{stop:function(){return s.unsubscribe()}}}function Ao(t,e,n,r,i,o){var a={},s=function(t,e,n,r,i,o){var a="initial_load"===r,s=!0,u=[],c=po(n);function l(){if(!s&&!a&&u.length>0){var t=Math.max.apply(Math,u);t<c.timeStamp&&o(t)}}var d=Fr(t,e,n,(function(t){s&&(s=!1,t.hadActivity&&u.push(Yt(i.timeStamp,t.end)),l())})).stop;return{stop:function(){d(),c.stop()},setLoadEvent:function(t){a&&(a=!1,u.push(t),l())}}}(t,e,n,i,o,(function(t){a.loadingTime=t,r()})),u=s.stop,c=s.setLoadEvent,l=To(n,o,(function(t){a.scroll=t})).stop,d=vo(n,o.relative,(function(t){a.cumulativeLayoutShift=t,r()})).stop,f=xo(n,o.relative,i),p=f.stop,h=f.getInteractionToNextPaint;return{stop:function(){u(),d(),l()},stopINPTracking:p,setLoadEvent:c,setViewEnd:f.setViewEnd,getCommonViewMetrics:function(){return a.interactionToNextPaint=h(),a}}}var Ro=3e5,Mo=3e5;function No(t,e,n,r,i,o,a){var s,c=new Set,l=d("initial_load",Xt(),a);function d(i,o,a){var s=function(t,e,n,r,i,o,a){void 0===o&&(o=$t());var s,c,l,d,f,p=we(),h=new Y,v={},m=0,g=B(r),y=tt(),b=!0;a&&(c=a.name,l=a.service||void 0,d=a.version||void 0,a.context&&(f=a.context,y.setContext(f)));var w={id:p,name:c,startClocks:o,service:l,version:d,context:f};t.notify(1,w),t.notify(2,w);var _=P(q,3e3,{leading:!1}),S=_.throttled,k=_.cancel,x=Ao(t,e,n,S,i,o),E=x.setLoadEvent,I=x.setViewEnd,C=x.stop,O=x.stopINPTracking,T=x.getCommonViewMetrics,A="initial_load"===i?ho(n,E,S):{stop:j,initialViewMetrics:{}},R=A.stop,N=A.initialViewMetrics,F=function(t,e,n){var r=Nr({lifeCycle:t,isChildEvent:function(t){return t.view.id===e},onChange:n});return{stop:r.stop,eventCounts:r.eventCounts}}(t,p,S),U=F.stop,z=F.eventCounts,V=L(q,Ro);function q(){k(),m+=1;var e=void 0===s?Wt():s.timeStamp;t.notify(3,{customTimings:v,documentVersion:m,id:p,name:c,service:l,version:d,context:y.getContext(),loadingType:i,location:g,startClocks:o,commonViewMetrics:T(),initialViewMetrics:N,duration:Yt(o.timeStamp,e),isActive:void 0===s,sessionIsActive:b,eventCounts:z})}return q(),y.changeObservable.subscribe(q),{get name(){return c},service:l,version:d,contextManager:y,stopObservable:h,end:function(e){var n,r,i=this;void 0===e&&(e={}),s||(s=null!==(n=e.endClocks)&&void 0!==n?n:$t(),b=null===(r=e.sessionIsActive)||void 0===r||r,t.notify(4,{endClocks:s}),t.notify(5,{endClocks:s}),D(V),I(s.relative),C(),q(),M((function(){i.stop()}),Mo))},stop:function(){R(),U(),O(),h.notify()},addTiming:function(t,e){if(!s){var n=function(t){return t<31536e6}(e)?e:Yt(o.timeStamp,e);v[function(t){var e=t.replace(/[^a-zA-Z0-9-_.@$]/g,"_");e!==t&&u.warn("Invalid timing name: ".concat(t,", sanitized to: ").concat(e));return e}(t)]=n,S()}},updateViewName:function(t){Rt(xt.UPDATE_VIEW_NAME)&&(c=t,q())}}}(e,n,r,t,i,o,a);return c.add(s),s.stopObservable.subscribe((function(){c.delete(s)})),s}return e.subscribe(9,(function(){l=d("route_change",void 0,{name:l.name,service:l.service,version:l.version,context:l.contextManager.getContext()})})),e.subscribe(8,(function(){l.end({sessionIsActive:!1})})),e.subscribe(10,(function(t){t.reason===Un.UNLOADING&&l.end()})),o&&(s=function(t){return t.subscribe((function(t){var e,n,r=t.oldLocation,i=t.newLocation;n=i,((e=r).pathname!==n.pathname||!function(t){var e=t.substring(1);return""!==e&&!!document.getElementById(e)}(n.hash)&&Lo(n.hash)!==Lo(e.hash))&&(l.end(),l=d("route_change"))}))}(i)),{addTiming:function(t,e){void 0===e&&(e=Wt()),l.addTiming(t,e)},startView:function(t,e){l.end({endClocks:e}),l=d("route_change",e,t)},setViewContext:function(t){l.contextManager.setContext(t)},setViewContextProperty:function(t,e){l.contextManager.setContextProperty(t,e)},updateViewName:function(t){l.updateViewName(t)},stop:function(){s&&s.unsubscribe(),l.end(),c.forEach((function(t){return t.stop()}))}}}function Lo(t){var e=t.indexOf("?");return e<0?t:t.slice(0,e)}function Do(t,e,n,r,i,o,a,s,u){return t.subscribe(3,(function(n){return t.notify(11,function(t,e,n,r,i){var o,a,s,u,c,l,d,f,p,h,v,m,g,y,b,w,_=r.getReplayStats(t.id),S=n.findFeatureFlagEvaluations(t.startClocks.relative),k=i.findAll(t.startClocks.relative,t.duration),x={_dd:{document_version:t.documentVersion,replay_stats:_,page_states:k,configuration:{start_session_replay_recording_manually:e.startSessionReplayRecordingManually}},date:t.startClocks.timeStamp,type:"view",view:{action:{count:t.eventCounts.actionCount},frustration:{count:t.eventCounts.frustrationCount},cumulative_layout_shift:null===(o=t.commonViewMetrics.cumulativeLayoutShift)||void 0===o?void 0:o.value,cumulative_layout_shift_time:Jt(null===(a=t.commonViewMetrics.cumulativeLayoutShift)||void 0===a?void 0:a.time),cumulative_layout_shift_target_selector:null===(s=t.commonViewMetrics.cumulativeLayoutShift)||void 0===s?void 0:s.targetSelector,first_byte:Jt(null===(u=t.initialViewMetrics.navigationTimings)||void 0===u?void 0:u.firstByte),dom_complete:Jt(null===(c=t.initialViewMetrics.navigationTimings)||void 0===c?void 0:c.domComplete),dom_content_loaded:Jt(null===(l=t.initialViewMetrics.navigationTimings)||void 0===l?void 0:l.domContentLoaded),dom_interactive:Jt(null===(d=t.initialViewMetrics.navigationTimings)||void 0===d?void 0:d.domInteractive),error:{count:t.eventCounts.errorCount},first_contentful_paint:Jt(t.initialViewMetrics.firstContentfulPaint),first_input_delay:Jt(null===(f=t.initialViewMetrics.firstInput)||void 0===f?void 0:f.delay),first_input_time:Jt(null===(p=t.initialViewMetrics.firstInput)||void 0===p?void 0:p.time),first_input_target_selector:null===(h=t.initialViewMetrics.firstInput)||void 0===h?void 0:h.targetSelector,interaction_to_next_paint:Jt(null===(v=t.commonViewMetrics.interactionToNextPaint)||void 0===v?void 0:v.value),interaction_to_next_paint_time:Jt(null===(m=t.commonViewMetrics.interactionToNextPaint)||void 0===m?void 0:m.time),interaction_to_next_paint_target_selector:null===(g=t.commonViewMetrics.interactionToNextPaint)||void 0===g?void 0:g.targetSelector,is_active:t.isActive,name:t.name,largest_contentful_paint:Jt(null===(y=t.initialViewMetrics.largestContentfulPaint)||void 0===y?void 0:y.value),largest_contentful_paint_target_selector:null===(b=t.initialViewMetrics.largestContentfulPaint)||void 0===b?void 0:b.targetSelector,load_event:Jt(null===(w=t.initialViewMetrics.navigationTimings)||void 0===w?void 0:w.loadEvent),loading_time:Mr(Jt(t.commonViewMetrics.loadingTime)),loading_type:t.loadingType,long_task:{count:t.eventCounts.longTaskCount},resource:{count:t.eventCounts.resourceCount},time_spent:Jt(t.duration)},feature_flags:S&&!V(S)?S:void 0,display:t.commonViewMetrics.scroll?{scroll:{max_depth:t.commonViewMetrics.scroll.maxDepth,max_depth_scroll_top:t.commonViewMetrics.scroll.maxDepthScrollTop,max_scroll_height:t.commonViewMetrics.scroll.maxScrollHeight,max_scroll_height_time:Jt(t.commonViewMetrics.scroll.maxScrollHeightTime)}}:void 0,session:{has_replay:!!_||void 0,is_active:!!t.sessionIsActive&&void 0},privacy:{replay_level:e.defaultPrivacyLevel}};V(t.customTimings)||(x.view.custom_timings=function(t,e){for(var n={},r=0,i=Object.keys(t);r<i.length;r++){var o=i[r];n[o]=e(t[o])}return n}(t.customTimings,Jt));return{rawRumEvent:x,startTime:t.startClocks.relative,domainContext:{location:t.location}}}(n,e,o,s,a))})),No(n,t,r,e,i,!e.trackViewsManually,u)}var Po=[];function jo(t,e,n,r){var i=new Y,o=new Y,a=gn(t.sessionStoreStrategyType,e,n);Po.push((function(){return a.stop()}));var s=ar({expireDelay:144e5});function u(){return{id:a.getSession().id,trackingType:a.getSession()[e],isReplayForced:!!a.getSession().forcedReplay}}return Po.push((function(){return s.stop()})),a.renewObservable.subscribe((function(){s.add(u(),Zt()),i.notify()})),a.expireObservable.subscribe((function(){o.notify(),s.closeActive(Zt())})),a.expandOrRenewSession(),s.add(u(),Xt().relative),r.observable.subscribe((function(){r.isGranted()?a.expandOrRenewSession():a.expire()})),function(t,e){var n=rt(t,window,["click","touchstart","keydown","scroll"],e,{capture:!0,passive:!0}).stop;Po.push(n)}(t,(function(){r.isGranted()&&a.expandOrRenewSession()})),function(t,e){var n=function(){"visible"===document.visibilityState&&e()},r=nt(t,document,"visibilitychange",n).stop;Po.push(r);var i=L(n,6e4);Po.push((function(){D(i)}))}(t,(function(){return a.expandSession()})),function(t,e){var n=nt(t,window,"resume",e,{capture:!0}).stop;Po.push(n)}(t,(function(){return a.restartSession()})),{findSession:function(t,e){return s.find(t,e)},renewObservable:i,expireObservable:o,sessionStateUpdateObservable:a.sessionStateUpdateObservable,expire:a.expire,updateSessionState:a.updateSessionState}}function Fo(t,e,n){var r=jo(t,"rum",(function(e){return function(t,e){var n;n=function(t){return"0"===t||"1"===t||"2"===t}(e)?e:Ft(t.sessionSampleRate)?Ft(t.sessionReplaySampleRate)?"1":"2":"0";return{trackingType:n,isTracked:Uo(n)}}(t,e)}),n);return r.expireObservable.subscribe((function(){e.notify(8)})),r.renewObservable.subscribe((function(){e.notify(9)})),r.sessionStateUpdateObservable.subscribe((function(t){var e=t.previousState,n=t.newState;if(!e.forcedReplay&&n.forcedReplay){var i=r.findSession();i&&(i.isReplayForced=!0)}})),{findTrackedSession:function(t){var e=r.findSession(t);if(e&&Uo(e.trackingType))return{id:e.id,sessionReplay:"1"===e.trackingType?1:e.isReplayForced?2:0}},expire:r.expire,expireObservable:r.expireObservable,setForcedReplay:function(){return r.updateSessionState({forcedReplay:"1"})}}}function Uo(t){return"2"===t||"1"===t}function Bo(t){var e=t.encoder,n=t.request,r=t.flushController,i=t.messageBytesLimit,o={},a=r.flushObservable.subscribe((function(t){return function(t){var r=k(o).join("\n");o={};var i=Bn(t.reason),a=i?n.sendOnExit:n.send;if(i&&e.isAsync){var s=e.finishSync();s.outputBytesCount&&a(zo(s));var u=[s.pendingData,r].filter(Boolean).join("\n");u&&a({data:u,bytesCount:A(u)})}else r&&e.write(e.isEmpty?r:"\n".concat(r)),e.finish((function(t){a(zo(t))}))}(t)}));function s(t,n){var a=F(t),s=e.estimateEncodedBytesCount(a);s>=i?u.warn("Discarded a message whose size was bigger than the maximum allowed size ".concat(i,"KB. ").concat(d," ").concat(l,"/#technical-limitations")):(function(t){return void 0!==t&&void 0!==o[t]}(n)&&function(t){var n=o[t];delete o[t];var i=e.estimateEncodedBytesCount(n);r.notifyAfterRemoveMessage(i)}(n),function(t,n,i){r.notifyBeforeAddMessage(n),void 0!==i?(o[i]=t,r.notifyAfterAddMessage()):e.write(e.isEmpty?t:"\n".concat(t),(function(t){r.notifyAfterAddMessage(t-n)}))}(a,s,n))}return{flushController:r,add:s,upsert:s,stop:a.unsubscribe}}function zo(t){return{data:"string"===typeof t.output?t.output:new Blob([t.output],{type:"text/plain"}),bytesCount:t.outputBytesCount,encoding:t.encoding}}var Vo=3145728;function qo(t,e,n,r,i){0===e.transportStatus&&0===e.queuedPayloads.size()&&e.bandwidthMonitor.canHandle(t)?Ho(t,e,n,{onSuccess:function(){return Jo(0,e,n,r,i)},onFailure:function(){e.queuedPayloads.enqueue(t),Go(e,n,r,i)}}):e.queuedPayloads.enqueue(t)}function Go(t,e,n,r){2===t.transportStatus&&M((function(){Ho(t.queuedPayloads.first(),t,e,{onSuccess:function(){t.queuedPayloads.dequeue(),t.currentBackoffTime=1e3,Jo(1,t,e,n,r)},onFailure:function(){t.currentBackoffTime=Math.min(6e4,2*t.currentBackoffTime),Go(t,e,n,r)}})}),t.currentBackoffTime)}function Ho(t,e,n,r){var i=r.onSuccess,o=r.onFailure;e.bandwidthMonitor.add(t),n(t,(function(n){e.bandwidthMonitor.remove(t),!function(t){return"opaque"!==t.type&&(0===t.status&&!navigator.onLine||408===t.status||429===t.status||(e=t.status,e>=500));var e}(n)?(e.transportStatus=0,i()):(e.transportStatus=e.bandwidthMonitor.ongoingRequestCount>0?1:2,t.retry={count:t.retry?t.retry.count+1:1,lastFailureStatus:n.status},o())}))}function Jo(t,e,n,r,i){0===t&&e.queuedPayloads.isFull()&&!e.queueFullReported&&(i({message:"Reached max ".concat(r," events size queued for upload: ").concat(3,"MiB"),source:Vn,startClocks:$t()}),e.queueFullReported=!0);var o=e.queuedPayloads;for(e.queuedPayloads=Ko();o.size()>0;)qo(o.dequeue(),e,n,r,i)}function Ko(){var t=[];return{bytesCount:0,enqueue:function(e){this.isFull()||(t.push(e),this.bytesCount+=e.bytesCount)},first:function(){return t[0]},dequeue:function(){var e=t.shift();return e&&(this.bytesCount-=e.bytesCount),e},size:function(){return t.length},isFull:function(){return this.bytesCount>=Vo}}}function Wo(t,e,n,r){var i={transportStatus:0,currentBackoffTime:1e3,bandwidthMonitor:{ongoingRequestCount:0,ongoingByteCount:0,canHandle:function(t){return 0===this.ongoingRequestCount||this.ongoingByteCount+t.bytesCount<=81920&&this.ongoingRequestCount<32},add:function(t){this.ongoingRequestCount+=1,this.ongoingByteCount+=t.bytesCount},remove:function(t){this.ongoingRequestCount-=1,this.ongoingByteCount-=t.bytesCount}},queuedPayloads:Ko(),queueFullReported:!1},o=function(r,i){return function(t,e,n,r,i){if(function(){try{return window.Request&&"keepalive"in new Request("http://a")}catch(_s){return!1}}()&&r.bytesCount<n){var o=e.build("fetch",r);fetch(o,{method:"POST",body:r.data,keepalive:!0,mode:"cors"}).then(g((function(t){return null===i||void 0===i?void 0:i({status:t.status,type:t.type})})),g((function(){var n=e.build("xhr",r);$o(t,n,r.data,i)})))}else{var a=e.build("xhr",r);$o(t,a,r.data,i)}}(t,e,n,r,i)};return{send:function(t){qo(t,i,o,e.trackType,r)},sendOnExit:function(r){!function(t,e,n,r){if(navigator.sendBeacon&&r.bytesCount<n)try{var i=e.build("beacon",r);if(navigator.sendBeacon(i,r.data))return}catch(a){!function(t){Zo||(Zo=!0,ve(t))}(a)}var o=e.build("xhr",r);$o(t,o,r.data)}(t,e,n,r)}}}var Zo=!1;function $o(t,e,n,r){var i=new XMLHttpRequest;i.open("POST",e,!0),n instanceof Blob&&i.setRequestHeader("Content-Type",n.type),nt(t,i,"loadend",(function(){null===r||void 0===r||r({status:i.status})}),{once:!0}),i.send(n)}function Xo(t){var e,n=t.messagesLimit,r=t.bytesLimit,i=t.durationLimit,o=t.pageExitObservable,a=t.sessionExpireObservable,s=o.subscribe((function(t){return f(t.reason)})),u=a.subscribe((function(){return f("session_expire")})),c=new Y((function(){return function(){s.unsubscribe(),u.unsubscribe()}})),l=0,d=0;function f(t){if(0!==d){var e=d,n=l;d=0,l=0,p(),c.notify({reason:t,messagesCount:e,bytesCount:n})}}function p(){N(e),e=void 0}return{flushObservable:c,get messagesCount(){return d},notifyBeforeAddMessage:function(t){l+t>=r&&f("bytes_limit"),d+=1,l+=t,void 0===e&&(e=M((function(){f("duration_limit")}),i))},notifyAfterAddMessage:function(t){void 0===t&&(t=0),l+=t,d>=n?f("messages_limit"):l>=r&&f("bytes_limit")},notifyAfterRemoveMessage:function(t){l-=t,0===(d-=1)&&p()}}}function Yo(t,e,n,r,i,o,a){var s=t.replica,u=function(t,e,n,r,i,o,a){void 0===a&&(a=Bo);var s=c(t,e),u=n&&c(t,n);function c(t,e){var n=e.endpoint,s=e.encoder;return a({encoder:s,request:Wo(t,n,t.batchBytesLimit,r),flushController:Xo({messagesLimit:t.batchMessagesLimit,bytesLimit:t.batchBytesLimit,durationLimit:t.flushTimeout,pageExitObservable:i,sessionExpireObservable:o}),messageBytesLimit:t.messageBytesLimit})}return{flushObservable:s.flushController.flushObservable,add:function(t,e){void 0===e&&(e=!0),s.add(t),u&&e&&u.add(n.transformMessage?n.transformMessage(t):t)},upsert:function(t,e){s.upsert(t,e),u&&u.upsert(n.transformMessage?n.transformMessage(t):t,e)},stop:function(){s.stop(),u&&u.stop()}}}(t,{endpoint:t.rumEndpointBuilder,encoder:a(2)},s&&{endpoint:s.rumEndpointBuilder,transformMessage:function(t){return W(t,{application:{id:s.applicationId}})},encoder:a(3)},r,i,o);return e.subscribe(12,(function(t){"view"===t.type?u.upsert(t,t.view.id):u.add(t)})),n.subscribe((function(e){return u.add(e,function(t){return t.site===Nt}(t))})),u}function Qo(t,e){var n=B(e);return new Y((function(r){var i=function(t,e){var n=Ae(ta("pushState"),"pushState",(function(t){(0,t.onPostCall)(e)})).stop,r=Ae(ta("replaceState"),"replaceState",(function(t){(0,t.onPostCall)(e)})).stop,i=nt(t,window,"popstate",e).stop;return{stop:function(){n(),r(),i()}}}(t,a).stop,o=function(t,e){return nt(t,window,"hashchange",e)}(t,a).stop;function a(){if(n.href!==e.href){var t=B(e);r.notify({newLocation:t,oldLocation:n}),n=t}}return function(){i(),o()}}))}function ta(t){return Object.prototype.hasOwnProperty.call(history,t)?history:History.prototype}var ea,na,ra;function ia(){0!==ea.batchCount&&(he("Customer data measures",ea),sa())}function oa(t,e){t.sum+=e,t.min=Math.min(t.min,e),t.max=Math.max(t.max,e)}function aa(t,e){t.sum+=e.sum,t.min=Math.min(t.min,e.min),t.max=Math.max(t.max,e.max)}function sa(){ea={batchCount:0,batchBytesCount:{min:1/0,max:0,sum:0},batchMessagesCount:{min:1/0,max:0,sum:0},globalContextBytes:{min:1/0,max:0,sum:0},userContextBytes:{min:1/0,max:0,sum:0},featureFlagBytes:{min:1/0,max:0,sum:0}}}function ua(){ra=!1,na={globalContextBytes:{min:1/0,max:0,sum:0},userContextBytes:{min:1/0,max:0,sum:0},featureFlagBytes:{min:1/0,max:0,sum:0}}}function ca(t,e){void 0===e&&(e=500);var n,r=ar({expireDelay:144e5,maxEntries:4e3});o(la(),Zt());var i=rt(t,window,["pageshow","focus","blur","visibilitychange","resume","freeze","pagehide"],(function(t){o(function(t){if("freeze"===t.type)return"frozen";if("pagehide"===t.type)return t.persisted?"frozen":"terminated";return la()}(t),t.timeStamp)}),{capture:!0}).stop;function o(t,e){void 0===e&&(e=Zt()),t!==n&&(n=t,r.closeActive(e),r.add({state:n,startTime:e},e))}var a={findAll:function(t,n){var i=r.findAll(t,n);if(0!==i.length){for(var o=[],a=Math.max(0,i.length-e),s=i.length-1;s>=a;s--){var u=i[s],c=Yt(t,u.startTime);o.push({state:u.state,start:Jt(c)})}return o}},wasInPageStateAt:function(t,e){return a.wasInPageStateDuringPeriod(t,e,0)},wasInPageStateDuringPeriod:function(t,e,n){return r.findAll(e,n).some((function(e){return e.state===t}))},addPageState:o,stop:function(){i(),r.stop()}};return a}function la(){return"hidden"===document.visibilityState?"hidden":document.hasFocus()?"active":"passive"}function da(t,e){var n=window.cookieStore?function(t){return function(e,n){return nt(t,window.cookieStore,"change",(function(t){var r=S(t.changed,(function(t){return t.name===e}))||S(t.deleted,(function(t){return t.name===e}));r&&n(r.value)})).stop}}(t):fa;return new Y((function(t){return n(e,(function(e){return t.notify(e)}))}))}function fa(t,e){var n=Se(document.cookie,t),r=L((function(){var r=Se(document.cookie,t);r!==n&&e(r)}),1e3);return function(){D(r)}}var pa="datadog-ci-visibility-test-execution-id";function ha(t,e){var n=e.session,r=e.viewContext,i=e.errorType,o=n?n.id:"no-session-id",a=[];void 0!==i&&a.push("error-type=".concat(i)),r&&(a.push("seed=".concat(r.id)),a.push("from=".concat(r.startClocks.timeStamp)));var s=function(t){var e=t.site,n=t.subdomain||function(t){switch(t.site){case Dt:case Pt:return"app";case Nt:return"dd";default:return}}(t);return"https://".concat(n?"".concat(n,"."):"").concat(e)}(t),u="/rum/replay/sessions/".concat(o);return"".concat(s).concat(u,"?").concat(a.join("&"))}var va;function ma(t){return ga(t).segments_count}function ga(t){var e;return va||(va=new Map),va.has(t)?e=va.get(t):(e={records_count:0,segments_count:0,segments_total_raw_size:0},va.set(t,e),va.size>10&&function(){if(!va)return;if(va.keys){var t=va.keys().next().value;t&&va.delete(t)}else{var e=!0;va.forEach((function(t,n){e&&(va.delete(n),e=!1)}))}}()),e}var ya=new WeakMap;function ba(t){return ya.has(t)}function wa(t){return ya.get(t)}function _a(t,e){var n=t.tagName,r=t.value;if(oi(t,e)){var i=t.type;if("INPUT"===n&&("button"===i||"submit"===i||"reset"===i))return r;if(!r||"OPTION"===n)return;return Qr}return"OPTION"===n||"SELECT"===n?t.value:"INPUT"===n||"TEXTAREA"===n?r:void 0}var Sa=/url\((?:(')([^']*)'|(")([^"]*)"|([^)]*))\)/gm,ka=/^[A-Za-z]+:|^\/\//,xa=/^data:.*,/i;function Ea(t,e){return t.replace(Sa,(function(t,n,r,i,o,a){var s=r||o||a;if(!e||!s||ka.test(s)||xa.test(s))return t;var u=n||i||"";return"url(".concat(u).concat(function(t,e){try{return Ne(t,e).href}catch(n){return t}}(s,e)).concat(u,")")}))}var Ia=/[^a-z1-6-_]/;function Ca(t){var e=t.toLowerCase().trim();return Ia.test(e)?"div":e}function Oa(t,e){return"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='".concat(t,"' height='").concat(e,"' style='background-color:silver'%3E%3C/svg%3E")}var Ta=2,Aa=3,Ra=4,Ma=6,Na=7,La=8,Da=9,Pa=0,ja=1,Fa=2,Ua=3,Ba=4,za=11,Va=0,qa=1,Ga=2,Ha=3,Ja=4,Ka=5,Wa=6,Za=7,$a=8,Xa=1,Ya=2,Qa=3,ts=4,es=5,ns=6,rs=7,is=9,os=0,as=1;function ss(t){if(void 0!==t&&0!==t.length)return t.map((function(t){var e=t.cssRules||t.rules;return{cssRules:Array.from(e,(function(t){return t.cssText})),disabled:t.disabled||void 0,media:t.media.length>0?Array.from(t.media):void 0}}))}function us(t,e,n,r){if(e===$r.HIDDEN)return null;var i=t.getAttribute(n);if(e===$r.MASK&&n!==Xr&&!_i.includes(n)&&n!==r.actionNameAttribute){var o=t.tagName;switch(n){case"title":case"alt":case"placeholder":return Qr}if("IMG"===o&&("src"===n||"srcset"===n)){var a=t;if(a.naturalWidth>0)return Oa(a.naturalWidth,a.naturalHeight);var s=t.getBoundingClientRect(),u=s.width,c=s.height;return u>0||c>0?Oa(u,c):ti}if("SOURCE"===o&&("src"===n||"srcset"===n))return ti;if("A"===o&&"href"===n)return Qr;if(i&&E(n,"data-"))return Qr;if("IFRAME"===o&&"srcdoc"===n)return Qr}return i&&"string"===typeof i&&Er(i)?Ir(i):i}function cs(t){if(!t)return null;var e;try{e=t.rules||t.cssRules}catch(_s){}return e?Ea(Array.from(e,2===Je()?ls:ds).join(""),t.href):null}function ls(t){if(function(t){return"selectorText"in t}(t)&&t.selectorText.includes(":")){return t.cssText.replace(/(\[[\w-]+[^\\])(:[^\]]+\])/g,"$1\\$2")}return ds(t)}function ds(t){return function(t){return"styleSheet"in t}(t)&&cs(t.styleSheet)||t.cssText}function fs(t,e){var n=function(t,e){switch(t.nodeType){case t.DOCUMENT_NODE:return function(t,e){return{type:Pa,childNodes:hs(t,e),adoptedStyleSheets:ss(t.adoptedStyleSheets)}}(t,e);case t.DOCUMENT_FRAGMENT_NODE:return function(t,e){var n=Kr(t);n&&e.serializationContext.shadowRootsController.addShadowRoot(t);return{type:za,childNodes:hs(t,e),isShadowRoot:n,adoptedStyleSheets:n?ss(t.adoptedStyleSheets):void 0}}(t,e);case t.DOCUMENT_TYPE_NODE:return{type:ja,name:(n=t).name,publicId:n.publicId,systemId:n.systemId};case t.ELEMENT_NODE:return function(t,e){var n,r=Ca(t.tagName),i=(a=t,"svg"===a.tagName||a instanceof SVGElement||void 0),o=ri(ii(t),e.parentNodePrivacyLevel);var a;if(o===$r.HIDDEN){var s=t.getBoundingClientRect(),u=s.width,c=s.height;return{type:Fa,tagName:r,attributes:(n={rr_width:"".concat(u,"px"),rr_height:"".concat(c,"px")},n[Xr]=Yr,n),childNodes:[],isSVG:i}}if(o===$r.IGNORE)return;var l=function(t,e,n){var r;if(e===$r.HIDDEN)return{};for(var i={},o=Ca(t.tagName),a=t.ownerDocument,s=0;s<t.attributes.length;s+=1){var u=t.attributes.item(s).name,c=us(t,e,u,n.configuration);null!==c&&(i[u]=c)}if(t.value&&("textarea"===o||"select"===o||"option"===o||"input"===o)){var l=_a(t,e);void 0!==l&&(i.value=l)}if("option"===o&&e===$r.ALLOW){var d=t;d.selected&&(i.selected=d.selected)}if("link"===o){var f,p=Array.from(a.styleSheets).find((function(e){return e.href===t.href}));(f=cs(p))&&p&&(i._cssText=f)}"style"===o&&t.sheet&&(f=cs(t.sheet))&&(i._cssText=f);var h,v,m=t;if("input"!==o||"radio"!==m.type&&"checkbox"!==m.type||(e===$r.ALLOW?i.checked=!!m.checked:oi(m,e)&&delete i.checked),"audio"===o||"video"===o){var g=t;i.rr_mediaState=g.paused?"paused":"played"}var y=n.serializationContext;switch(y.status){case 0:h=Math.round(t.scrollTop),v=Math.round(t.scrollLeft),(h||v)&&y.elementsScrollPositions.set(t,{scrollTop:h,scrollLeft:v});break;case 1:y.elementsScrollPositions.has(t)&&(h=(r=y.elementsScrollPositions.get(t)).scrollTop,v=r.scrollLeft)}return v&&(i.rr_scrollLeft=v),h&&(i.rr_scrollTop=h),i}(t,o,e),d=[];if(function(t){return t.childNodes.length>0||Jr(t)}(t)&&"style"!==r){d=hs(t,e.parentNodePrivacyLevel===o&&e.ignoreWhiteSpace===("head"===r)?e:I({},e,{parentNodePrivacyLevel:o,ignoreWhiteSpace:"head"===r}))}return{type:Fa,tagName:r,attributes:l,childNodes:d,isSVG:i}}(t,e);case t.TEXT_NODE:return function(t,e){var n=si(t,e.ignoreWhiteSpace||!1,e.parentNodePrivacyLevel);if(void 0===n)return;return{type:Ua,textContent:n}}(t,e);case t.CDATA_SECTION_NODE:return{type:Ba,textContent:""}}var n}(t,e);if(!n)return null;var r=wa(t)||ps++,i=n;return i.id=r,function(t,e){ya.set(t,e)}(t,r),e.serializedNodeIds&&e.serializedNodeIds.add(r),i}var ps=1;function hs(t,e){var n=[];return Wr(t,(function(t){var r=fs(t,e);r&&n.push(r)})),n}function vs(t,e,n){return fs(t,{serializationContext:n,parentNodePrivacyLevel:e.defaultPrivacyLevel,configuration:e})}function ms(t){return Boolean(t.changedTouches)}function gs(t){return!0===t.composed&&Jr(t.target)?t.composedPath()[0]:t.target}var ys=function(t,e){var n=window.visualViewport,r={layoutViewportX:t,layoutViewportY:e,visualViewportX:t,visualViewportY:e};return n?(!function(t){return Math.abs(t.pageTop-t.offsetTop-window.scrollY)>25||Math.abs(t.pageLeft-t.offsetLeft-window.scrollX)>25}(n)?(r.visualViewportX=Math.round(t-n.offsetLeft),r.visualViewportY=Math.round(e-n.offsetTop)):(r.layoutViewportX=Math.round(t+n.offsetLeft),r.layoutViewportY=Math.round(e+n.offsetTop)),r):r},bs=function(t){return{scale:t.scale,offsetLeft:t.offsetLeft,offsetTop:t.offsetTop,pageLeft:t.pageLeft,pageTop:t.pageTop,height:t.height,width:t.width}};function ws(t,e){return{data:I({source:t},e),type:Aa,timestamp:Wt()}}var _s;function Ss(t,e){var n=P((function(t){var n=gs(t);if(ba(n)){var r=ks(t);if(!r)return;var i={id:wa(n),timeOffset:0,x:r.x,y:r.y};e(ws(ms(t)?Wa:qa,{positions:[i]}))}}),50,{trailing:!1}),r=n.throttled,i=n.cancel,o=rt(t,document,["mousemove","touchmove"],r,{capture:!0,passive:!0}).stop;return{stop:function(){o(),i()}}}function ks(t){var e=ms(t)?t.changedTouches[0]:t,n=e.clientX,r=e.clientY;if(window.visualViewport){var i=ys(n,r);n=i.visualViewportX,r=i.visualViewportY}if(Number.isFinite(n)&&Number.isFinite(r))return{x:n,y:r};t.isTrusted&&he("mouse/touch event without x/y")}var xs=((_s={}).pointerup=0,_s.mousedown=Xa,_s.click=Ya,_s.contextmenu=Qa,_s.dblclick=ts,_s.focus=es,_s.blur=ns,_s.touchstart=rs,_s.touchend=is,_s);function Es(t,e,n){return rt(t,document,Object.keys(xs),(function(r){var i=gs(r);if(ni(i,t.defaultPrivacyLevel)!==$r.HIDDEN&&ba(i)){var o,a=wa(i),s=xs[r.type];if(s!==ns&&s!==es){var u=ks(r);if(!u)return;o={id:a,type:s,x:u.x,y:u.y}}else o={id:a,type:s};var c=I({id:n.getIdForEvent(r)},ws(Ga,o));e(c)}}),{capture:!0,passive:!0})}function Is(t,e,n,r){void 0===r&&(r=document);var i=P((function(r){var i=gs(r);if(i&&ni(i,t.defaultPrivacyLevel)!==$r.HIDDEN&&ba(i)){var o=wa(i),a=i===document?{scrollTop:Io(),scrollLeft:Eo()}:{scrollTop:Math.round(i.scrollTop),scrollLeft:Math.round(i.scrollLeft)};n.set(i,a),e(ws(Ha,{id:o,x:a.scrollLeft,y:a.scrollTop}))}}),100),o=i.throttled,a=i.cancel,s=nt(t,r,"scroll",o,{capture:!0,passive:!0}).stop;return{stop:function(){s(),a()}}}function Cs(t,e){var n=Co(t).subscribe((function(t){e(ws(Ja,t))}));return{stop:function(){n.unsubscribe()}}}function Os(t,e){var n=window.visualViewport;if(!n)return{stop:j};var r=P((function(){e({data:bs(n),type:La,timestamp:Wt()})}),200,{trailing:!1}),i=r.throttled,o=r.cancel,a=rt(t,n,["resize","scroll"],i,{capture:!0,passive:!0}).stop;return{stop:function(){a(),o()}}}function Ts(t,e){return rt(t,document,["play","pause"],(function(n){var r=gs(n);r&&ni(r,t.defaultPrivacyLevel)!==$r.HIDDEN&&ba(r)&&e(ws(Za,{id:wa(r),type:"play"===n.type?os:as}))}),{capture:!0,passive:!0})}function As(t){function e(t,e){t&&ba(t.ownerNode)&&e(wa(t.ownerNode))}var n=[Ae(CSSStyleSheet.prototype,"insertRule",(function(n){var r=n.target,i=n.parameters,o=i[0],a=i[1];e(r,(function(e){return t(ws($a,{id:e,adds:[{rule:o,index:a}]}))}))})),Ae(CSSStyleSheet.prototype,"deleteRule",(function(n){var r=n.target,i=n.parameters[0];e(r,(function(e){return t(ws($a,{id:e,removes:[{index:i}]}))}))}))];function r(r){n.push(Ae(r.prototype,"insertRule",(function(n){var r=n.target,i=n.parameters,o=i[0],a=i[1];e(r.parentStyleSheet,(function(e){var n=Rs(r);n&&(n.push(a||0),t(ws($a,{id:e,adds:[{rule:o,index:n}]})))}))})),Ae(r.prototype,"deleteRule",(function(n){var r=n.target,i=n.parameters[0];e(r.parentStyleSheet,(function(e){var n=Rs(r);n&&(n.push(i),t(ws($a,{id:e,removes:[{index:n}]})))}))})))}return"undefined"!==typeof CSSGroupingRule?r(CSSGroupingRule):(r(CSSMediaRule),r(CSSSupportsRule)),{stop:function(){n.forEach((function(t){return t.stop()}))}}}function Rs(t){for(var e=[],n=t;n.parentRule;){var r=Array.from(n.parentRule.cssRules).indexOf(n);e.unshift(r),n=n.parentRule}if(n.parentStyleSheet){var i=Array.from(n.parentStyleSheet.cssRules).indexOf(n);return e.unshift(i),e}}function Ms(t,e){return rt(t,window,["focus","blur"],(function(){e({data:{has_focus:document.hasFocus()},type:Ma,timestamp:Wt()})}))}function Ns(t,e,n){var r=t.subscribe(11,(function(t){var r,i;"action"===t.rawRumEvent.type&&"click"===t.rawRumEvent.action.type&&(null===(i=null===(r=t.rawRumEvent.action.frustration)||void 0===r?void 0:r.type)||void 0===i?void 0:i.length)&&"events"in t.domainContext&&t.domainContext.events&&t.domainContext.events.length&&e({timestamp:t.rawRumEvent.date,type:Da,data:{frustrationTypes:t.rawRumEvent.action.frustration.type,recordIds:t.domainContext.events.map((function(t){return n.getIdForEvent(t)}))}})}));return{stop:function(){r.unsubscribe()}}}function Ls(t,e){var n=t.subscribe(4,(function(){e({timestamp:Wt(),type:Na})}));return{stop:function(){n.unsubscribe()}}}function Ds(t,e,n){void 0===n&&(n=document);var r,i=t.defaultPrivacyLevel,o=new WeakMap,a=n!==document,s=rt(t,n,a?["change"]:["input","change"],(function(t){var e=gs(t);(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement)&&c(e)}),{capture:!0,passive:!0}).stop;if(a)r=j;else{var u=[Re(HTMLInputElement.prototype,"value",c),Re(HTMLInputElement.prototype,"checked",c),Re(HTMLSelectElement.prototype,"value",c),Re(HTMLTextAreaElement.prototype,"value",c),Re(HTMLSelectElement.prototype,"selectedIndex",c)];r=function(){u.forEach((function(t){return t.stop()}))}}return{stop:function(){r(),s()}};function c(t){var e=ni(t,i);if(e!==$r.HIDDEN){var n,r=t.type;if("radio"===r||"checkbox"===r){if(oi(t,e))return;n={isChecked:t.checked}}else{var o=_a(t,e);if(void 0===o)return;n={text:o}}l(t,n);var a=t.name;"radio"===r&&a&&t.checked&&function(t,e){Array.prototype.forEach.call(t,e)}(document.querySelectorAll('input[type="radio"][name="'.concat(Br(a),'"]')),(function(e){e!==t&&l(e,{isChecked:!1})}))}}function l(t,n){if(ba(t)){var r=o.get(t);r&&r.text===n.text&&r.isChecked===n.isChecked||(o.set(t,n),e(ws(Ka,I({id:wa(t)},n))))}}}function Ps(t){var e=j,n=[];function r(){e(),t(n),n=[]}var i=P(r,16,{leading:!1}),o=i.throttled,a=i.cancel;return{addMutations:function(t){0===n.length&&(e=function(t,e){if(window.requestIdleCallback&&window.cancelIdleCallback){var n=window.requestIdleCallback(g(t),e);return function(){return window.cancelIdleCallback(n)}}var r=window.requestAnimationFrame(g(t));return function(){return window.cancelAnimationFrame(r)}}(o,{timeout:100})),n.push.apply(n,t)},flush:r,stop:function(){e(),a()}}}function js(t,e,n,r){var i=zn();if(!i)return{stop:j,flush:j};var o=Ps((function(r){!function(t,e,n,r){var i=new Map;t.filter((function(t){return"childList"===t.type})).forEach((function(t){t.removedNodes.forEach((function(t){Fs(t,r.removeShadowRoot)}))}));var o=t.filter((function(t){return t.target.isConnected&&function(t){for(var e=t;e;){if(!ba(e)&&!Kr(e))return!1;e=Zr(e)}return!0}(t.target)&&ni(t.target,n.defaultPrivacyLevel,i)!==$r.HIDDEN})),a=function(t,e,n,r){for(var i=new Set,o=new Map,a=function(t){t.addedNodes.forEach((function(t){i.add(t)})),t.removedNodes.forEach((function(e){i.has(e)||o.set(e,t.target),i.delete(e)}))},s=0,u=t;s<u.length;s++){a(u[s])}var c=Array.from(i);l=c,l.sort((function(t,e){var n=t.compareDocumentPosition(e);return n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_CONTAINS||n&Node.DOCUMENT_POSITION_FOLLOWING?1:n&Node.DOCUMENT_POSITION_PRECEDING?-1:0}));var l;for(var d=new Set,f=[],p=0,h=c;p<h.length;p++){var v=h[p];if(!w(v)){var m=ni(v.parentNode,e.defaultPrivacyLevel,r);if(m!==$r.HIDDEN&&m!==$r.IGNORE){var g=fs(v,{serializedNodeIds:d,parentNodePrivacyLevel:m,serializationContext:{status:2,shadowRootsController:n},configuration:e});if(g){var y=Zr(v);f.push({nextId:_(v),parentId:wa(y),node:g})}}}}var b=[];return o.forEach((function(t,e){ba(e)&&b.push({parentId:wa(t),id:wa(e)})})),{adds:f,removes:b,hasBeenSerialized:w};function w(t){return ba(t)&&d.has(wa(t))}function _(t){for(var e=t.nextSibling;e;){if(ba(e))return wa(e);e=e.nextSibling}return null}}(o.filter((function(t){return"childList"===t.type})),n,r,i),s=a.adds,u=a.removes,c=a.hasBeenSerialized,l=function(t,e,n){for(var r,i=[],o=new Set,a=t.filter((function(t){return!o.has(t.target)&&(o.add(t.target),!0)})),s=0,u=a;s<u.length;s++){var c=u[s];if(c.target.textContent!==c.oldValue){var l=ni(Zr(c.target),e.defaultPrivacyLevel,n);l!==$r.HIDDEN&&l!==$r.IGNORE&&i.push({id:wa(c.target),value:null!==(r=si(c.target,!1,l))&&void 0!==r?r:null})}}return i}(o.filter((function(t){return"characterData"===t.type&&!c(t.target)})),n,i),d=function(t,e,n){for(var r=[],i=new Map,o=t.filter((function(t){var e=i.get(t.target);return(!e||!e.has(t.attributeName))&&(e?e.add(t.attributeName):i.set(t.target,new Set([t.attributeName])),!0)})),a=new Map,s=0,u=o;s<u.length;s++){var c=u[s];if(c.target.getAttribute(c.attributeName)!==c.oldValue){var l=ni(c.target,e.defaultPrivacyLevel,n),d=us(c.target,l,c.attributeName,e),f=void 0;if("value"===c.attributeName){var p=_a(c.target,l);if(void 0===p)continue;f=p}else f="string"===typeof d?d:null;var h=a.get(c.target);h||(h={id:wa(c.target),attributes:{}},r.push(h),a.set(c.target,h)),h.attributes[c.attributeName]=f}}return r}(o.filter((function(t){return"attributes"===t.type&&!c(t.target)})),n,i);if(!l.length&&!d.length&&!u.length&&!s.length)return;e(ws(Va,{adds:s,removes:u,texts:l,attributes:d}))}(r.concat(a.takeRecords()),t,e,n)})),a=new i(g(o.addMutations));return a.observe(r,{attributeOldValue:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),{stop:function(){a.disconnect(),o.stop()},flush:function(){o.flush()}}}function Fs(t,e){Jr(t)&&e(t.shadowRoot),Wr(t,(function(t){return Fs(t,e)}))}function Us(t){var e=t.emit,n=t.configuration,r=t.lifeCycle;if(!e)throw new Error("emit function is required");var i=function(n){e(n),ne("record",{record:n});var r=t.viewHistory.findView();ga(r.id).records_count+=1},o=function(){var t=new WeakMap;return{set:function(e,n){(e!==document||document.scrollingElement)&&t.set(e===document?document.scrollingElement:e,n)},get:function(e){return t.get(e)},has:function(e){return t.has(e)}}}(),a=function(t,e,n){var r=new Map,i={addShadowRoot:function(o){if(!r.has(o)){var a=js(e,t,i,o),s=Ds(t,e,o),u=Is(t,e,n,o);r.set(o,{flush:function(){return a.flush()},stop:function(){a.stop(),s.stop(),u.stop()}})}},removeShadowRoot:function(t){var e=r.get(t);e&&(e.stop(),r.delete(t))},stop:function(){r.forEach((function(t){return(0,t.stop)()}))},flush:function(){r.forEach((function(t){return(0,t.flush)()}))}};return i}(n,i,o),s=function(t,e,n,r,i,o){var a=function(n,i){void 0===n&&(n=Wt()),void 0===i&&(i={status:0,elementsScrollPositions:t,shadowRootsController:e});var o=Oo(),a=o.width,s=[{data:{height:o.height,href:window.location.href,width:a},type:Ra,timestamp:n},{data:{has_focus:document.hasFocus()},type:Ma,timestamp:n},{data:{node:vs(document,r,i),initialOffset:{left:Eo(),top:Io()}},type:Ta,timestamp:n}];return window.visualViewport&&s.push({data:bs(window.visualViewport),type:La,timestamp:n}),s};return o(a()),{stop:n.subscribe(2,(function(n){i(),o(a(n.startClocks.timeStamp,{shadowRootsController:e,status:1,elementsScrollPositions:t}))})).unsubscribe}}(o,a,r,n,u,(function(t){return t.forEach((function(t){return i(t)}))})).stop;function u(){a.flush(),l.flush()}var c=function(){var t=new WeakMap,e=1;return{getIdForEvent:function(n){return t.has(n)||t.set(n,e++),t.get(n)}}}(),l=js(i,n,a,document),d=[l,Ss(n,i),Es(n,i,c),Is(n,i,o,document),Cs(n,i),Ds(n,i),Ts(n,i),As(i),Ms(n,i),Os(n,i),Ns(r,i,c),Ls(r,(function(t){u(),i(t)}))];return{stop:function(){a.stop(),d.forEach((function(t){return t.stop()})),s()},flushMutations:u,shadowRootsController:a}}function Bs(t){var e=t.context,n=t.creationReason,r=t.encoder,i=0,o=e.view.id,a=I({start:1/0,end:-1/0,creation_reason:n,records_count:0,has_full_snapshot:!1,index_in_view:ma(o),source:"browser"},e);return function(t){ga(t).segments_count+=1}(o),{addRecord:function(t,e){a.start=Math.min(a.start,t.timestamp),a.end=Math.max(a.end,t.timestamp),a.records_count+=1,a.has_full_snapshot||(a.has_full_snapshot=t.type===Ta);var n=r.isEmpty?'{"records":[':",";r.write(n+JSON.stringify(t),(function(t){e(i+=t)}))},flush:function(t){if(r.isEmpty)throw new Error("Empty segment flushed");r.write("],".concat(JSON.stringify(a).slice(1),"\n")),r.finish((function(e){!function(t,e){ga(t).segments_total_raw_size+=e}(a.view.id,e.rawBytesCount),t(a,e)}))}}}var zs=6e4;function Vs(t,e,n,r,i,o){return function(t,e,n,r){var i={status:0,nextSegmentCreationReason:"init"},o=t.subscribe(2,(function(){s("view_change")})).unsubscribe,a=t.subscribe(10,(function(t){s(t.reason)})).unsubscribe;function s(t){1===i.status&&(i.segment.flush((function(e,r){var i=function(t,e,n){var r=new FormData;r.append("segment",new Blob([t],{type:"application/octet-stream"}),"".concat(e.session.id,"-").concat(e.start));var i=I({raw_segment_size:n,compressed_segment_size:t.byteLength},e),o=JSON.stringify(i);return r.append("event",new Blob([o],{type:"application/json"})),{data:r,bytesCount:t.byteLength}}(r.output,e,r.rawBytesCount);Bn(t)?n.sendOnExit(i):n.send(i)})),N(i.expirationTimeoutId)),i="stop"!==t?{status:0,nextSegmentCreationReason:t}:{status:2}}return{addRecord:function(t){if(2!==i.status){if(0===i.status){var n=e();if(!n)return;i={status:1,segment:Bs({encoder:r,context:n,creationReason:i.nextSegmentCreationReason}),expirationTimeoutId:M((function(){s("segment_duration_limit")}),3e4)}}i.segment.addRecord(t,(function(t){t>zs&&s("segment_bytes_limit")}))}},stop:function(){s("stop"),o(),a()}}}(t,(function(){return function(t,e,n){var r=e.findTrackedSession(),i=n.findView();if(!r||!i)return;return{application:{id:t},session:{id:r.id},view:{id:i.id}}}(e.applicationId,n,r)}),i,o)}function qs(){return"function"===typeof Array.from&&"function"===typeof CSSSupportsRule&&"function"===typeof URL.createObjectURL&&"forEach"in NodeList.prototype}function Gs(t,e,n,r){var i=e.findTrackedSession(),o=function(t,e){if(!qs())return"browser-not-supported";if(!t)return"rum-not-tracked";if(0===t.sessionReplay)return"incorrect-session-plan";if(!e)return"replay-not-started"}(i,r);return ha(t,{viewContext:n.findView(),errorType:o,session:i})}function Hs(t,e,n){var r,i=0,o=[],a=0,s=[],u=nt(t,e,"message",(function(t){var e=t.data;if("wrote"===e.type&&e.streamId===n){i+=e.additionalBytesCount,o.push(e.result),r=e.trailer;var a=s.shift();a&&a.id===e.id?a.writeCallback?a.writeCallback(e.result.byteLength):a.finishCallback&&a.finishCallback():(u(),he("Worker responses received out of order."))}})).stop;function c(){var t=0===o.length?new Uint8Array(0):function(t){for(var e=t.reduce((function(t,e){return t+e.length}),0),n=new Uint8Array(e),r=0,i=0,o=t;i<o.length;i++){var a=o[i];n.set(a,r),r+=a.length}return n}(o.concat(r)),e={rawBytesCount:i,output:t,outputBytesCount:t.byteLength,encoding:"deflate"};return i=0,o=[],e}function l(){a>0&&(e.postMessage({action:"reset",streamId:n}),a=0)}return{isAsync:!0,get isEmpty(){return 0===a},write:function(t,r){e.postMessage({action:"write",id:a,data:t,streamId:n}),s.push({id:a,writeCallback:r,data:t}),a+=1},finish:function(t){l(),s.length?(s.forEach((function(t){delete t.writeCallback})),s[s.length-1].finishCallback=function(){return t(c())}):t(c())},finishSync:function(){l();var t=s.map((function(t){return delete t.writeCallback,delete t.finishCallback,t.data})).join("");return I(c(),{pendingData:t})},estimateEncodedBytesCount:function(t){return t.length/8},stop:function(){u()}}}function Js(t){return new Worker(t.workerUrl||URL.createObjectURL(new Blob(['!function(){"use strict";function t(t){for(var e=t.reduce((function(t,e){return t+e.length}),0),a=new Uint8Array(e),n=0,r=0,i=t;r<i.length;r++){var s=i[r];a.set(s,n),n+=s.length}return a}function e(t){for(var e=t.length;--e>=0;)t[e]=0}var a=256,n=286,r=30,i=15,s=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),_=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),h=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),l=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o=new Array(576);e(o);var d=new Array(60);e(d);var u=new Array(512);e(u);var f=new Array(256);e(f);var c=new Array(29);e(c);var p,g,w,v=new Array(r);function b(t,e,a,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}function m(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}e(v);var y=function(t){return t<256?u[t]:u[256+(t>>>7)]},k=function(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},z=function(t,e,a){t.bi_valid>16-a?(t.bi_buf|=e<<t.bi_valid&65535,k(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=a-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)},x=function(t,e,a){z(t,a[2*e],a[2*e+1])},A=function(t,e){var a=0;do{a|=1&t,t>>>=1,a<<=1}while(--e>0);return a>>>1},E=function(t,e,a){var n,r,s=new Array(16),_=0;for(n=1;n<=i;n++)s[n]=_=_+a[n-1]<<1;for(r=0;r<=e;r++){var h=t[2*r+1];0!==h&&(t[2*r]=A(s[h]++,h))}},Z=function(t){var e;for(e=0;e<n;e++)t.dyn_ltree[2*e]=0;for(e=0;e<r;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},U=function(t){t.bi_valid>8?k(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},S=function(t,e,a,n){var r=2*e,i=2*a;return t[r]<t[i]||t[r]===t[i]&&n[e]<=n[a]},R=function(t,e,a){for(var n=t.heap[a],r=a<<1;r<=t.heap_len&&(r<t.heap_len&&S(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!S(e,n,t.heap[r],t.depth));)t.heap[a]=t.heap[r],a=r,r<<=1;t.heap[a]=n},L=function(t,e,n){var r,i,h,l,o=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],i=t.pending_buf[t.l_buf+o],o++,0===r?x(t,i,e):(h=f[i],x(t,h+a+1,e),0!==(l=s[h])&&(i-=c[h],z(t,i,l)),r--,h=y(r),x(t,h,n),0!==(l=_[h])&&(r-=v[h],z(t,r,l)))}while(o<t.last_lit);x(t,256,e)},F=function(t,e){var a,n,r,s=e.dyn_tree,_=e.stat_desc.static_tree,h=e.stat_desc.has_stree,l=e.stat_desc.elems,o=-1;for(t.heap_len=0,t.heap_max=573,a=0;a<l;a++)0!==s[2*a]?(t.heap[++t.heap_len]=o=a,t.depth[a]=0):s[2*a+1]=0;for(;t.heap_len<2;)s[2*(r=t.heap[++t.heap_len]=o<2?++o:0)]=1,t.depth[r]=0,t.opt_len--,h&&(t.static_len-=_[2*r+1]);for(e.max_code=o,a=t.heap_len>>1;a>=1;a--)R(t,s,a);r=l;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],R(t,s,1),n=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=n,s[2*r]=s[2*a]+s[2*n],t.depth[r]=(t.depth[a]>=t.depth[n]?t.depth[a]:t.depth[n])+1,s[2*a+1]=s[2*n+1]=r,t.heap[1]=r++,R(t,s,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var a,n,r,s,_,h,l=e.dyn_tree,o=e.max_code,d=e.stat_desc.static_tree,u=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,c=e.stat_desc.extra_base,p=e.stat_desc.max_length,g=0;for(s=0;s<=i;s++)t.bl_count[s]=0;for(l[2*t.heap[t.heap_max]+1]=0,a=t.heap_max+1;a<573;a++)(s=l[2*l[2*(n=t.heap[a])+1]+1]+1)>p&&(s=p,g++),l[2*n+1]=s,n>o||(t.bl_count[s]++,_=0,n>=c&&(_=f[n-c]),h=l[2*n],t.opt_len+=h*(s+_),u&&(t.static_len+=h*(d[2*n+1]+_)));if(0!==g){do{for(s=p-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[p]--,g-=2}while(g>0);for(s=p;0!==s;s--)for(n=t.bl_count[s];0!==n;)(r=t.heap[--a])>o||(l[2*r+1]!==s&&(t.opt_len+=(s-l[2*r+1])*l[2*r],l[2*r+1]=s),n--)}}(t,e),E(s,o,t.bl_count)},T=function(t,e,a){var n,r,i=-1,s=e[1],_=0,h=7,l=4;for(0===s&&(h=138,l=3),e[2*(a+1)+1]=65535,n=0;n<=a;n++)r=s,s=e[2*(n+1)+1],++_<h&&r===s||(_<l?t.bl_tree[2*r]+=_:0!==r?(r!==i&&t.bl_tree[2*r]++,t.bl_tree[32]++):_<=10?t.bl_tree[34]++:t.bl_tree[36]++,_=0,i=r,0===s?(h=138,l=3):r===s?(h=6,l=3):(h=7,l=4))},I=function(t,e,a){var n,r,i=-1,s=e[1],_=0,h=7,l=4;for(0===s&&(h=138,l=3),n=0;n<=a;n++)if(r=s,s=e[2*(n+1)+1],!(++_<h&&r===s)){if(_<l)do{x(t,r,t.bl_tree)}while(0!=--_);else 0!==r?(r!==i&&(x(t,r,t.bl_tree),_--),x(t,16,t.bl_tree),z(t,_-3,2)):_<=10?(x(t,17,t.bl_tree),z(t,_-3,3)):(x(t,18,t.bl_tree),z(t,_-11,7));_=0,i=r,0===s?(h=138,l=3):r===s?(h=6,l=3):(h=7,l=4)}},N=!1,O=function(t,e,a,n){z(t,0+(n?1:0),3),function(t,e,a,n){U(t),n&&(k(t,a),k(t,~a)),t.pending_buf.set(t.window.subarray(e,e+a),t.pending),t.pending+=a}(t,e,a,!0)},D=function(t,e,n,r){var i,s,_=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<a;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),F(t,t.l_desc),F(t,t.d_desc),_=function(t){var e;for(T(t,t.dyn_ltree,t.l_desc.max_code),T(t,t.dyn_dtree,t.d_desc.max_code),F(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*l[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=i&&(i=s)):i=s=n+5,n+4<=i&&-1!==e?O(t,e,n,r):4===t.strategy||s===i?(z(t,2+(r?1:0),3),L(t,o,d)):(z(t,4+(r?1:0),3),function(t,e,a,n){var r;for(z(t,e-257,5),z(t,a-1,5),z(t,n-4,4),r=0;r<n;r++)z(t,t.bl_tree[2*l[r]+1],3);I(t,t.dyn_ltree,e-1),I(t,t.dyn_dtree,a-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,_+1),L(t,t.dyn_ltree,t.dyn_dtree)),Z(t),r&&U(t)},B={_tr_init:function(t){N||(!function(){var t,e,a,l,m,y=new Array(16);for(a=0,l=0;l<28;l++)for(c[l]=a,t=0;t<1<<s[l];t++)f[a++]=l;for(f[a-1]=l,m=0,l=0;l<16;l++)for(v[l]=m,t=0;t<1<<_[l];t++)u[m++]=l;for(m>>=7;l<r;l++)for(v[l]=m<<7,t=0;t<1<<_[l]-7;t++)u[256+m++]=l;for(e=0;e<=i;e++)y[e]=0;for(t=0;t<=143;)o[2*t+1]=8,t++,y[8]++;for(;t<=255;)o[2*t+1]=9,t++,y[9]++;for(;t<=279;)o[2*t+1]=7,t++,y[7]++;for(;t<=287;)o[2*t+1]=8,t++,y[8]++;for(E(o,287,y),t=0;t<r;t++)d[2*t+1]=5,d[2*t]=A(t,5);p=new b(o,s,257,n,i),g=new b(d,_,0,r,i),w=new b(new Array(0),h,0,19,7)}(),N=!0),t.l_desc=new m(t.dyn_ltree,p),t.d_desc=new m(t.dyn_dtree,g),t.bl_desc=new m(t.bl_tree,w),t.bi_buf=0,t.bi_valid=0,Z(t)},_tr_stored_block:O,_tr_flush_block:D,_tr_tally:function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(f[n]+a+1)]++,t.dyn_dtree[2*y(e)]++),t.last_lit===t.lit_bufsize-1},_tr_align:function(t){z(t,2,3),x(t,256,o),function(t){16===t.bi_valid?(k(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},C=function(t,e,a,n){for(var r=65535&t|0,i=t>>>16&65535|0,s=0;0!==a;){a-=s=a>2e3?2e3:a;do{i=i+(r=r+e[n++]|0)|0}while(--s);r%=65521,i%=65521}return r|i<<16|0},H=new Uint32Array(function(){for(var t,e=[],a=0;a<256;a++){t=a;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e}()),M=function(t,e,a,n){var r=H,i=n+a;t^=-1;for(var s=n;s<i;s++)t=t>>>8^r[255&(t^e[s])];return-1^t},Y={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},K={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},P=B._tr_init,j=B._tr_stored_block,G=B._tr_flush_block,X=B._tr_tally,W=B._tr_align,q=K.Z_NO_FLUSH,J=K.Z_PARTIAL_FLUSH,Q=K.Z_FULL_FLUSH,V=K.Z_FINISH,$=K.Z_BLOCK,tt=K.Z_OK,et=K.Z_STREAM_END,at=K.Z_STREAM_ERROR,nt=K.Z_DATA_ERROR,rt=K.Z_BUF_ERROR,it=K.Z_DEFAULT_COMPRESSION,st=K.Z_FILTERED,_t=K.Z_HUFFMAN_ONLY,ht=K.Z_RLE,lt=K.Z_FIXED,ot=K.Z_DEFAULT_STRATEGY,dt=K.Z_UNKNOWN,ut=K.Z_DEFLATED,ft=258,ct=262,pt=103,gt=113,wt=666,vt=function(t,e){return t.msg=Y[e],e},bt=function(t){return(t<<1)-(t>4?9:0)},mt=function(t){for(var e=t.length;--e>=0;)t[e]=0},yt=function(t,e,a){return(e<<t.hash_shift^a)&t.hash_mask},kt=function(t){var e=t.state,a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+a),t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))},zt=function(t,e){G(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,kt(t.strm)},xt=function(t,e){t.pending_buf[t.pending++]=e},At=function(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},Et=function(t,e){var a,n,r=t.max_chain_length,i=t.strstart,s=t.prev_length,_=t.nice_match,h=t.strstart>t.w_size-ct?t.strstart-(t.w_size-ct):0,l=t.window,o=t.w_mask,d=t.prev,u=t.strstart+ft,f=l[i+s-1],c=l[i+s];t.prev_length>=t.good_match&&(r>>=2),_>t.lookahead&&(_=t.lookahead);do{if(l[(a=e)+s]===c&&l[a+s-1]===f&&l[a]===l[i]&&l[++a]===l[i+1]){i+=2,a++;do{}while(l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&i<u);if(n=ft-(u-i),i=u-ft,n>s){if(t.match_start=e,s=n,n>=_)break;f=l[i+s-1],c=l[i+s]}}}while((e=d[e&o])>h&&0!=--r);return s<=t.lookahead?s:t.lookahead},Zt=function(t){var e,a,n,r,i,s,_,h,l,o,d=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=d+(d-ct)){t.window.set(t.window.subarray(d,d+d),0),t.match_start-=d,t.strstart-=d,t.block_start-=d,e=a=t.hash_size;do{n=t.head[--e],t.head[e]=n>=d?n-d:0}while(--a);e=a=d;do{n=t.prev[--e],t.prev[e]=n>=d?n-d:0}while(--a);r+=d}if(0===t.strm.avail_in)break;if(s=t.strm,_=t.window,h=t.strstart+t.lookahead,l=r,o=void 0,(o=s.avail_in)>l&&(o=l),a=0===o?0:(s.avail_in-=o,_.set(s.input.subarray(s.next_in,s.next_in+o),h),1===s.state.wrap?s.adler=C(s.adler,_,o,h):2===s.state.wrap&&(s.adler=M(s.adler,_,o,h)),s.next_in+=o,s.total_in+=o,o),t.lookahead+=a,t.lookahead+t.insert>=3)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=yt(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=yt(t,t.ins_h,t.window[i+3-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<ct&&0!==t.strm.avail_in)},Ut=function(t,e){for(var a,n;;){if(t.lookahead<ct){if(Zt(t),t.lookahead<ct&&e===q)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-ct&&(t.match_length=Et(t,a)),t.match_length>=3)if(n=X(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=yt(t,t.ins_h,t.window[t.strstart+1]);else n=X(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2},St=function(t,e){for(var a,n,r;;){if(t.lookahead<ct){if(Zt(t),t.lookahead<ct&&e===q)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-ct&&(t.match_length=Et(t,a),t.match_length<=5&&(t.strategy===st||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,n=X(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(zt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=X(t,0,t.window[t.strstart-1]))&&zt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=X(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2};function Rt(t,e,a,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=n,this.func=r}var Lt=[new Rt(0,0,0,0,(function(t,e){var a=65535;for(a>t.pending_buf_size-5&&(a=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Zt(t),0===t.lookahead&&e===q)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+a;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,zt(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-ct&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(zt(t,!1),t.strm.avail_out),1)})),new Rt(4,4,8,4,Ut),new Rt(4,5,16,8,Ut),new Rt(4,6,32,32,Ut),new Rt(4,4,16,16,St),new Rt(8,16,32,32,St),new Rt(8,16,128,128,St),new Rt(8,32,128,256,St),new Rt(32,128,258,1024,St),new Rt(32,258,258,4096,St)];function Ft(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ut,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),mt(this.dyn_ltree),mt(this.dyn_dtree),mt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),mt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),mt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Tt=function(t){if(!t||!t.state)return vt(t,at);t.total_in=t.total_out=0,t.data_type=dt;var e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:gt,t.adler=2===e.wrap?0:1,e.last_flush=q,P(e),tt},It=function(t){var e,a=Tt(t);return a===tt&&((e=t.state).window_size=2*e.w_size,mt(e.head),e.max_lazy_match=Lt[e.level].max_lazy,e.good_match=Lt[e.level].good_length,e.nice_match=Lt[e.level].nice_length,e.max_chain_length=Lt[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),a},Nt=function(t,e,a,n,r,i){if(!t)return at;var s=1;if(e===it&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),r<1||r>9||a!==ut||n<8||n>15||e<0||e>9||i<0||i>lt)return vt(t,at);8===n&&(n=9);var _=new Ft;return t.state=_,_.strm=t,_.wrap=s,_.gzhead=null,_.w_bits=n,_.w_size=1<<_.w_bits,_.w_mask=_.w_size-1,_.hash_bits=r+7,_.hash_size=1<<_.hash_bits,_.hash_mask=_.hash_size-1,_.hash_shift=~~((_.hash_bits+3-1)/3),_.window=new Uint8Array(2*_.w_size),_.head=new Uint16Array(_.hash_size),_.prev=new Uint16Array(_.w_size),_.lit_bufsize=1<<r+6,_.pending_buf_size=4*_.lit_bufsize,_.pending_buf=new Uint8Array(_.pending_buf_size),_.d_buf=1*_.lit_bufsize,_.l_buf=3*_.lit_bufsize,_.level=e,_.strategy=i,_.method=a,It(t)},Ot={deflateInit:function(t,e){return Nt(t,e,ut,15,8,ot)},deflateInit2:Nt,deflateReset:It,deflateResetKeep:Tt,deflateSetHeader:function(t,e){return t&&t.state?2!==t.state.wrap?at:(t.state.gzhead=e,tt):at},deflate:function(t,e){var a,n;if(!t||!t.state||e>$||e<0)return t?vt(t,at):at;var r=t.state;if(!t.output||!t.input&&0!==t.avail_in||r.status===wt&&e!==V)return vt(t,0===t.avail_out?rt:at);r.strm=t;var i=r.last_flush;if(r.last_flush=e,42===r.status)if(2===r.wrap)t.adler=0,xt(r,31),xt(r,139),xt(r,8),r.gzhead?(xt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),xt(r,255&r.gzhead.time),xt(r,r.gzhead.time>>8&255),xt(r,r.gzhead.time>>16&255),xt(r,r.gzhead.time>>24&255),xt(r,9===r.level?2:r.strategy>=_t||r.level<2?4:0),xt(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(xt(r,255&r.gzhead.extra.length),xt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=M(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(xt(r,0),xt(r,0),xt(r,0),xt(r,0),xt(r,0),xt(r,9===r.level?2:r.strategy>=_t||r.level<2?4:0),xt(r,3),r.status=gt);else{var s=ut+(r.w_bits-8<<4)<<8;s|=(r.strategy>=_t||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(s|=32),s+=31-s%31,r.status=gt,At(r,s),0!==r.strstart&&(At(r,t.adler>>>16),At(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(a=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),kt(t),a=r.pending,r.pending!==r.pending_buf_size));)xt(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),kt(t),a=r.pending,r.pending===r.pending_buf_size)){n=1;break}n=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,xt(r,n)}while(0!==n);r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),0===n&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),kt(t),a=r.pending,r.pending===r.pending_buf_size)){n=1;break}n=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,xt(r,n)}while(0!==n);r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),0===n&&(r.status=pt)}else r.status=pt;if(r.status===pt&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&kt(t),r.pending+2<=r.pending_buf_size&&(xt(r,255&t.adler),xt(r,t.adler>>8&255),t.adler=0,r.status=gt)):r.status=gt),0!==r.pending){if(kt(t),0===t.avail_out)return r.last_flush=-1,tt}else if(0===t.avail_in&&bt(e)<=bt(i)&&e!==V)return vt(t,rt);if(r.status===wt&&0!==t.avail_in)return vt(t,rt);if(0!==t.avail_in||0!==r.lookahead||e!==q&&r.status!==wt){var _=r.strategy===_t?function(t,e){for(var a;;){if(0===t.lookahead&&(Zt(t),0===t.lookahead)){if(e===q)return 1;break}if(t.match_length=0,a=X(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2}(r,e):r.strategy===ht?function(t,e){for(var a,n,r,i,s=t.window;;){if(t.lookahead<=ft){if(Zt(t),t.lookahead<=ft&&e===q)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=s[r=t.strstart-1])===s[++r]&&n===s[++r]&&n===s[++r]){i=t.strstart+ft;do{}while(n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&r<i);t.match_length=ft-(i-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(a=X(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=X(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2}(r,e):Lt[r.level].func(r,e);if(3!==_&&4!==_||(r.status=wt),1===_||3===_)return 0===t.avail_out&&(r.last_flush=-1),tt;if(2===_&&(e===J?W(r):e!==$&&(j(r,0,0,!1),e===Q&&(mt(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),kt(t),0===t.avail_out))return r.last_flush=-1,tt}return e!==V?tt:r.wrap<=0?et:(2===r.wrap?(xt(r,255&t.adler),xt(r,t.adler>>8&255),xt(r,t.adler>>16&255),xt(r,t.adler>>24&255),xt(r,255&t.total_in),xt(r,t.total_in>>8&255),xt(r,t.total_in>>16&255),xt(r,t.total_in>>24&255)):(At(r,t.adler>>>16),At(r,65535&t.adler)),kt(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?tt:et)},deflateEnd:function(t){if(!t||!t.state)return at;var e=t.state.status;return 42!==e&&69!==e&&73!==e&&91!==e&&e!==pt&&e!==gt&&e!==wt?vt(t,at):(t.state=null,e===gt?vt(t,nt):tt)},deflateSetDictionary:function(t,e){var a=e.length;if(!t||!t.state)return at;var n=t.state,r=n.wrap;if(2===r||1===r&&42!==n.status||n.lookahead)return at;if(1===r&&(t.adler=C(t.adler,e,a,0)),n.wrap=0,a>=n.w_size){0===r&&(mt(n.head),n.strstart=0,n.block_start=0,n.insert=0);var i=new Uint8Array(n.w_size);i.set(e.subarray(a-n.w_size,a),0),e=i,a=n.w_size}var s=t.avail_in,_=t.next_in,h=t.input;for(t.avail_in=a,t.next_in=0,t.input=e,Zt(n);n.lookahead>=3;){var l=n.strstart,o=n.lookahead-2;do{n.ins_h=yt(n,n.ins_h,n.window[l+3-1]),n.prev[l&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=l,l++}while(--o);n.strstart=l,n.lookahead=2,Zt(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=_,t.input=h,t.avail_in=s,n.wrap=r,tt},deflateInfo:"pako deflate (from Nodeca project)"};for(var Dt=new Uint8Array(256),Bt=0;Bt<256;Bt++)Dt[Bt]=Bt>=252?6:Bt>=248?5:Bt>=240?4:Bt>=224?3:Bt>=192?2:1;Dt[254]=Dt[254]=1;var Ct=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Ht=Object.prototype.toString,Mt=K.Z_NO_FLUSH,Yt=K.Z_SYNC_FLUSH,Kt=K.Z_FULL_FLUSH,Pt=K.Z_FINISH,jt=K.Z_OK,Gt=K.Z_STREAM_END,Xt=K.Z_DEFAULT_COMPRESSION,Wt=K.Z_DEFAULT_STRATEGY,qt=K.Z_DEFLATED;function Jt(){this.options={level:Xt,method:qt,chunkSize:16384,windowBits:15,memLevel:8,strategy:Wt};var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ct,this.strm.avail_out=0;var e=Ot.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(e!==jt)throw new Error(Y[e]);if(t.header&&Ot.deflateSetHeader(this.strm,t.header),t.dictionary){var a;if(a="[object ArrayBuffer]"===Ht.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(e=Ot.deflateSetDictionary(this.strm,a))!==jt)throw new Error(Y[e]);this._dict_set=!0}}function Qt(t,e,a){try{t.postMessage({type:"errored",error:e,streamId:a})}catch(n){t.postMessage({type:"errored",error:String(e),streamId:a})}}function Vt(t){var e=t.strm.adler;return new Uint8Array([3,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e])}Jt.prototype.push=function(t,e){var a,n,r=this.strm,i=this.options.chunkSize;if(this.ended)return!1;for(n=e===~~e?e:!0===e?Pt:Mt,"[object ArrayBuffer]"===Ht.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),(n===Yt||n===Kt)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if((a=Ot.deflate(r,n))===Gt)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),a=Ot.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===jt;if(0!==r.avail_out){if(n>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},Jt.prototype.onData=function(t){this.chunks.push(t)},Jt.prototype.onEnd=function(t){t===jt&&(this.result=function(t){for(var e=0,a=0,n=t.length;a<n;a++)e+=t[a].length;for(var r=new Uint8Array(e),i=0,s=0,_=t.length;i<_;i++){var h=t[i];r.set(h,s),s+=h.length}return r}(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},function(e){void 0===e&&(e=self);try{var a=new Map;e.addEventListener("message",(function(n){try{var r=function(e,a){switch(a.action){case"init":return{type:"initialized",version:"5.28.0"};case"write":var n=e.get(a.streamId);n||(n=new Jt,e.set(a.streamId,n));var r=n.chunks.length,i=function(t){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);var e,a,n,r,i,s=t.length,_=0;for(r=0;r<s;r++)55296==(64512&(a=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(n=t.charCodeAt(r+1)))&&(a=65536+(a-55296<<10)+(n-56320),r++),_+=a<128?1:a<2048?2:a<65536?3:4;for(e=new Uint8Array(_),i=0,r=0;i<_;r++)55296==(64512&(a=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(n=t.charCodeAt(r+1)))&&(a=65536+(a-55296<<10)+(n-56320),r++),a<128?e[i++]=a:a<2048?(e[i++]=192|a>>>6,e[i++]=128|63&a):a<65536?(e[i++]=224|a>>>12,e[i++]=128|a>>>6&63,e[i++]=128|63&a):(e[i++]=240|a>>>18,e[i++]=128|a>>>12&63,e[i++]=128|a>>>6&63,e[i++]=128|63&a);return e}(a.data);return n.push(i,K.Z_SYNC_FLUSH),{type:"wrote",id:a.id,streamId:a.streamId,result:t(n.chunks.slice(r)),trailer:Vt(n),additionalBytesCount:i.length};case"reset":e.delete(a.streamId)}}(a,n.data);r&&e.postMessage(r)}catch(t){Qt(e,t,n.data&&"streamId"in n.data?n.data.streamId:void 0)}}))}catch(t){Qt(e,t)}}()}();'])))}var Ks={status:0};function Ws(t,e,n,r){switch(void 0===r&&(r=Js),0===Ks.status&&function(t,e,n){void 0===n&&(n=Js);try{var r=n(t),i=nt(t,r,"error",(function(n){$s(t,e,n)})).stop,o=nt(t,r,"message",(function(n){var r,i=n.data;"errored"===i.type?$s(t,e,i.error,i.streamId):"initialized"===i.type&&(r=i.version,1===Ks.status&&(Ks={status:3,worker:Ks.worker,stop:Ks.stop,version:r}))})).stop;r.postMessage({action:"init"}),M((function(){return function(t){1===Ks.status&&(u.error("".concat(t," failed to start: a timeout occurred while initializing the Worker")),Ks.initializationFailureCallbacks.forEach((function(t){return t()})),Ks={status:2})}(e)}),3e4),Ks={status:1,worker:r,stop:function(){i(),o()},initializationFailureCallbacks:[]}}catch(a){$s(t,e,a)}}(t,e,r),Ks.status){case 1:return Ks.initializationFailureCallbacks.push(n),Ks.worker;case 3:return Ks.worker}}function Zs(){return Ks.status}function $s(t,e,n,r){if(1===Ks.status||0===Ks.status){if(u.error("".concat(e," failed to start: an error occurred while creating the Worker:"),n),n instanceof Event||n instanceof Error&&(w(o=n.message,"Content Security Policy")||w(o,"requires 'TrustedScriptURL'"))){var i=void 0;i=t.workerUrl?"Please make sure the Worker URL ".concat(t.workerUrl," is correct and CSP is correctly configured."):"Please make sure CSP is correctly configured.",u.error("".concat(i," See documentation at ").concat(c,"/integrations/content_security_policy_logs/#use-csp-with-real-user-monitoring-and-session-replay"))}else ve(n);1===Ks.status&&Ks.initializationFailureCallbacks.forEach((function(t){return t()})),Ks={status:2}}else ve(n,{worker_version:3===Ks.status&&Ks.version,stream_id:r});var o}var Xs=function(t,e){if(Te()&&!Oe("records")||!qs())return{start:j,stop:j,getReplayStats:function(){},onRumStart:j,isRecording:function(){return!1},getSessionReplayLink:function(){}};var n={status:1},r=function(){n={status:1}},i=function(){n={status:0}},o=j;return{start:function(t){return r(t)},stop:function(){return i()},getSessionReplayLink:function(){return o()},onRumStart:function(a,s,u,c,l){var d;s.startSessionReplayRecordingManually&&(n={status:0}),a.subscribe(8,(function(){2!==n.status&&3!==n.status||(i(),n={status:1})})),a.subscribe(10,(function(t){t.reason===Un.UNLOADING&&i()})),a.subscribe(9,(function(){1===n.status&&r()})),r=function(r){var o=u.findTrackedSession();o&&(0!==o.sessionReplay||r&&r.force)?2!==n.status&&3!==n.status&&(n={status:2},eo(s,"interactive",(function(){if(2===n.status){var r=(d||(l||(l=Ws(s,"Datadog Session Replay",(function(){i()}),e)),l&&(d=Hs(s,l,1))),d);if(r){var o=t(a,s,u,c,r).stop;n={status:3,stopRecording:o}}else n={status:0}}})),r&&r.force&&0===o.sessionReplay&&u.setForcedReplay()):n={status:1}},i=function(){0!==n.status&&(3===n.status&&n.stopRecording(),n={status:0})},o=function(){return Gs(s,u,c,0!==n.status)},1===n.status&&r()},isRecording:function(){return 3===Zs()&&3===n.status},getReplayStats:function(t){return 3===Zs()?function(t){return null===va||void 0===va?void 0:va.get(t)}(t):void 0}}}((function(t,e,n,r,i,o){var a,s=[],u=o||Wo(e,e.sessionReplayEndpointBuilder,zs,(function(e){t.notify(13,{error:e}),he("Error reported to customer",{"error.message":e.message})}));if(Te())a=function(t){var e=Ce();return{addRecord:function(n){var r=t.findView();e.send("record",n,r.id)}}}(r).addRecord;else{var c=Vs(t,e,n,r,u,i);a=c.addRecord,s.push(c.stop)}var l=Us({emit:a,configuration:e,lifeCycle:t,viewHistory:r}).stop;return s.push(l),{stop:function(){s.forEach((function(t){return t()}))}}})),Ys=function(t,e,n){void 0===n&&(n={});var r=q(0),i=tt(r.getOrCreateTracker(2)),o=tt(r.getOrCreateTracker(1)),a=function(t){var e=new Y;return{tryToInit:function(e){t||(t=e)},update:function(n){t=n,e.notify()},isGranted:function(){return t===et.GRANTED},observable:e}}(),s={vitalsByName:new Map,vitalsByReference:new WeakMap};function c(){return function(t,e,n){return{context:t.getContext(),user:e.getContext(),hasReplay:!!n.isRecording()||void 0}}(i,o,e)}var l=Fn(n,c,a,s,(function(u,d,f){u.storeContextsAcrossPages&&(at(u,i,"rum",2),at(u,o,"rum",1)),r.setCompressionStatus(d?1:2);var p=t(u,e,r,c,f,d&&n.createDeflateEncoder?function(t){return n.createDeflateEncoder(u,d,t)}:st,a,s);return e.onRumStart(p.lifeCycle,u,p.session,p.viewHistory,d),l=function(t,e){return I({init:function(t){be("DD_RUM",t)},initConfiguration:t.initConfiguration},e)}(l,p),p})),d=g((function(t){var e="object"===typeof t?t:{name:t};e.context&&r.getOrCreateTracker(3).updateCustomerData(e.context),l.startView(e),me({feature:"start-view"})})),f=function(t){var e=I({version:"5.28.0",onReady:function(t){t()}},t);return Object.defineProperty(e,"_setDebug",{get:function(){return m},enumerable:!1}),e}({init:g((function(t){l.init(t,f),Rt(xt.UPDATE_VIEW_NAME)&&(f.updateViewName=g((function(t){l.updateViewName(t)})))})),setTrackingConsent:g((function(t){a.update(t),me({feature:"set-tracking-consent",tracking_consent:t})})),setViewContext:g((function(t){l.setViewContext(t)})),setViewContextProperty:g((function(t,e){l.setViewContextProperty(t,e)})),setGlobalContext:g((function(t){i.setContext(t),me({feature:"set-global-context"})})),getGlobalContext:g((function(){return i.getContext()})),setGlobalContextProperty:g((function(t,e){i.setContextProperty(t,e),me({feature:"set-global-context"})})),removeGlobalContextProperty:g((function(t){return i.removeContextProperty(t)})),clearGlobalContext:g((function(){return i.clearContext()})),getInternalContext:g((function(t){return l.getInternalContext(t)})),getInitConfiguration:g((function(){return K(l.initConfiguration)})),addAction:function(t,e){var n=_t();y((function(){l.addAction({name:Z(t),context:Z(e),startClocks:$t(),type:"custom",handlingStack:n}),me({feature:"add-action"})}))},addError:function(t,e){var n=_t();y((function(){l.addError({error:t,handlingStack:n,context:Z(e),startClocks:$t()}),me({feature:"add-error"})}))},addTiming:g((function(t,e){l.addTiming(Z(t),e)})),setUser:g((function(t){(function(t){var e="object"===H(t);return e||u.error("Unsupported user:",t),e})(t)&&o.setContext(ye(t)),me({feature:"set-user"})})),getUser:g((function(){return o.getContext()})),setUserProperty:g((function(t,e){var n,r=ye((n={},n[t]=e,n))[t];o.setContextProperty(t,r),me({feature:"set-user"})})),removeUserProperty:g((function(t){return o.removeContextProperty(t)})),clearUser:g((function(){return o.clearContext()})),startView:d,stopSession:g((function(){l.stopSession(),me({feature:"stop-session"})})),addFeatureFlagEvaluation:g((function(t,e){l.addFeatureFlagEvaluation(Z(t),Z(e)),me({feature:"add-feature-flag-evaluation"})})),getSessionReplayLink:g((function(){return e.getSessionReplayLink()})),startSessionReplayRecording:g((function(t){e.start(t),me({feature:"start-session-replay-recording",force:t&&t.force})})),stopSessionReplayRecording:g((function(){return e.stop()})),addDurationVital:g((function(t,e){var n;me({feature:"add-duration-vital"}),l.addDurationVital({name:Z(t),type:"duration",startClocks:(n=e.startTime,{relative:te(n),timeStamp:n}),duration:e.duration,context:Z(e&&e.context),description:Z(e&&e.description)})})),startDurationVital:g((function(t,e){return me({feature:"start-duration-vital"}),l.startDurationVital(Z(t),{context:Z(e&&e.context),description:Z(e&&e.description)})})),stopDurationVital:g((function(t,e){me({feature:"stop-duration-vital"}),l.stopDurationVital("string"===typeof t?Z(t):t,{context:Z(e&&e.context),description:Z(e&&e.description)})}))});return f}((function(t,e,n,r,i,o,a,s){var u=[],c=new ir;c.subscribe(12,(function(t){return ne("rum",t)}));var l=function(t){var e=pe("browser-rum-sdk",t);if(Te()){var n=Ce();e.observable.subscribe((function(t){return n.send("internal_telemetry",t)}))}return e}(t);l.setContextProvider((function(){var e,n;return{application:{id:t.applicationId},session:{id:null===(e=v.findTrackedSession())||void 0===e?void 0:e.id},view:{id:null===(n=k.findView())||void 0===n?void 0:n.id},action:{id:E.findActionId()}}}));var d=function(t){c.notify(13,{error:t}),he("Error reported to customer",{"error.message":t.message})},f=function(t,e){var n=ar({expireDelay:144e5});return t.subscribe(1,(function(t){var r=t.startClocks;n.add({},r.relative),e.resetCustomerData()})),t.subscribe(5,(function(t){var e=t.endClocks;n.closeActive(e.relative)})),{findFeatureFlagEvaluations:function(t){return n.find(t)},addFeatureFlagEvaluation:function(t,r){var i=n.find();i&&(i[t]=r,e.updateCustomerData(i))},stop:function(){return e.stop()}}}(c,n.getOrCreateTracker(0)),p=function(t){return new Y((function(e){var n=rt(t,window,["visibilitychange","freeze"],(function(t){"visibilitychange"===t.type&&"hidden"===document.visibilityState?e.notify({reason:Un.HIDDEN}):"freeze"===t.type&&e.notify({reason:Un.FROZEN})}),{capture:!0}).stop,r=nt(t,window,"beforeunload",(function(){e.notify({reason:Un.UNLOADING})})).stop;return function(){n(),r()}}))}(t),h=p.subscribe((function(t){c.notify(10,t)}));u.push((function(){return h.unsubscribe()}));var v=Te()?function(){var t={id:"00000000-aaaa-0000-aaaa-000000000000",sessionReplay:Oe("records")?1:0};return{findTrackedSession:function(){return t},expire:j,expireObservable:new Y,setForcedReplay:j}}():Fo(t,c,a);if(Te())!function(t){var e=Ce();t.subscribe(12,(function(t){e.send("rum",t)}))}(c);else{var m=Yo(t,c,l.observable,d,p,v.expireObservable,o);u.push((function(){return m.stop()})),function(t,e,n,r,i){e.enabled&&Ft(t.customerDataTelemetrySampleRate)&&(sa(),ua(),n.subscribe(12,(function(t){ra=!0,oa(na.globalContextBytes,r.getOrCreateTracker(2).getBytesCount()),oa(na.userContextBytes,r.getOrCreateTracker(1).getBytesCount()),oa(na.featureFlagBytes,w(["view","error"],t.type)?r.getOrCreateTracker(0).getBytesCount():0)})),i.subscribe((function(t){var e=t.bytesCount,n=t.messagesCount;ra&&(ea.batchCount+=1,oa(ea.batchBytesCount,e),oa(ea.batchMessagesCount,n),aa(ea.globalContextBytes,na.globalContextBytes),aa(ea.userContextBytes,na.userContextBytes),aa(ea.featureFlagBytes,na.featureFlagBytes),ua())})),L(ia,1e4))}(t,l,c,n,m.flushObservable)}var y=function(){var t=zn();return new Y((function(e){if(t){var n=new t(g((function(){return e.notify()})));return n.observe(document,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),function(){return n.disconnect()}}}))}(),b=Qo(t,location),_=ca(t),S=function(t,e,n,r,i,o,a,s,u){var c=function(t){var e=ar({expireDelay:144e5});return t.subscribe(1,(function(t){e.add(function(t){return{service:t.service,version:t.version,context:t.context,id:t.id,name:t.name,startClocks:t.startClocks}}(t),t.startClocks.relative)})),t.subscribe(5,(function(t){var n=t.endClocks;e.closeActive(n.relative)})),t.subscribe(3,(function(t){var n=e.find(t.startClocks.relative);n&&t.name&&(n.name=t.name),n&&t.context&&(n.context=t.context)})),t.subscribe(9,(function(){e.reset()})),{findView:function(t){return e.find(t)},stop:function(){e.stop()}}}(t),l=function(t,e,n){var r,i=ar({expireDelay:144e5});t.subscribe(1,(function(t){var e=t.startClocks,o=n.href;i.add(a({url:o,referrer:r||document.referrer}),e.relative),r=o})),t.subscribe(5,(function(t){var e=t.endClocks;i.closeActive(e.relative)}));var o=e.subscribe((function(t){var e=t.newLocation,n=i.find();if(n){var r=Zt();i.closeActive(r),i.add(a({url:e.href,referrer:n.referrer}),r)}}));function a(t){return{url:t.url,referrer:t.referrer}}return{findUrl:function(t){return i.find(t)},stop:function(){o.unsubscribe(),i.stop()}}}(t,o,n),d=function(t,e,n,r){t.subscribe(0,(function(e){return t.notify(11,Bi(e,r))}));var i={findActionId:j};return n.trackUserInteractions&&(i=Fi(t,e,n).actionContexts),{addAction:function(e,n){t.notify(11,I({savedCommonContext:n},Bi(e,r)))},actionContexts:i}}(t,a,e,i),f=d.addAction,p=d.actionContexts,h=function(t){var e=Oo();return{get:function(){return{viewport:e}},stop:Co(t).subscribe((function(t){e=t})).unsubscribe}}(e),v=function(t,e){var n;void 0===e&&(e=da(t,pa));var r=Ve(pa)||(null===(n=window.Cypress)||void 0===n?void 0:n.env("traceId")),i=e.subscribe((function(t){r=t}));return{get:function(){if("string"===typeof r)return{test_execution_id:r}},stop:function(){return i.unsubscribe()}}}(e);return rr(e,t,r,c,l,p,h,v,s,u),{viewHistory:c,pageStateHistory:i,urlContexts:l,addAction:f,actionContexts:p,stop:function(){v.stop(),h.stop(),l.stop(),c.stop(),i.stop()}}}(c,t,location,v,_,b,y,r,d),k=S.viewHistory,x=S.urlContexts,E=S.actionContexts,C=S.addAction,O=S.stop;u.push(O),de.drain();var T=Do(c,t,location,y,b,f,_,e,i),A=T.addTiming,R=T.startView,M=T.updateViewName,N=T.setViewContext,D=T.setViewContextProperty,P=T.stop;u.push(P);var F=so(c,t,_).stop;if(u.push(F),Rt(xt.LONG_ANIMATION_FRAME)){if(t.trackLongTasks){var U=function(t,e){var n=Dr(e,{type:Cr.LONG_ANIMATION_FRAME,buffered:!0}).subscribe((function(e){for(var n=0,r=e;n<r.length;n++){var i=r[n],o=Gt(i.startTime),a={date:o.timeStamp,long_task:{id:we(),entry_type:"long-animation-frame",duration:Jt(i.duration),blocking_duration:Jt(i.blockingDuration),first_ui_event_timestamp:Jt(i.firstUIEventTimestamp),render_start:Jt(i.renderStart),style_and_layout_start:Jt(i.styleAndLayoutStart),scripts:i.scripts.map((function(t){return{duration:Jt(t.duration),pause_duration:Jt(t.pauseDuration),forced_style_and_layout_duration:Jt(t.forcedStyleAndLayoutDuration),start_time:Jt(t.startTime),execution_start:Jt(t.executionStart),source_url:t.sourceURL,source_function_name:t.sourceFunctionName,source_char_position:t.sourceCharPosition,invoker:t.invoker,invoker_type:t.invokerType,window_attribution:t.windowAttribution}}))},type:"long_task",_dd:{discarded:!1}};t.notify(11,{rawRumEvent:a,startTime:o.relative,domainContext:{performanceEntry:i}})}}));return{stop:function(){return n.unsubscribe()}}}(c,t).stop;u.push(U)}}else!function(t,e){var n=Dr(e,{type:Cr.LONG_TASK,buffered:!0}).subscribe((function(n){for(var r=0,i=n;r<i.length;r++){var o=i[r];if(o.entryType!==Cr.LONG_TASK)break;if(!e.trackLongTasks)break;var a=Gt(o.startTime),s={date:a.timeStamp,long_task:{id:we(),entry_type:"long-task",duration:Jt(o.duration)},type:"long_task",_dd:{discarded:!1}};t.notify(11,{rawRumEvent:s,startTime:a.relative,domainContext:{performanceEntry:o}})}}))}(c,t);var B=Xi(c,t,_,f).addError;Ar(c,t,v);var z=xe(c,_,s),V=function(t,e,n,r,i){return{get:function(o){var a=n.findView(o),s=i.findUrl(o),u=e.findTrackedSession(o);if(u&&a&&s){var c=r.findActionId(o);return{application_id:t,session_id:u.id,user_action:c?{id:c}:void 0,view:{id:a.id,name:a.name,referrer:s.referrer,url:s.url}}}}}}(t.applicationId,v,k,E,x);return{addAction:C,addError:B,addTiming:A,addFeatureFlagEvaluation:f.addFeatureFlagEvaluation,startView:R,setViewContext:N,setViewContextProperty:D,updateViewName:M,lifeCycle:c,viewHistory:k,session:v,stopSession:function(){return v.expire()},getInternalContext:V.get,startDurationVital:z.startDurationVital,stopDurationVital:z.stopDurationVital,addDurationVital:z.addDurationVital,stop:function(){u.forEach((function(t){return t()}))}}}),Xs,{startDeflateWorker:Ws,createDeflateEncoder:Hs});!function(t,e,n){var r=t[e];r&&!r.q&&r.version&&u.warn("SDK is loaded more than once. This is unsupported and might have unexpected behavior."),t[e]=n,r&&r.q&&r.q.forEach((function(t){return f(t,"onReady callback threw an error:")()}))}(C(),"DD_RUM",Ys);var Qs=n(11720),tu=n(81361),eu=n(46763),nu=n(14181),ru=n(15668);function iu(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,au(t,e,"get"))}function ou(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,au(t,e,"set"),n),n}function au(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function su(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function uu(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function cu(t,e,n){uu(t,e),e.set(t,n)}function lu(t,e){uu(t,e),e.add(t)}var du=[" daum[ /]"," deusu/"," yadirectfetcher","(?:^| )site","(?:^|[^g])news","@[a-z]","\\(at\\)[a-z]","\\(github\\.com/","\\[at\\][a-z]","^12345","^<","^[\\w \\.\\-\\(\\)]+(/v?\\d+(\\.\\d+)?(\\.\\d{1,10})?)?$","^[^ ]{50,}$","^active","^ad muncher","^amaya","^anglesharp/","^anonymous","^avsdevicesdk/","^axios/","^bidtellect/","^biglotron","^btwebclient/","^castro","^clamav[ /]","^client/","^cobweb/","^coccoc","^custom","^ddg[_-]android","^discourse","^dispatch/\\d","^downcast/","^duckduckgo","^facebook","^fdm[ /]\\d","^getright/","^gozilla/","^hatena","^hobbit","^hotzonu","^hwcdn/","^jeode/","^jetty/","^jigsaw","^linkdex","^lwp[-: ]","^metauri","^microsoft bits","^movabletype","^mozilla/\\d\\.\\d \\(compatible;?\\)$","^mozilla/\\d\\.\\d \\w*$","^navermailapp","^netsurf","^offline explorer","^php","^postman","^postrank","^python","^read","^reed","^restsharp/","^snapchat","^space bison","^svn","^swcd ","^taringa","^test certificate info","^thumbor/","^tumblr/","^user-agent:mozilla","^valid","^venus/fedoraplanet","^w3c","^webbandit/","^webcopier","^wget","^whatsapp","^xenu link sleuth","^yahoo","^yandex","^zdm/\\d","^zoom marketplace/","^{{.*}}$","adbeat\\.com","appinsights","archive","ask jeeves/teoma","bit\\.ly/","bluecoat drtr","bot","browsex","burpcollaborator","capture","catch","check","chrome-lighthouse","chromeframe","cloud","crawl","cryptoapi","dareboost","datanyze","dataprovider","dejaclick","dmbrowser","download","evc-batch/","feed","firephp","freesafeip","ghost","gomezagent","google","headlesschrome/","http","httrack","hubspot marketing grader","hydra","ibisbrowser","images","iplabel","ips-agent","java","library","mail\\.ru/","manager","monitor","morningscore/","neustar wpm","nutch","offbyone","optimize","pageburst","pagespeed","perl","phantom","pingdom","powermarks","preview","proxy","ptst[ /]\\d","reader","rexx;","rigor","rss","scan","scrape","search","serp ?reputation ?management","server","sogou","sparkler/","speedcurve","spider","splash","statuscake","stumbleupon\\.com","supercleaner","synapse","synthetic","taginspector/","torrent","tracemyfile","transcoder","trendsmapresolver","twingly recon","url","virtuoso","wappalyzer","webglance","webkit2png","websitemetadataretriever","whatcms/","wordpress","zgrab"];!function(t){try{new RegExp("(?<! cu)bot").test("dangerbot")}catch(e){return t}[["bot","(?<! cu)bot"],["google","(?<! (?:channel/|google/))google(?!(app|/google| pixel))"],["http","(?<!(?:lib))http"],["java","java(?!;)"],["search","(?<! ya(?:yandex)?)search"]].forEach((e=>{let[n,r]=e;const i=t.lastIndexOf(n);~i&&t.splice(i,1,r)}))}(du);var fu=new WeakMap,pu=new WeakMap,hu=new WeakSet,vu=new WeakSet;class mu{constructor(t){lu(this,vu),lu(this,hu),cu(this,fu,{writable:!0,value:void 0}),cu(this,pu,{writable:!0,value:void 0}),ou(this,fu,t||du.slice()),su(this,hu,gu).call(this);return Object.defineProperties((t=>this.test(t)),Object.entries(Object.getOwnPropertyDescriptors(mu.prototype)).reduce(((t,e)=>{let[n,r]=e;return"function"===typeof r.value&&Object.assign(t,{[n]:{value:this[n].bind(this)}}),"function"===typeof r.get&&Object.assign(t,{[n]:{get:()=>this[n]}}),t}),{}))}get pattern(){return new RegExp(iu(this,pu))}test(t){return Boolean(t)&&iu(this,pu).test(t)}find(){const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").match(iu(this,pu));return t&&t[0]}matches(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return iu(this,fu).filter((e=>new RegExp(e,"i").test(t)))}clear(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.exclude(this.matches(t))}extend(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];[].push.apply(iu(this,fu),t.filter((t=>-1===su(this,vu,yu).call(this,t))).map((t=>t.toLowerCase()))),su(this,hu,gu).call(this)}exclude(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],{length:e}=t;for(;e--;){const n=su(this,vu,yu).call(this,t[e]);n>-1&&iu(this,fu).splice(n,1)}su(this,hu,gu).call(this)}spawn(t){return new mu(t||iu(this,fu))}}function gu(){ou(this,pu,new RegExp(iu(this,fu).join("|"),"i"))}function yu(t){return iu(this,fu).indexOf(t.toLowerCase())}const bu=new mu;var wu=function(){var t=(0,Qs.useState)(!1),e=t[0],n=t[1];return(0,Qs.useEffect)((function(){var t=navigator.userAgent;n(bu(t))}),[]),(0,Qs.useEffect)((function(){nu.Qg&&(window.IS_BOT=e,window.isBot=bu)}),[e]),e},_u=n(11163),Su=!nu.Cg&&new tu.Gr({apiHost:"https://cdn.growthbook.io",clientKey:"sdk-rlISWMGSJZ5HCL",enableDevMode:!0,navigate:function(t){return _u.default.replace(t)},navigateDelay:0,antiFlicker:!1,trackingCallback:function(t,e){try{(null===window||void 0===window?void 0:window.analytics)&&window.analytics.track("view growthbook experiment",{experimentId:t.key,variationId:e.key})}catch(n){console.error("Error in GB trackingCallback:",n)}}}),ku=function(t){var e=t.children,n=wu(),i=(0,Qs.useState)(!1),o=(i[0],i[1]),a=(0,Qs.useState)(""),s=(a[0],a[1]);return(0,Qs.useEffect)((function(){!nu.Cg&&Su&&Su.loadFeatures({autoRefresh:!0,timeout:2e3})}),[]),(0,Qs.useEffect)((function(){var t=setInterval((function(){if(window.OneTrust){var e,n;clearInterval(t);var r={country_code:null===window||void 0===window||null===(e=window.OneTrust)||void 0===e?void 0:e.getGeolocationData().country,region_code:null===window||void 0===window||null===(n=window.OneTrust)||void 0===n?void 0:n.getGeolocationData().state};(0,ru.wS)(r)?document.body.classList.add("is-in-eea"):document.body.classList.remove("is-in-eea"),o((0,ru.wS)(r)),s(null===window||void 0===window?void 0:window.OptanonActiveGroups)}}),100)}),[]),nu.Cg||!Su||n?(0,r.tZ)(eu.Cz,{writeKey:nu.qc,cdnURL:"https://data.web.clickup.com",integrations:{"Segment.io":{apiHost:"io.web.clickup.com/v1",protocol:"https"}},initialPageview:!1,children:e}):(0,r.tZ)(tu.Ny,{growthbook:Su,children:(0,r.tZ)(eu.Cz,{writeKey:nu.qc,cdnURL:"https://data.web.clickup.com",integrations:{"Segment.io":{apiHost:"io.web.clickup.com/v1",protocol:"https"}},initialPageview:!1,children:e})})},xu=n(13076),Eu=function(){var t=[["/teams/design","Creative & Design"],["/teams/customer-service","Support"],["/teams/agile","Engineering & Product"],["/teams/product","Engineering & Product"],["/teams/website-management","Engineering & Product"],["/teams/startup","Engineering & Product"],["/teams/accounting","Finance & Accounting"],["/teams/finance","Finance & Accounting"],["/teams/human-resources","HR & Recruiting"],["/teams/remote-work","t-102451744"],["/teams/marketing","Marketing"],["/teams/media","Marketing"],["/teams/real-estate","Operations"],["/teams/operations","Operations"],["/teams/resource-management","Operations"],["/teams/construction","Operations"],["/teams/project-management","PMO - Project Management"],["/teams/sales","Sales & CRM"],["/teams/crm","Sales & CRM"],["/teams/getting-started","Personal Use"],["/teams/personal","Personal Use"],["/teams/education","Other"],["/teams/events","Other"],["/teams/health","Other"],["/teams/law","Other"],["/teams/non-profit","Other"],["/teams/student","Other"]].find((function(t){return window.location.href.includes(t[0])}));if((0,xu.f)()&&t){var e={department:t[1]};localStorage.setItem("department",JSON.stringify(e))}(0,xu.f)()&&localStorage.getItem("department")&&!t&&localStorage.removeItem("department")},Iu=n(98498),Cu={"example-flag-for-testing":!1,"new-card-ui-CLK-123":!1,"pricing-quiz-banner-is-active":!1,"contact-sales-landing-page":!1};function Ou(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cu;return{setFeature:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t[e]=n},featureIsEnabled:function(e){return t[e]}}}function Tu(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ou();return{includeExampleForTesting:function(){return t.featureIsEnabled("example-flag-for-testing")}}}function Au(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ru(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Au(t,e,n[e])}))}return t}var Mu=(0,n(64529).Ue)((function(t,e){return{flags:Ru({},Cu),actions:{setFeature:function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e().flags,o=Au({},n,r);t({flags:Ru({},i,o)})},featureIsEnabled:function(t){return e().flags[t]}},decisions:Ru({},Tu())}}));function Nu(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Lu(t){return function(t){if(Array.isArray(t))return Nu(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return Nu(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nu(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Du=function(){var t=Mu(),e=(0,Qs.useState)([]),n=e[0],i=e[1];return(0,Qs.useEffect)((function(){var e=function(e){var r=e,o=!1;try{var a,s;o="true"===(null===(s=null===(a=window.localStorage.getItem(r))||void 0===a?void 0:a.trim())||void 0===s?void 0:s.toLowerCase())}catch(u){}if(!o)return"continue";t.actions.setFeature(r,o),i((function(){return Lu(n).concat([r])})),console.log("\ud83d\udea7 Flag Override: ".concat(r),o)},r=new URLSearchParams(window.location.search);if(r.has("debug")&&"true"===r.get("debug"))for(var o in t.flags)e(o)}),[i]),(0,r.tZ)("div",{className:"visuallyHidden","data-testid":"local-feature-flag-override","data-overridden-flags":n.join(", ")})},Pu=n(5678),ju=function(){return(0,Pu.qR)((function(){if(nu.Qg){var t=new URLSearchParams(window.location.search).get("debug")||!1;nu.XK||"true"!==t||console.log("\ud83d\udea7 Debug Console Log Enabled",!0)}})),null},Fu=n(34051),Uu=n.n(Fu),Bu=n(23493),zu=n.n(Bu),Vu=n(96552),qu=n(91486),Gu=n(53669),Hu=n(30619),Ju=n(27218),Ku=n(25040);function Wu(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function Zu(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Wu(o,r,i,a,s,"next",t)}function s(t){Wu(o,r,i,a,s,"throw",t)}a(void 0)}))}}function $u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xu(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){$u(t,e,n[e])}))}return t}var Yu=function(){var t=(0,Hu.G)(nu.Qg),e=(0,Ju.b)(),n=(0,_u.useRouter)(),r=(0,Gu.F)(),i=function(){var n=Zu(Uu().mark((function n(){var r,i,o,a;return Uu().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=window.location.href,o=i?null===(r=new URL(i,window.location.origin))||void 0===r?void 0:r.pathname:null===e||void 0===e?void 0:e.pathname,a=Xu({},t,{actual_url:i||(null===e||void 0===e?void 0:e.location),actual_path:o}),n.abrupt("return",a);case 8:return n.prev=8,n.t0=n.catch(0),(0,Vu.f)("handleAsyncProps: ".concat(n.t0),"error"),n.abrupt("return",{});case 12:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(){return n.apply(this,arguments)}}(),o=function(){var t=Zu(Uu().mark((function t(e){var n;return Uu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i();case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return");case 5:(0,qu.ut)(e,n);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a=function(){(0,Ku.c)()};(0,Pu.OR)("load",a),(0,Pu.OR)("message",o);var s=function(){var t=Zu(Uu().mark((function t(){var e;return Uu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&nu.Qg&&window.analytics){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,i();case 4:e=t.sent,(0,Vu.f)("handleRouteChange:defaultProperties::","info",e),window.analytics.page(e),window.analytics.identify(e),a();case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();(0,Qs.useEffect)((function(){if(null===n||void 0===n?void 0:n.isReady){var t=zu()(s,300,{leading:!1,trailing:!0});return n.events.on("routeChangeComplete",t),function(){return n.events.off("routeChangeComplete",t)}}}),[n]),(0,Qs.useEffect)((function(){r&&function(t){window.mutiny&&window.mutiny.client&&t&&window.mutiny.client.identify(parseInt(t),{})}(r)}),[r]),(0,Qs.useEffect)((function(){var t,e,n,r,i,o=window.location.hostname.split(".").slice(-2).join(".")||window.location.hostname,a="; path=/; domain=.".concat(o),s="; expires=".concat(new Date(Date.now()+31536e6).toUTCString()),u=new URLSearchParams(window.location.search),c=u.get("utm_source")||"none",l=u.get("utm_medium")||"none",d=u.get("utm_campaign")||"none",f=u.get("utm_content")||"none",p=u.get("utm_term")||"none";if("none"!==c||"none"!==l||"none"!==d||"none"!==f||"none"!==p)t=c,e=l,n=d,r=f,i=p;else if(""===document.referrer)t="(none)",e="(direct)",n="",r="",i="";else{if(document.referrer.includes("clickup.com"))return;document.referrer.match(/(360\.cn|alice\.com|aliceadsl\.fr|alltheweb\.com|altavista\.com|aol\.com|ask\.com|aol\.fr|aol\.de|auone\.jp|avg\.com|babylon\.com|baidu\.com|bing\.com|centrum\.cz|comcast\.net|conduit\.com|daum\.net|duckduckgo\.com|ecosia\.org|ekolay\.net|eniro\.se|globo\.combusca|\.google\.|goo\.ne\.jp|haosou\.com|incredimail\.com|kvasir\.no|bing\.com|lycos\.com|nadji\.si|naver\.com|netscape\.com|onet\.pl|ozu\.es|qwant\.com|rakuten\.co\.jp|rambler\.ru|search-results\.com|search\.smt\.docomo\.ne\.jp|sesam\.no|seznam\.cz|so\.com|sogou\.com|startsiden\.no|szukacz\.pl|buscador\.terra\.com\.br|search\.tut\.by|ukr\.net|virgilio\.it|voila\.fr|wp\.pl|yahoo\.com|yandex\.com|yam\.com|yahoo\.cn|yandex\.ru)/)?(t=document.referrer.split("//")[1].split("/")[0],e="organic",n="",r="",i=""):(t=document.referrer.split("//")[1].split("/")[0],e="referral",n="",r="",i="")}for(var h=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","utm_stamp"],v=[t,e,n,r,i,new Date(Date.now()+18e5).toUTCString()],m=0;m<h.length;m++)document.cookie="".concat(h[m],"=").concat(v[m]).concat(s).concat(a)}),[])},Qu=n(86010),tc=n(35698),ec=n.n(tc),nc=function(t){var e=t.timeout,n=void 0===e?2e3:e,i=t.callback,o=t.otherClasses,a=(0,Qs.useState)(!0),s=a[0],u=a[1];return(0,Pu.qR)((function(){var t=setTimeout((function(){u(!1),i&&i()}),n+10);return function(){return clearTimeout(t)}})),s?(0,r.tZ)("div",{id:"growthbook-experiment-loader",className:(0,Qu.Z)(ec().loader,o),style:{"--duration":n+"ms"},"data-testid":"experiment-loader"}):null};function rc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ic(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){rc(t,e,n[e])}))}return t}var oc=function(t){var e=t.Component,n=t.pageProps;Yu();var i=wu();return nu.Qg&&(Eu(),(0,Iu.cO)("sessionStorage")),nu.Qg&&!i&&(Ys.init({applicationId:"83184deb-b746-47fd-ae02-cfdaf40f461a",clientToken:"pub799d7a0d9b4645921df57724d2398111",site:"datadoghq.com",service:"clickup-landing-marketing",env:"%%ENVIROMENT%%",version:"production-release-2024-10-30T1703",sessionSampleRate:5,sessionReplaySampleRate:5,startSessionReplayRecordingManually:!0,trackUserInteractions:!0,trackResources:!0,trackLongTasks:!0,defaultPrivacyLevel:"mask-user-input",beforeSend:function(t){return t.view.url=t.view.url.replace(/email=[^&]*/,"email=REDACTED"),!0}}),Ys.startSessionReplayRecording()),(0,r.BX)(ku,{children:[(0,r.tZ)(nc,{timeout:1e3}),(0,r.tZ)(Du,{}),(0,r.tZ)(ju,{}),(0,r.tZ)(e,ic({},n))]})}},14181:function(t,e,n){"use strict";n.d(e,{Cg:function(){return s},TQ:function(){return u},XK:function(){return c},Vq:function(){return l},Nv:function(){return d},Qg:function(){return f},nW:function(){return h},e_:function(){return v},eM:function(){return m},Fn:function(){return y},RW:function(){return b},Tx:function(){return w},H8:function(){return _},qc:function(){return S},n1:function(){return k},F_:function(){return x},wC:function(){return E},q8:function(){return I}});var r=n(34155);function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var o,a,s=!1,u=!1,c=!0,l="true"===r.env.NEXT_PUBLIC_DEBUG,d=(r.env.NEXT_PUBLIC_IS_PROGRAMMATIC,"stackbit"===r.env.NEXT_PUBLIC_IS_STACKBIT),f=!0,p=r.env.NEXT_PUBLIC_API_HOST||"",h=(c&&f&&p.includes("dev"),"https://endpoint.web.clickup.com/v1/dev"),v="HVyLuZYM",m=[500,600,800,1200,1600],g=["fr-FR","es-ES","it","pt-BR","de"],y=g.map((function(t){return t.toLowerCase()})),b=g.map((function(t){return"/"+t+"/pricing"})),w=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","IS","LI","NO","CH"],_=(o=w,function(t){if(Array.isArray(t))return i(t)}(o)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(o)||function(t,e){if(t){if("string"===typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat(["GB"]),S="1jee08ClTXJYjnSCN6OoV3mNPyxRsDSu",k=r.env.NEXT_PUBLIC_AMPLITUDE_API_KEY_PROD||"c46b2f298965cf2b28bc32825ba60e9f",x=Number(r.env.NEXT_PUBLIC_AMPLITUDE_SAMPLE_RATE)||.1,E="\ud83d\udea8 Expected Segment context provider to be mounted";!function(t){t.OPEN="OPEN",t.CLOSE="CLOSE",t.RESET="RESET",t.OPTION="OPTION",t.PLAN="PLAN",t.CONTACT_SALES="CONTACT_SALES",t.GET_STARTED="GET_STARTED",t.PLAN_SELECTED="PLAN_SELECTED",t.DISMISS_BANNER="DISMISS_BANNER"}(a||(a={}));var I={CP_ENABLE:!0,CP_SCRIPT:"https://js.chilipiper.com/marketing.js",CP_TENANT_DOMAIN:"clickup",CP_TENANT_ROUTER:"inbound_router",CP_MKTO_FORM_ID_LIST:["1006","1299","1176"]}},97660:function(t,e,n){"use strict";n.d(e,{kT:function(){return a},d8:function(){return r},ej:function(){return i},Do:function(){return o}});var r=function(t,e,n){try{var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3);var i="expires="+r.toUTCString();document.cookie="".concat(t,"=").concat(e,";").concat("domain=.clickup.com;").concat(i,";path=/")}catch(o){console.error("setCookie error:",o)}},i=function(t){try{return!!t&&-1!==document.cookie.split(";").findIndex((function(e){return e.includes("".concat(t,"="))}))}catch(e){console.error("getCookie error:",e)}},o=function(t){try{if(!t)return console.log("ERROR.COOKIE.NOTPROVIDED",t),!1;var e=document.cookie.split(";"),n=e.findIndex((function(e){return e.includes("".concat(t,"="))}));return-1===n?(console.log("ERROR.COOKIE.NOTFOUND",t),null):e[n].split("=")[1]}catch(r){console.error("ERROR.COOKIE:",r)}},a=function(t){i(t)?document.cookie=t+"=;path=/"+(window.location.host.includes("clickup.com")?";domain=.clickup.com;":"")+";expires=Thu, 01 Jan 1970 00:00:01 GMT":console.error("ERROR::growthbookHelper.deleteCookie: cookie does not exist",t)}},15668:function(t,e,n){"use strict";n.d(e,{kN:function(){return u},wS:function(){return s},jr:function(){return c}});var r=n(14181),i=n(13076),o=function(){if(!(0,i.f)())return null;var t=localStorage.getItem("cuUserLocation");return"string"===typeof t?JSON.parse(t):null},a=function(){return fetch("".concat("https://api.clickup.com/v1","/ip")).then((function(t){if(!t.ok)throw t;return t.json()})).then((function(t){return(0,i.f)()&&localStorage.setItem("cuUserLocation",JSON.stringify({value:t,expiry:(new Date).getTime()+864e5})),t})).catch((function(t){console.error("Error fetching users current location:",t)}))},s=function(t){return r.Tx.includes(t.country_code)},u=function(t){return r.H8.includes(t.country_code)},c=function(){var t=o();return t?t.value.country_name:(t=a()).country_name}},96552:function(t,e,n){"use strict";n.d(e,{f:function(){return s}});var r=n(34051),i=n.n(r),o=n(14181);function a(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}var s=function(){var t,e=(t=i().mark((function t(e){var n,r,a,s,u,c,l=arguments;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:"log",r=l.length>2?l[2]:void 0,o.Qg){t.next=3;break}return t.abrupt("return");case 3:if(a=new URLSearchParams(window.location.search),s=a.get("debug")||!1,o.Vq||!o.XK&&"true"===s){t.next=7;break}return t.abrupt("return");case 7:(null===window||void 0===window?void 0:window.analytics)&&window.analytics.debug(!0),u="object"===typeof r&&Object.keys(r).length>0&&void 0!==r,c=u?r:"",t.t0=n,t.next="log"===t.t0?13:"warn"===t.t0?15:"error"===t.t0?17:"info"===t.t0?19:21;break;case 13:return console.log("\ud83d\udea7 ".concat(e),c),t.abrupt("break",22);case 15:return console.warn("\u26a0\ufe0f ".concat(e),c),t.abrupt("break",22);case 17:return console.error("\ud83d\udea8 ".concat(e),c),t.abrupt("break",22);case 19:return console.info("\u2139 ".concat(e),c),t.abrupt("break",22);case 21:console.log("\ud83d\udea7 ".concat(e),c);case 22:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function s(t){a(o,r,i,s,u,"next",t)}function u(t){a(o,r,i,s,u,"throw",t)}s(void 0)}))});return function(t){return e.apply(this,arguments)}}()},30619:function(t,e,n){"use strict";n.d(e,{G:function(){return o}});var r=n(14181),i=n(13076),o=function(t){var e;if(!r.Qg||!(0,i.f)()||!t)return{};var n="gtagData",o=localStorage.getItem(n);if(o){var a=JSON.parse(o),s=a.data,u=a.expiration;if(u&&new Date(u)>new Date)return s;localStorage.removeItem(n)}var c=null===(e=window.dataLayer)||void 0===e?void 0:e.find((function(t){return null===t||void 0===t?void 0:t.gtagResult}));if(!c)return{};var l=c.gtagResult,d=new Date;d.setMinutes(d.getMinutes()+30);var f={data:l,expiration:d.toISOString()};return localStorage.setItem(n,JSON.stringify(f)),l}},13076:function(t,e,n){"use strict";n.d(e,{f:function(){return r}});var r=function(){var t="test";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(e){return!1}}},90344:function(t,e,n){"use strict";n.d(e,{H:function(){return o}});var r=n(14181);function i(t){return e=t,(null!=(n=Error)&&"undefined"!==typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](e):e instanceof n)?t.message:String(t);var e,n}function o(t,e){var n=i(t);console.error("\ud83d\udea8 "+e,t),r.Qg&&(null===window||void 0===window?void 0:window.DD_RUM)&&window.DD_RUM.onReady((function(){window.DD_RUM.addError(n,{error:{message:e}})}))}},98498:function(t,e,n){"use strict";n.d(e,{pD:function(){return l},BF:function(){return d},cO:function(){return f},uF:function(){return p},x7:function(){return h}});var r=n(13076),i=n(87078),o=n(90344),a=n(96552);function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var l=function(t){var e=(0,i.B)(),n=(0,r.f)();return"sessionStorage"===t?e?sessionStorage:void 0:n?localStorage:void 0},d=function(t,e){if(t)try{var n=JSON.parse(t),r=l(e);if(!r)return;if(r.getItem("redirectParams")){var i=JSON.parse(r.getItem("redirectParams")||"");return void r.setItem("redirectParams",JSON.stringify(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){u(t,e,n[e])}))}return t}({},i,n)))}"object"===typeof n&&null!==n&&r.setItem("redirectParams",JSON.stringify(n))}catch(a){(0,o.H)(a,"ERROR.REDIRECT_PARAMS.PARSING_JSON")}},f=function(t){var e=document.querySelectorAll("[data-cu-redirect-params]");(0,r.f)()&&(0,i.B)()&&e.forEach((function(e){e.addEventListener("click",(function(){var n=e.getAttribute("data-cu-redirect-params");n&&d(n,t)}))}))},p=function(t,e){var n=t.target.dataset.cuRedirectParams;n&&d(n,e)},h=function(t){var e=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t)return"";var n=Object.entries(t);return n.length?"".concat(e?"?":"").concat(n.filter((function(t){var e=c(t,2),n=(e[0],e[1]);return Boolean(n)})).map((function(t){var e=c(t,2),n=e[0],r=e[1];if(r)return"number"===typeof r?"".concat(n,"=").concat(r.toString()):"string"===typeof r?"".concat(n,"=").concat(encodeURIComponent(r)):"".concat(n,"=").concat(encodeURIComponent(JSON.stringify(r)))})).join("&")):""}(t||function(){if(!(0,i.B)())return{};var t=sessionStorage.getItem("redirectParams");if(null===t)return{};try{return JSON.parse(t)}catch(e){return(0,a.f)("ERROR.REDIRECT_PARAMS.PARSING_JSON: "+e,"error"),{}}}());return e}},27218:function(t,e,n){"use strict";n.d(e,{b:function(){return i}});var r=n(14181),i=function(){if(r.Qg)return{location:window.location.href,pathname:window.location.pathname}}},11647:function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{V:function(){return i}});var i=function(t){var e=t.__metadata,n=t.internalName,i=t.sectionIndex,o=t.sectionModelName,a=t.sectionColor,s=t.sectionLabel,u=t.sectionTitle,c=t.color,l=t.label,d=t.title,f=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){r(t,e,n[e])}))}return t}({},"number"===typeof i&&{sectionIndex:i+1},{sectionId:null===e||void 0===e?void 0:e.id,sectionColor:a||c,sectionInternalName:n,sectionModelName:o||(null===e||void 0===e?void 0:e.modelName),sectionLabel:s||l,sectionTitle:u||d});return JSON.parse(JSON.stringify(f))}},91486:function(t,e,n){"use strict";n.d(e,{fg:function(){return o},sG:function(){return r},Yh:function(){return i},$K:function(){return a},ut:function(){return y},AJ:function(){return p},Vz:function(){return s.V}});var r="navattic:event",i="https://capture.navattic.com",o={CLOSE_CHECKLIST:"CLOSE_CHECKLIST",COMPLETE_FLOW:"COMPLETE_FLOW",COMPLETE_TASK:"COMPLETE_TASK",CONVERTED:"CONVERTED",ENGAGE:"ENGAGE",IDENTIFY_USER:"IDENTIFY_USER",NAVIGATE:"NAVIGATE",OPEN_CHECKLIST:"OPEN_CHECKLIST",START_CHECKLIST:"START_CHECKLIST",START_FLOW:"START_FLOW",VIEW_STEP:"VIEW_STEP"},a={CLOSE_CHECKLIST:"close checklist demo",COMPLETE_FLOW:"complete flow demo",COMPLETE_TASK:"complete task demo",CONVERTED:"converted demo",ENGAGE:"engage demo",IDENTIFY_USER:"identify",NAVIGATE:"navigate demo",OPEN_CHECKLIST:"open checklist demo",START_CHECKLIST:"start checklist demo",START_FLOW:"start flow demo",VIEW_STEP:"view step demo"},s=n(11647),u=n(11720);var c=function(t){return(0,u.isValidElement)(t)&&Boolean(t.props.children)},l=function(t){return"undefined"===typeof t||null===t||"boolean"===typeof t||"{}"===JSON.stringify(t)?"":t.toString()},d=function(t){return e=t,(null!=(n=Array)&&"undefined"!==typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](e):e instanceof n)||(0,u.isValidElement)(t)?u.Children.toArray(t).reduce((function(t,e){var n="";return n=(0,u.isValidElement)(e)&&c(e)?d(e.props.children):(0,u.isValidElement)(e)&&!c(e)?"":l(e),t.concat(n)}),""):l(t);var e,n};function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=function(t){var e=t.sectionId,n=t.sectionInternalName,r=t.sectionModelName,i=t.sectionIndex,o=t.sectionColor,a=t.sectionLabel,s=t.sectionTitle,u=t.source,c=t.color,l=t.buttonClicked,p=t.children,h=t.linkUrl,v=t.linkTitle,m=t.label,g=t.title,y=t.type,b=t.clickedType,w=t.fromSlide,_=t.toSlide,S=t.articleLabel,k=t.articleTitle,x=t.articleBlockId,E=t.articleBlockIndex,I=t.articleBlockModelName,C=t.location;return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){f(t,e,n[e])}))}return t}({},function(){var t={sectionId:e,sectionColor:o,sectionIndex:i,sectionInternalName:n,sectionModelName:r,sectionLabel:a||void 0,sectionTitle:s||void 0,source:""!==u?u:void 0,color:c,buttonClicked:l||p&&d(p),linkUrl:h||void 0,linkTitle:v||void 0,label:m||void 0,title:g||void 0,type:b||y||void 0,fromSlide:w||void 0,toSlide:_||void 0,articleLabel:S||void 0,articleTitle:k||void 0,articleBlockId:x||void 0,articleBlockIndex:E||void 0,articleBlockModelName:I||void 0,location:C||void 0};return JSON.parse(JSON.stringify(t))}())},h=n(14181),v=n(27218);function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){m(t,e,n[e])}))}return t}var y=function(t,e){var n;(null===t||void 0===t?void 0:t.origin)===i&&(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.kind)===r&&function(t,e){if(h.Qg&&window.analytics&&t){var n=(0,v.b)(),r=t.event,i=e||void 0;n&&i&&"IDENTIFY_USER"!==r&&(i=g({},i,{actual_url:null===n||void 0===n?void 0:n.location,actual_path:null===n||void 0===n?void 0:n.pathname}));var s=g({},i,{demo:g({},t)});o.IDENTIFY_USER===r?window.analytics.identify(g({},i)):window.analytics.track(a[r],g({},s))}}(t.data,e)}},25040:function(t,e,n){"use strict";n.d(e,{c:function(){return u}});var r=n(14181),i=n(30619),o=n(27218),a=n(90344);function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u=function(){document.querySelectorAll("[data-segment-view]").forEach((function(t){return c(t)}))},c=function(t){var e,n=!1,u=new IntersectionObserver((function(r){r[0].isIntersecting?n||(n=!0,e=setTimeout((function(){var e,n=t.dataset.segmentProps,r=c(n);if(r&&(null===window||void 0===window||null===(e=window.OptanonActiveGroups)||void 0===e?void 0:e.includes("C0002"))){try{window.analytics.track("view web",r,l)}catch(i){(0,a.H)(i,"ERROR.SEGMENT_TRACK_VIEW")}return l()}u.disconnect()}),2e3)):n&&(n=!1,clearTimeout(e))}));u.observe(t);var c=function(t){if(t){var e=(0,i.G)(r.Qg),n=(0,o.b)(),a=JSON.parse(t);return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){s(t,e,n[e])}))}return t}({},e,{actual_url:(null===n||void 0===n?void 0:n.location)||"",actual_path:(null===n||void 0===n?void 0:n.pathname)||""},a,{type:"view"})}},l=function(){n&&(n=!1,clearTimeout(e),u.disconnect())};return l}},87078:function(t,e,n){"use strict";n.d(e,{B:function(){return r}});var r=function(){var t="test";try{return sessionStorage.setItem(t,t),sessionStorage.removeItem(t),!0}catch(e){return!1}}},53669:function(t,e,n){"use strict";n.d(e,{F:function(){return o}});var r=n(14181),i=n(13076),o=function(){if(!r.Qg)return null;if(window.dataLayer&&window.dataLayer.length){var t=window.dataLayer.filter((function(t){return"object"===typeof t&&!Array.isArray(t)&&t.hasOwnProperty("userId")&&""!==t.userId}));if(Boolean(t.length))return parseInt(t[0].userId)}if(!(0,i.f)())return null;var e=localStorage.getItem("ajs_user_id");if("string"===typeof e){var n=JSON.parse(e);if(null!==n)return n}var o=localStorage.getItem("cuUserId");return"string"===typeof o?JSON.parse(o).userId:null}},35698:function(t){t.exports={loader:"ExperimentLoader_loader__tDHtZ"}},1720:function(){},11163:function(t,e,n){t.exports=n(90387)},53410:function(t){function e(t){return function(e,n,r,o){var a,s=o&&function(t){return"function"===typeof t}(o.normalizer)?o.normalizer:i;n=s(n);for(var u=!1;!u;)c();function c(){for(a in e){var t=s(a);if(0===n.indexOf(t)){var r=n.substr(t.length);if("."===r.charAt(0)||0===r.length){n=r.substr(1);var i=e[a];return null==i?void(u=!0):n.length?void(e=i):void(u=!0)}}}a=void 0,u=!0}if(a)return null==e?e:t(e,a,r)}}function n(t,e){return t.hasOwnProperty(e)&&delete t[e],t}function r(t,e,n){return t.hasOwnProperty(e)&&(t[e]=n),t}function i(t){return t.replace(/[^a-zA-Z0-9\.]+/g,"").toLowerCase()}t.exports=e((function(t,e){if(t.hasOwnProperty(e))return t[e]})),t.exports.find=t.exports,t.exports.replace=function(t,n,i,o){return e(r).call(this,t,n,i,o),t},t.exports.del=function(t,r,i){return e(n).call(this,t,r,null,i),t}},34155:function(t){var e,n,r=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"===typeof setTimeout?setTimeout:i}catch(t){e=i}try{n="function"===typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var s,u=[],c=!1,l=-1;function d(){c&&s&&(c=!1,s.length?u=s.concat(u):l=-1,u.length&&f())}function f(){if(!c){var t=a(d);c=!0;for(var e=u.length;e;){for(s=u,u=[];++l<e;)s&&s[l].run();l=-1,e=u.length}s=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function h(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new p(t,e)),1!==u.length||c||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},70655:function(t,e,n){"use strict";n.d(e,{ZT:function(){return i},pi:function(){return o},_T:function(){return a},mG:function(){return s},Jh:function(){return u},XA:function(){return c},CR:function(){return l},ev:function(){return d}});var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function u(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(u){s=[6,u],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}Object.create;function c(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function d(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create},53250:function(t,e,n){"use strict";var r=n(11720);var i="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},o=r.useState,a=r.useEffect,s=r.useLayoutEffect,u=r.useDebugValue;function c(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!i(t,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(t,e){return e()}:function(t,e){var n=e(),r=o({inst:{value:n,getSnapshot:e}}),i=r[0].inst,l=r[1];return s((function(){i.value=n,i.getSnapshot=e,c(i)&&l({inst:i})}),[t,n,e]),a((function(){return c(i)&&l({inst:i}),t((function(){c(i)&&l({inst:i})}))}),[t]),u(n),n};e.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},50139:function(t,e,n){"use strict";var r=n(11720),i=n(61688);var o="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},a=i.useSyncExternalStore,s=r.useRef,u=r.useEffect,c=r.useMemo,l=r.useDebugValue;e.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var d=s(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;d=c((function(){function t(t){if(!u){if(u=!0,a=t,t=r(t),void 0!==i&&f.hasValue){var e=f.value;if(i(e,t))return s=e}return s=t}if(e=s,o(a,t))return e;var n=r(t);return void 0!==i&&i(e,n)?e:(a=t,s=n)}var a,s,u=!1,c=void 0===n?null:n;return[function(){return t(e())},null===c?void 0:function(){return t(c())}]}),[e,n,r,i]);var p=a(t,d[0],d[1]);return u((function(){f.hasValue=!0,f.value=p}),[p]),l(p),p}},61688:function(t,e,n){"use strict";t.exports=n(53250)},52798:function(t,e,n){"use strict";t.exports=n(50139)},5678:function(t,e,n){"use strict";n.d(e,{qR:function(){return i},OR:function(){return o},S1:function(){return a},LI:function(){return s},i8:function(){return u},ac:function(){return c},t$:function(){return l},Gq:function(){return f},iP:function(){return p}});var r=n(11720);var i=function(t){(0,r.useEffect)(t,[])};var o=function(t,e,n,i){const o=(0,r.useRef)(e);s((()=>{o.current=e}),[e]),(0,r.useEffect)((()=>{var e;const r=null!==(e=null===n||void 0===n?void 0:n.current)&&void 0!==e?e:window;if(!r||!r.addEventListener)return;const a=t=>o.current(t);return r.addEventListener(t,a,i),()=>{r.removeEventListener(t,a,i)}}),[t,n,i])};var a=function(t,{threshold:e=0,root:n=null,rootMargin:i="0%",freezeOnceVisible:o=!1}){const[a,s]=(0,r.useState)(),u=(null===a||void 0===a?void 0:a.isIntersecting)&&o,c=([t])=>{s(t)};return(0,r.useEffect)((()=>{const r=null===t||void 0===t?void 0:t.current;if(!!!window.IntersectionObserver||u||!r)return;const o=new IntersectionObserver(c,{threshold:e,root:n,rootMargin:i});return o.observe(r),()=>o.disconnect()}),[null===t||void 0===t?void 0:t.current,JSON.stringify(e),n,i,u]),a};var s="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;var u=function(t=!1,e="___gatsby"){const[n,i]=(0,r.useState)(t);return s((()=>{if(!n)return;const t=document.body.style.overflow,r=document.body.style.paddingRight;document.body.style.overflow="hidden";const i=document.getElementById(e),o=i?i.offsetWidth-i.scrollWidth:0;return o&&(document.body.style.paddingRight=`${o}px`),()=>{document.body.style.overflow=t,o&&(document.body.style.paddingRight=r)}}),[n]),(0,r.useEffect)((()=>{n!==t&&i(t)}),[t]),[n,i]};var c=function(t){const e=t=>"undefined"!==typeof window&&window.matchMedia(t).matches,[n,i]=(0,r.useState)(e(t));function o(){i(e(t))}return(0,r.useEffect)((()=>{const e=window.matchMedia(t);return o(),e.addListener?e.addListener(o):e.addEventListener("change",o),()=>{e.removeListener?e.removeListener(o):e.removeEventListener("change",o)}}),[t]),n};var l=function(t,e,n="mousedown"){o(n,(n=>{const r=null===t||void 0===t?void 0:t.current;r&&!r.contains(n.target)&&e(n)}))};const d={};var f=function(t,e){const[n,i]=(0,r.useState)((()=>{var n;return!t||(null===e||void 0===e?void 0:e.shouldPreventLoad)?"idle":"undefined"===typeof window?"loading":null!==(n=d[t])&&void 0!==n?n:"loading"}));return(0,r.useEffect)((()=>{var n,r;if(!t||(null===e||void 0===e?void 0:e.shouldPreventLoad))return;const o=d[t];if("ready"===o||"error"===o)return void i(o);const a=function(t){const e=document.querySelector(`script[src="${t}"]`),n=null===e||void 0===e?void 0:e.getAttribute("data-status");return{node:e,status:n}}(t);let s=a.node;if(s)i(null!==(r=null!==(n=a.status)&&void 0!==n?n:o)&&void 0!==r?r:"loading");else{s=document.createElement("script"),s.src=t,s.async=!0,s.setAttribute("data-status","loading"),document.body.appendChild(s);const e=t=>{const e="load"===t.type?"ready":"error";null===s||void 0===s||s.setAttribute("data-status",e)};s.addEventListener("load",e),s.addEventListener("error",e)}const u=e=>{const n="load"===e.type?"ready":"error";i(n),d[t]=n};return s.addEventListener("load",u),s.addEventListener("error",u),()=>{s&&(s.removeEventListener("load",u),s.removeEventListener("error",u)),s&&(null===e||void 0===e?void 0:e.removeOnUnmount)&&s.remove()}}),[t,null===e||void 0===e?void 0:e.shouldPreventLoad,null===e||void 0===e?void 0:e.removeOnUnmount]),n};var p=function(){const[t,e]=(0,r.useState)({width:0,height:0}),n=()=>{e({width:window.innerWidth,height:window.innerHeight})};return o("resize",n),s((()=>{n()}),[]),t}},59108:function(t,e,n){"use strict";n.d(e,{v4:function(){return a}});for(var r,i=256,o=[];i--;)o[i]=(i+256).toString(16).substring(1);function a(){var t,e=0,n="";if(!r||i+16>256){for(r=Array(e=256);e--;)r[e]=256*Math.random()|0;e=i=0}for(;e<16;e++)t=r[i+e],n+=6==e?o[15&t|64]:8==e?o[63&t|128]:o[t],1&e&&e>1&&e<11&&(n+="-");return i++,n}},96475:function(t,e,n){"use strict";function r(t,e,n){e.split&&(e=e.split("."));for(var r,i,o=0,a=e.length,s=t;o<a&&"__proto__"!==(i=e[o++])&&"constructor"!==i&&"prototype"!==i;)s=s[i]=o===a?n:typeof(r=s[i])===typeof e?r:0*e[o]!==0||~(""+e[o]).indexOf(".")?{}:[]}n.d(e,{N:function(){return r}})},97997:function(t,e,n){"use strict";n.d(e,{HY:function(){return r.HY},tZ:function(){return o},BX:function(){return o}});n(11720);var r=n(6400),i=0;function o(t,e,n,o,a){var s,u,c={};for(u in e)"ref"==u?s=e[u]:c[u]=e[u];var l={type:t,props:c,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--i,__source:a,__self:o};if("function"==typeof t&&(s=t.defaultProps))for(u in s)void 0===c[u]&&(c[u]=s[u]);return r.YM.vnode&&r.YM.vnode(l),l}},64529:function(t,e,n){"use strict";n.d(e,{Ue:function(){return c}});const r=t=>{let e;const n=new Set,r=(t,r)=>{const i="function"===typeof t?t(e):t;if(!Object.is(i,e)){const t=e;e=(null!=r?r:"object"!==typeof i)?i:Object.assign({},e,i),n.forEach((n=>n(e,t)))}},i=()=>e,o={setState:r,getState:i,subscribe:t=>(n.add(t),()=>n.delete(t)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}};return e=t(r,i,o),o},i=t=>t?r(t):r;var o=n(11720),a=n(52798);const{useSyncExternalStoreWithSelector:s}=a;const u=t=>{"function"!==typeof t&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e="function"===typeof t?i(t):t,n=(t,n)=>function(t,e=t.getState,n){const r=s(t.subscribe,t.getState,t.getServerState||t.getState,e,n);return(0,o.useDebugValue)(r),r}(e,t,n);return Object.assign(n,e),n},c=t=>t?u(t):u}},function(t){var e=function(e){return t(t.s=e)};t.O(0,[179],(function(){return e(76363),e(90387)}));var n=t.O();_N_E=n}]);