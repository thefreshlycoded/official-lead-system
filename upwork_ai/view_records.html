<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Listings</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-pzjw8f+ua7Kw1TIq4Wg3s2X8q6pga5blmsO1W5O9sLZZeSxF2w4I5nJmkm4mg6AI" crossorigin="anonymous">
</head>
<body>
    <header class="container my-4">
        <h1 class="text-center">Job Listings</h1>
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item"><a class="nav-link" href="#home">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="#about">About</a></li>
                    <li class="nav-item"><a class="nav-link" href="#services">Services</a></li>
                    <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <main class="container">
        <section id="job-listings" class="my-5">
            <h2 class="mb-4">Available Job Listings</h2>
            <table class="table table-striped table-bordered">
                <thead class="thead-dark">
                    <tr>
                        <th>ID</th>
                        <th>Title</th>
                        <th>Description</th>
                        <th>Location</th>
                        <th>Posted Date</th>
                    </tr>
                </thead>
                <tbody>
                    <?php
                    // Database connection
                    $conn = pg_connect("host=localhost dbname=upwork_scraper user=alwayscodedfresh password=Yachtzeex5!");
                    if (!$conn) {
                        echo "<tr><td colspan='5'>An error occurred while connecting to the database: " . htmlspecialchars(pg_last_error()) . "</td></tr>";
                        exit;
                    }

                    // Query job listings
                    $result = pg_query($conn, "SELECT id, title, description, location, post_date FROM job_listings LIMIT 100");
                    if (!$result) {
                        echo "<tr><td colspan='5'>An error occurred while querying the database: " . htmlspecialchars(pg_last_error()) . "</td></tr>";
                        exit;
                    }

                    // Display job listings in the table
                    while ($row = pg_fetch_assoc($result)) {
                        echo "<tr>";
                        echo "<td>" . htmlspecialchars($row['id']) . "</td>";
                        echo "<td>" . htmlspecialchars($row['title']) . "</td>";
                        echo "<td>" . htmlspecialchars($row['description']) . "</td>";
                        echo "<td>" . htmlspecialchars($row['location']) . "</td>";
                        echo "<td>" . htmlspecialchars($row['post_date']) . "</td>";
                        echo "</tr>";
                    }

                    // Close the database connection
                    pg_close($conn);
                    ?>
                </tbody>
            </table>
        </section>
    </main>

    <footer class="container text-center my-4">
        <p>&copy; 2024 Always Coded Fresh. All rights reserved.</p>
    </footer>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-LtrjvnR4/Jr59rj8vnXkq5Ug8AMq3RZvsKST3FClZx5v9KKMP8zDnhk7w+Br4Zrj" crossorigin="anonymous"></script>
</body>
</html>

